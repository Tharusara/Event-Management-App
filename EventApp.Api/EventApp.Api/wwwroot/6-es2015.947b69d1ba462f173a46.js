(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{CC9r:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomersModule",(function(){return ke}));var r=n("ofXK"),c=n("tyNb"),a=n("mrSG"),i=n("zHse"),o=n("fXoL"),s=n("TZGB"),b=n("0IaG"),m=n("dNgK"),l=n("5VPf"),d=n("Xa2L"),u=n("Wp6s"),f=n("yX84"),h=n("bTqV"),p=n("NFeN");function g(t,e){1&t&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Tb())}function T(t,e){if(1&t&&(o.Ub(0,"tr"),o.Ub(1,"th"),o.Mc(2,"Passport Number"),o.Tb(),o.Ub(3,"td"),o.Mc(4),o.Tb(),o.Tb()),2&t){const t=o.jc(3);o.Bb(4),o.Nc(t.customer.passport)}}function U(t,e){if(1&t&&(o.Ub(0,"tr"),o.Ub(1,"th"),o.Mc(2,"Description"),o.Tb(),o.Ub(3,"td"),o.Mc(4),o.Tb(),o.Tb()),2&t){const t=o.jc(3);o.Bb(4),o.Nc(t.customer.description)}}function B(t,e){if(1&t){const t=o.Vb();o.Ub(0,"button",16),o.fc("click",(function(){return o.Bc(t),o.jc(3).delete()})),o.Ub(1,"mat-icon"),o.Mc(2,"delete"),o.Tb(),o.Mc(3," Delete"),o.Tb()}}const q=function(){return["Admin","Manager"]};function M(t,e){if(1&t&&(o.Ub(0,"div"),o.Ub(1,"div",5),o.Ub(2,"div",6),o.Ub(3,"mat-card",7),o.Ub(4,"mat-card-content"),o.Ub(5,"table",8),o.Ub(6,"tbody"),o.Ub(7,"tr"),o.Ub(8,"th"),o.Mc(9,"ID"),o.Tb(),o.Ub(10,"td"),o.Mc(11),o.kc(12,"titlecase"),o.Tb(),o.Tb(),o.Ub(13,"tr"),o.Ub(14,"th"),o.Mc(15,"Created At"),o.Tb(),o.Ub(16,"td"),o.Mc(17),o.kc(18,"date"),o.Tb(),o.Tb(),o.Ub(19,"tr"),o.Ub(20,"th"),o.Mc(21,"Creator"),o.Tb(),o.Ub(22,"td"),o.Mc(23),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(24,"div",9),o.Ub(25,"mat-card",7),o.Ub(26,"mat-card-content"),o.Ub(27,"table",8),o.Ub(28,"tbody"),o.Ub(29,"tr"),o.Ub(30,"th"),o.Mc(31,"ID"),o.Tb(),o.Ub(32,"td"),o.Mc(33),o.Tb(),o.Tb(),o.Ub(34,"tr"),o.Ub(35,"th"),o.Mc(36,"Name"),o.Tb(),o.Ub(37,"td"),o.Mc(38),o.Tb(),o.Tb(),o.Ub(39,"tr"),o.Ub(40,"th"),o.Mc(41,"NIC Number"),o.Tb(),o.Ub(42,"td"),o.Mc(43),o.Tb(),o.Tb(),o.Kc(44,T,5,1,"tr",4),o.Ub(45,"tr"),o.Ub(46,"th"),o.Mc(47,"Contacts"),o.Tb(),o.Ub(48,"td"),o.Mc(49),o.Tb(),o.Tb(),o.Ub(50,"tr"),o.Ub(51,"th"),o.Mc(52,"Email Address"),o.Tb(),o.Ub(53,"td"),o.Mc(54),o.Tb(),o.Tb(),o.Ub(55,"tr"),o.Ub(56,"th"),o.Mc(57,"Address"),o.Tb(),o.Ub(58,"td"),o.Mc(59),o.Tb(),o.Tb(),o.Ub(60,"tr"),o.Ub(61,"th"),o.Mc(62,"Customer Type"),o.Tb(),o.Ub(63,"td"),o.Mc(64),o.Tb(),o.Tb(),o.Kc(65,U,5,1,"tr",4),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(66,"div",10),o.Kc(67,B,4,0,"button",11),o.Pb(68,"span",12),o.Ub(69,"button",13),o.Ub(70,"mat-icon"),o.Mc(71,"edit"),o.Tb(),o.Mc(72," Change"),o.Tb(),o.Ub(73,"button",14),o.Ub(74,"mat-icon"),o.Mc(75,"add"),o.Tb(),o.Mc(76," New Customer"),o.Tb(),o.Ub(77,"button",15),o.Ub(78,"mat-icon"),o.Mc(79,"list"),o.Tb(),o.Mc(80," All Customers"),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.jc(2);o.Bb(11),o.Nc(o.lc(12,15,t.customer.code)),o.Bb(6),o.Nc(o.mc(18,17,t.customer.tocreation,"medium")),o.Bb(6),o.Nc(null==t.customer?null:t.customer.creator.userName),o.Bb(10),o.Nc(t.customer.code),o.Bb(5),o.Nc(t.customer.name),o.Bb(5),o.Nc(t.customer.nic),o.Bb(1),o.qc("ngIf",t.customer.passport),o.Bb(5),o.Pc("",t.customer.contact1,"",t.customer.contact2?", "+t.customer.contact2:"",""),o.Bb(5),o.Nc(t.customer.email),o.Bb(5),o.Nc(t.customer.address),o.Bb(5),o.Nc(t.customer.customerType),o.Bb(1),o.qc("ngIf",t.customer.description),o.Bb(2),o.qc("appHasRole",o.tc(20,q)),o.Bb(2),o.sc("routerLink","/customers/edit/",t.customer.id,"")}}function v(t,e){if(1&t&&o.Kc(0,M,81,21,"div",4),2&t){const t=o.jc();o.qc("ngIf",t.customer)}}let I=(()=>{class t{constructor(t,e,n,r,c){this.customerService=t,this.route=e,this.dialog=n,this.snackBar=r,this.router=c,this.title="Customer Detail Page",this.breadcrumbSegments=["Customers","Show All Customers","Details"],this.loadingState=!1,this.route.data.subscribe(({customer:t})=>{this.customer=t,this.title+=" of "+t.code,this.breadcrumbSegments[2]="Details of "+t.code})}ngOnInit(){}delete(){this.dialog.open(i.a,{width:"300px",data:{message:this.customer.name}}).afterClosed().subscribe(t=>Object(a.b)(this,void 0,void 0,(function*(){t&&(this.loadingState=!0,this.customerService.delete(this.customer.id).subscribe(()=>{this.snackBar.open("customer Deleted successfully","\u2714",{duration:2e3}),this.router.navigateByUrl("/customers")},t=>{console.log(t),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(c.a),o.Ob(b.b),o.Ob(m.a),o.Ob(c.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-customer-detail"]],decls:4,vars:4,consts:[[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["customerdetail",""],[1,"spinner"],[4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"example-card"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/customers/add","mat-stroked-button",""],["routerLink","/customers","mat-raised-button","","color","primary",1,"mr-0"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Kc(1,g,2,0,"div",1),o.Kc(2,v,1,1,"ng-template",null,2,o.Lc)),2&t){const t=o.yc(3);o.qc("title",e.title)("breadcrumbSegments",e.breadcrumbSegments),o.Bb(1),o.qc("ngIf",e.loadingState)("ngIfElse",t)}},directives:[l.a,r.m,d.b,u.a,u.c,f.a,h.b,c.d,p.a],pipes:[r.v,r.e],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),t})();var F=n("3Pt+"),C=n("ohFZ"),K=n("kmnG"),y=n("d3UM"),x=n("FKr1"),N=n("qFsG");function w(t,e){if(1&t&&(o.Ub(0,"mat-option",29),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.qc("value",t.id),o.Bb(1),o.Nc(t.name)}}function L(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"customerType is required"),o.Tb())}function S(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,L,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.customertypeField.errors.required)}}function j(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Name is required"),o.Tb())}function O(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Name should has at lease ",t.nameField.errors.minlength.requiredLength," characters ")}}function P(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Name length should not exceed ",t.nameField.errors.maxlength.requiredLength," characters ")}}function k(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid Name"),o.Tb())}function D(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Name Already Exists."),o.Tb())}function E(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,j,2,0,"span",9),o.Kc(2,O,2,1,"span",9),o.Kc(3,P,2,1,"span",9),o.Kc(4,k,2,0,"span",9),o.Kc(5,D,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.nameField.errors.required),o.Bb(1),o.qc("ngIf",t.nameField.errors.minlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.pattern),o.Bb(1),o.qc("ngIf",t.nameField.errors.validate)}}function A(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"NIC Number is required"),o.Tb())}function R(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("NIC Number should has at lease ",t.nicField.errors.minlength.requiredLength," characters, ")}}function V(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("NIC Number length should not exceed ",t.nicField.errors.maxlength.requiredLength," characters, ")}}function z(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid NIC number"),o.Tb())}function $(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"NIC Already Exists."),o.Tb())}function G(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,A,2,0,"span",9),o.Kc(2,R,2,1,"span",9),o.Kc(3,V,2,1,"span",9),o.Kc(4,z,2,0,"span",9),o.Kc(5,$,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.nicField.errors.required),o.Bb(1),o.qc("ngIf",t.nicField.errors.minlength),o.Bb(1),o.qc("ngIf",t.nicField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.nicField.errors.pattern),o.Bb(1),o.qc("ngIf",t.nicField.errors.validate)}}function H(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("passport Number should has at lease ",t.passportField.errors.minlength.requiredLength," characters, ")}}function X(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid passport number"),o.Tb())}function Z(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Passport Already Exists."),o.Tb())}function J(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,H,2,1,"span",9),o.Kc(2,X,2,0,"span",9),o.Kc(3,Z,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.passportField.errors.minlength),o.Bb(1),o.qc("ngIf",t.passportField.errors.pattern),o.Bb(1),o.qc("ngIf",t.passportField.errors.validate)}}function Y(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Primary contact number is required"),o.Tb())}function _(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Contact Number should has at lease ",t.contact1Field.errors.minlength.requiredLength," characters, ")}}function W(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Contact Number length should not exceed ",t.contact1Field.errors.maxlength.requiredLength," characters, ")}}function Q(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid contact number"),o.Tb())}function tt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Contact Number Already Exists."),o.Tb())}function et(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Y,2,0,"span",9),o.Kc(2,_,2,1,"span",9),o.Kc(3,W,2,1,"span",9),o.Kc(4,Q,2,0,"span",9),o.Kc(5,tt,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.contact1Field.errors.required),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.minlength),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.maxlength),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.pattern),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.validate)}}function nt(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Contact number should has at lease ",t.contact2Field.errors.minlength.requiredLength," characters, ")}}function rt(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Contact nUmber length should not exceed ",t.contact2Field.errors.maxlength.requiredLength," characters, ")}}function ct(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid contact number"),o.Tb())}function at(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,nt,2,1,"span",9),o.Kc(2,rt,2,1,"span",9),o.Kc(3,ct,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.contact2Field.errors.minlength),o.Bb(1),o.qc("ngIf",t.contact2Field.errors.maxlength),o.Bb(1),o.qc("ngIf",t.contact2Field.errors.pattern)}}function it(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Email address should has at lease ",t.emailField.errors.minlength.requiredLength," characters, ")}}function ot(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Email address length should not exceed ",t.emailField.errors.maxlength.requiredLength," characters, ")}}function st(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid email address"),o.Tb())}function bt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Email address Already Exists."),o.Tb())}function mt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,it,2,1,"span",9),o.Kc(2,ot,2,1,"span",9),o.Kc(3,st,2,0,"span",9),o.Kc(4,bt,2,0,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.emailField.errors.minlength),o.Bb(1),o.qc("ngIf",t.emailField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.emailField.errors.email),o.Bb(1),o.qc("ngIf",t.emailField.errors.validate)}}function lt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Address is required"),o.Tb())}function dt(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Address should has at lease ",t.addressField.errors.minlength.requiredLength," characters ")}}function ut(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Address length should not exceed ",t.addressField.errors.maxlength.requiredLength," characters ")}}function ft(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,lt,2,0,"span",9),o.Kc(2,dt,2,1,"span",9),o.Kc(3,ut,2,1,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.addressField.errors.required),o.Bb(1),o.qc("ngIf",t.addressField.errors.minlength),o.Bb(1),o.qc("ngIf",t.addressField.errors.maxlength)}}function ht(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Description length should not exceed ",t.descriptionField.errors.maxlength.requiredLength," characters ")}}function pt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,ht,2,1,"span",9),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.descriptionField.errors.maxlength)}}let gt=(()=>{class t{constructor(t,e,n,r){this.customerService=t,this.snackBar=e,this.asyncValidation=n,this.router=r,this.title="Customer Form",this.breadcrumbSegments=["Customers","Add New Customer"],this.customerTypes=[{id:1,name:"Company"},{id:2,name:"Person"}],this.form=new F.h({name:new F.e("",[F.u.required,F.u.minLength(3),F.u.maxLength(255),F.u.pattern("[a-zA-Z-,]+(s{0,1}[a-zA-Z-, ])*$")],[this.asyncValidation.validateCustomerName]),nic:new F.e("",[F.u.required,F.u.minLength(10),F.u.maxLength(12),F.u.pattern("^(([0-9]{12})|([0-9]{9}[vVxX]))$")],[this.asyncValidation.validateCustomerNic]),contact1:new F.e("",[F.u.required,F.u.minLength(9),F.u.maxLength(10),F.u.pattern("^([0]?[0-9]{9})$")],[this.asyncValidation.validateCustomerMobile]),contact2:new F.e("",[F.u.minLength(9),F.u.maxLength(10),F.u.pattern("^([0]?[0-9]{9})$")]),email:new F.e("",[F.u.minLength(4),F.u.maxLength(255),F.u.email],[this.asyncValidation.validateCustomerEmail]),address:new F.e("",[F.u.required,F.u.minLength(4),F.u.maxLength(65535)]),description:new F.e("",[F.u.maxLength(65535)]),customertype:new F.e("",[F.u.required]),passport:new F.e("",[F.u.minLength(10)],[this.asyncValidation.validateCustomerPassport])})}get nameField(){return this.form.controls.name}get customertypeField(){return this.form.controls.customertype}get nicField(){return this.form.controls.nic}get passportField(){return this.form.controls.nic}get contact1Field(){return this.form.controls.contact1}get contact2Field(){return this.form.controls.contact2}get emailField(){return this.form.controls.email}get addressField(){return this.form.controls.address}get descriptionField(){return this.form.controls.description}ngOnInit(){}submit(){this.form.invalid||(this.customer=this.form.value,this.customer.code="CU"+Math.round(1e5*Math.random()),this.customerService.add(this.customer).subscribe(t=>{this.snackBar.open("customer created successfully",null,{duration:2e3}),this.router.navigateByUrl("/customers/"+t.id)},t=>{switch(t.status){case 401:this.snackBar.open("Authentication Failed. You have to login again",null,{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(t.error.message,"Error",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error",{duration:2e3})}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(m.a),o.Ob(C.a),o.Ob(c.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-customer-form"]],decls:99,vars:14,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","customertype"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","formControlName","nic","required",""],[1,"col-sm-7"],["matInput","","formControlName","passport"],[1,"col-md-4"],["matInput","","formControlName","contact1","required",""],["matInput","","formControlName","contact2"],["matInput","","formControlName","email"],["matInput","","formControlName","address","required",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/customers","mat-stroked-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(t,e){1&t&&(o.Pb(0,"app-page-header",0),o.Ub(1,"form",1),o.fc("ngSubmit",(function(){return e.submit()})),o.Ub(2,"mat-card"),o.Ub(3,"mat-card-content"),o.Ub(4,"div",2),o.Ub(5,"div",3),o.Ub(6,"div",4),o.Ub(7,"mat-form-field",5),o.Ub(8,"mat-label"),o.Mc(9,"Customer Type"),o.Tb(),o.Ub(10,"mat-select",6),o.Ub(11,"mat-option",7),o.Mc(12,"Select the Type"),o.Tb(),o.Kc(13,w,2,2,"mat-option",8),o.Tb(),o.Kc(14,S,2,1,"mat-error",9),o.Tb(),o.Tb(),o.Ub(15,"div",10),o.Ub(16,"mat-form-field",5),o.Ub(17,"mat-label"),o.Mc(18,"Name"),o.Tb(),o.Pb(19,"input",11),o.Ub(20,"mat-hint"),o.Mc(21,"Ex: Json Smith"),o.Tb(),o.Kc(22,E,6,5,"mat-error",9),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(23,"div",2),o.Ub(24,"div",3),o.Ub(25,"div",12),o.Ub(26,"mat-form-field",5),o.Ub(27,"mat-label"),o.Mc(28,"NIC Number"),o.Tb(),o.Pb(29,"input",13),o.Ub(30,"mat-hint"),o.Mc(31,"Ex: 789456123V or 197894506123"),o.Tb(),o.Kc(32,G,6,5,"mat-error",9),o.Tb(),o.Tb(),o.Ub(33,"div",14),o.Ub(34,"mat-form-field",5),o.Ub(35,"mat-label"),o.Mc(36,"Passport Number"),o.Tb(),o.Pb(37,"input",15),o.Ub(38,"mat-hint"),o.Mc(39,"Ex: 197894506123"),o.Tb(),o.Kc(40,J,4,3,"mat-error",9),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(41,"div",2),o.Ub(42,"div",3),o.Ub(43,"div",16),o.Ub(44,"mat-form-field",5),o.Ub(45,"mat-label"),o.Mc(46,"Primary Contact"),o.Tb(),o.Pb(47,"input",17),o.Ub(48,"mat-hint"),o.Mc(49,"Ex: 0778941234 or 0112789456"),o.Tb(),o.Kc(50,et,6,5,"mat-error",9),o.Tb(),o.Tb(),o.Ub(51,"div",16),o.Ub(52,"mat-form-field",5),o.Ub(53,"mat-label"),o.Mc(54,"Secondary Contact"),o.Tb(),o.Pb(55,"input",18),o.Ub(56,"mat-hint"),o.Mc(57,"Ex: 0778941234 or 0112789456"),o.Tb(),o.Kc(58,at,4,3,"mat-error",9),o.Tb(),o.Tb(),o.Ub(59,"div",16),o.Ub(60,"mat-form-field",5),o.Ub(61,"mat-label"),o.Mc(62,"Email Address"),o.Tb(),o.Pb(63,"input",19),o.Ub(64,"mat-hint"),o.Mc(65,"Ex: user@sample.com"),o.Tb(),o.Kc(66,mt,5,4,"mat-error",9),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(67,"div",2),o.Ub(68,"mat-form-field",5),o.Ub(69,"mat-label"),o.Mc(70,"Address"),o.Tb(),o.Pb(71,"textarea",20),o.Ub(72,"mat-hint"),o.Mc(73,"Ex: 123, Gampaha Road, Colombo"),o.Tb(),o.Kc(74,ft,4,3,"mat-error",9),o.Tb(),o.Tb(),o.Ub(75,"div",2),o.Ub(76,"mat-form-field",5),o.Ub(77,"mat-label"),o.Mc(78,"Description"),o.Tb(),o.Pb(79,"textarea",21),o.Kc(80,pt,2,1,"mat-error",9),o.Tb(),o.Tb(),o.Ub(81,"div",22),o.Ub(82,"button",23),o.Ub(83,"mat-icon"),o.Mc(84,"list"),o.Tb(),o.Mc(85," All Customers"),o.Tb(),o.Pb(86,"span",24),o.Ub(87,"button",25),o.Ub(88,"mat-icon"),o.Mc(89,"refresh"),o.Tb(),o.Mc(90," Clear"),o.Tb(),o.Ub(91,"button",26),o.Ub(92,"mat-icon"),o.Mc(93,"save"),o.Tb(),o.Mc(94," Save"),o.Tb(),o.Tb(),o.Tb(),o.Ub(95,"mat-card-actions",27),o.Ub(96,"span",28),o.Mc(97,"*"),o.Tb(),o.Mc(98," Required Fields "),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.qc("title",e.title)("breadcrumbSegments",e.breadcrumbSegments),o.Bb(1),o.qc("formGroup",e.form),o.Bb(10),o.qc("value",null),o.Bb(2),o.qc("ngForOf",e.customerTypes),o.Bb(1),o.qc("ngIf",e.customertypeField.invalid),o.Bb(8),o.qc("ngIf",e.nameField.invalid),o.Bb(10),o.qc("ngIf",e.nicField.invalid),o.Bb(8),o.qc("ngIf",e.passportField.invalid),o.Bb(10),o.qc("ngIf",e.contact1Field.invalid),o.Bb(8),o.qc("ngIf",e.contact2Field.invalid),o.Bb(8),o.qc("ngIf",e.emailField.invalid),o.Bb(8),o.qc("ngIf",e.addressField.invalid),o.Bb(6),o.qc("ngIf",e.descriptionField.invalid))},directives:[l.a,F.w,F.o,F.i,u.a,u.c,K.c,K.g,y.a,F.t,F.n,F.g,x.n,r.l,r.m,N.b,F.c,K.f,h.b,c.d,p.a,u.b,K.b],styles:[""]}),t})();var Tt=n("M9IT"),Ut=n("+0xr"),Bt=n("rO2v");function qt(t,e){1&t&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Ub(2,"h1",4),o.Mc(3,"Loading..."),o.Tb(),o.Tb())}function Mt(t,e){1&t&&(o.Ub(0,"th",33),o.Mc(1," ID "),o.Tb())}function vt(t,e){if(1&t&&(o.Ub(0,"td",34),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.code," ")}}function It(t,e){1&t&&(o.Ub(0,"th",33),o.Mc(1," Name "),o.Tb())}function Ft(t,e){if(1&t&&(o.Ub(0,"td",34),o.Mc(1),o.kc(2,"titlecase"),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",o.lc(2,1,t.name)," ")}}function Ct(t,e){1&t&&(o.Ub(0,"th",33),o.Mc(1," NIC Number "),o.Tb())}function Kt(t,e){if(1&t&&(o.Ub(0,"td",34),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.nic," ")}}function yt(t,e){1&t&&(o.Ub(0,"th",33),o.Mc(1," Contacts "),o.Tb())}function xt(t,e){if(1&t&&(o.Ub(0,"td",34),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Pc(" ",t.contact1,"",t.contact2?", "+t.contact2:""," ")}}function Nt(t,e){1&t&&o.Pb(0,"th",35)}function wt(t,e){if(1&t&&(o.Ub(0,"td",36),o.Ub(1,"button",37),o.Ub(2,"mat-icon"),o.Mc(3,"visibility"),o.Tb(),o.Mc(4," More ..."),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.sc("routerLink","/customers/",t.id,"")}}function Lt(t,e){1&t&&o.Pb(0,"th",35)}function St(t,e){if(1&t){const t=o.Vb();o.Ub(0,"button",39),o.fc("click",(function(){o.Bc(t);const e=o.jc().$implicit;return o.jc(4).delete(e)})),o.Ub(1,"mat-icon"),o.Mc(2,"delete"),o.Tb(),o.Mc(3," Delete"),o.Tb()}}const jt=function(){return["Admin","Manager"]};function Ot(t,e){1&t&&(o.Ub(0,"td",36),o.Kc(1,St,4,0,"button",38),o.Tb()),2&t&&(o.Bb(1),o.qc("appHasRole",o.tc(1,jt)))}function Pt(t,e){1&t&&o.Pb(0,"th",35)}function kt(t,e){if(1&t&&(o.Ub(0,"td",36),o.Ub(1,"button",40),o.Ub(2,"mat-icon"),o.Mc(3,"edit"),o.Tb(),o.Mc(4," Change"),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.sc("routerLink","/customers/edit/",t.id,"")}}function Dt(t,e){1&t&&o.Pb(0,"tr",41)}function Et(t,e){1&t&&o.Pb(0,"tr",42)}function At(t,e){if(1&t&&(o.Ub(0,"div",18),o.Ub(1,"table",19),o.Sb(2,20),o.Kc(3,Mt,2,0,"th",21),o.Kc(4,vt,2,1,"td",22),o.Rb(),o.Sb(5,23),o.Kc(6,It,2,0,"th",21),o.Kc(7,Ft,3,3,"td",22),o.Rb(),o.Sb(8,24),o.Kc(9,Ct,2,0,"th",21),o.Kc(10,Kt,2,1,"td",22),o.Rb(),o.Sb(11,25),o.Kc(12,yt,2,0,"th",21),o.Kc(13,xt,2,2,"td",22),o.Rb(),o.Sb(14,26),o.Kc(15,Nt,1,0,"th",27),o.Kc(16,wt,5,1,"td",28),o.Rb(),o.Sb(17,29),o.Kc(18,Lt,1,0,"th",27),o.Kc(19,Ot,2,2,"td",28),o.Rb(),o.Sb(20,30),o.Kc(21,Pt,1,0,"th",27),o.Kc(22,kt,5,1,"td",28),o.Rb(),o.Kc(23,Dt,1,0,"tr",31),o.Kc(24,Et,1,0,"tr",32),o.Tb(),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.qc("dataSource",t.customerDataPage),o.Bb(22),o.qc("matHeaderRowDef",t.displayedColumns),o.Bb(1),o.qc("matRowDefColumns",t.displayedColumns)}}function Rt(t,e){1&t&&o.Pb(0,"app-empty-data-table",43)}const Vt=function(){return[5,10,25,50,100]};function zt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div",6),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-content"),o.Ub(3,"div",7),o.Ub(4,"button",8),o.Ub(5,"mat-icon"),o.Mc(6,"add"),o.Tb(),o.Mc(7," New Customer "),o.Tb(),o.Tb(),o.Ub(8,"div",9),o.Ub(9,"div",10),o.Ub(10,"div",11),o.Ub(11,"mat-form-field",12),o.Ub(12,"mat-label"),o.Mc(13,"Filter by ID"),o.Tb(),o.Ub(14,"input",13),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(15,"div",11),o.Ub(16,"mat-form-field",12),o.Ub(17,"mat-label"),o.Mc(18,"Filter by Name"),o.Tb(),o.Ub(19,"input",13),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(20,"div",11),o.Ub(21,"mat-form-field",12),o.Ub(22,"mat-label"),o.Mc(23,"Filter by NIC number"),o.Tb(),o.Ub(24,"input",13),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(25,"div",11),o.Ub(26,"mat-form-field",12),o.Ub(27,"mat-label"),o.Mc(28,"Filter by Contact"),o.Tb(),o.Ub(29,"input",13),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Kc(30,At,25,3,"div",14),o.Kc(31,Rt,1,0,"app-empty-data-table",15),o.Ub(32,"div",16),o.Ub(33,"mat-paginator",17),o.fc("page",(function(e){return o.Bc(t),o.jc(2).paginate(e)})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=o.jc(2);o.Bb(14),o.qc("formControl",t.codeField),o.Bb(5),o.qc("formControl",t.nameField),o.Bb(5),o.qc("formControl",t.nicField),o.Bb(5),o.qc("formControl",t.contactField),o.Bb(1),o.qc("ngIf",t.customerDataPage.length>0),o.Bb(1),o.qc("ngIf",0===t.customerDataPage.length),o.Bb(2),o.qc("length",t.pagination.totalItems)("pageSize",t.pagination.itemsPerPage)("pageSizeOptions",o.tc(10,Vt))("showFirstLastButtons",!0)}}function $t(t,e){if(1&t&&o.Kc(0,zt,34,11,"div",5),2&t){const t=o.jc();o.qc("ngIf",void 0!==t.customerDataPage)}}const Gt=function(){return["Customers","Show All Customers"]};let Ht=(()=>{class t{constructor(t,e,n){this.customerService=t,this.snackBar=e,this.dialog=n,this.userParams={},this.displayedColumns=["code","name","nic","contacts","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.codeField=new F.e,this.nameField=new F.e,this.nicField=new F.e,this.contactField=new F.e}ngOnInit(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.code=this.codeField.value,this.userParams.nic=this.nicField.value,this.userParams.mobile=this.contactField.value,this.customerService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(t=>{this.loadingState=!1,this.customerDataPage=t.result,this.pagination=t.pagination},t=>{console.log(t),this.snackBar.open("error loading data ","Error",{duration:3e3})})}refreshData(){this.loadData()}paginate(t){this.pagination.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.pageIndex=t.pageIndex+1,this.loadData()}ngOnDestroy(){this.live=!1}delete(t){this.dialog.open(i.a,{width:"500px",data:{message:t.name}}).afterClosed().subscribe(e=>{e&&(this.loadingState=!0,this.customerService.delete(t.id).subscribe(()=>{this.snackBar.open("customer Deleted successfully","\u2714",{duration:2e3}),this.loadData()},t=>{console.log(t),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(m.a),o.Ob(b.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-customer-table"]],decls:4,vars:4,consts:[["title","Customers",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["customerlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],[1,"mb-2"],["routerLink","/customers/add","mat-raised-button","","color","primary",1,"mx-0"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],["class","table-responsive table-striped",4,"ngIf"],["message","No customers to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","nic"],["matColumnDef","contacts"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No customers to show"]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Kc(1,qt,4,0,"div",1),o.Kc(2,$t,1,1,"ng-template",null,2,o.Lc)),2&t){const t=o.yc(3);o.qc("breadcrumbSegments",o.tc(3,Gt)),o.Bb(1),o.qc("ngIf",e.loadingState)("ngIfElse",t)}},directives:[l.a,r.m,d.b,u.a,u.c,h.b,c.d,p.a,K.c,K.g,N.b,F.c,F.n,F.f,Tt.a,Ut.j,Ut.c,Ut.e,Ut.b,Ut.g,Ut.i,Ut.d,Ut.a,f.a,Ut.f,Ut.h,Bt.a],pipes:[r.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),t})();function Xt(t,e){if(1&t&&(o.Ub(0,"mat-option",30),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.qc("value",t.name),o.Bb(1),o.Nc(t.name)}}function Zt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"customerType is required"),o.Tb())}function Jt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Zt,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.customertypeField.errors.required)}}function Yt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Name is required"),o.Tb())}function _t(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Name should has at lease ",t.nameField.errors.minlength.requiredLength," characters ")}}function Wt(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Name length should not exceed ",t.nameField.errors.maxlength.requiredLength," characters ")}}function Qt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid Name"),o.Tb())}function te(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Yt,2,0,"span",10),o.Kc(2,_t,2,1,"span",10),o.Kc(3,Wt,2,1,"span",10),o.Kc(4,Qt,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.nameField.errors.required),o.Bb(1),o.qc("ngIf",t.nameField.errors.minlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.pattern)}}function ee(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"NIC Number is required"),o.Tb())}function ne(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("NIC Number should has at lease ",t.nicField.errors.minlength.requiredLength," characters, ")}}function re(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("NIC NUmber length should not exceed ",t.nicField.errors.maxlength.requiredLength," characters, ")}}function ce(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid NIC number"),o.Tb())}function ae(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,ee,2,0,"span",10),o.Kc(2,ne,2,1,"span",10),o.Kc(3,re,2,1,"span",10),o.Kc(4,ce,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.nicField.errors.required),o.Bb(1),o.qc("ngIf",t.nicField.errors.minlength),o.Bb(1),o.qc("ngIf",t.nicField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.nicField.errors.pattern)}}function ie(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("passport Number should has at lease ",t.passportField.errors.minlength.requiredLength," characters, ")}}function oe(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid passport number"),o.Tb())}function se(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,ie,2,1,"span",10),o.Kc(2,oe,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.passportField.errors.minlength),o.Bb(1),o.qc("ngIf",t.passportField.errors.pattern)}}function be(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Primary contact number is required"),o.Tb())}function me(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Contact number should has at lease ",t.contact1Field.errors.minlength.requiredLength," characters, ")}}function le(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Contact nUmber length should not exceed ",t.contact1Field.errors.maxlength.requiredLength," characters, ")}}function de(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid contact number"),o.Tb())}function ue(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,be,2,0,"span",10),o.Kc(2,me,2,1,"span",10),o.Kc(3,le,2,1,"span",10),o.Kc(4,de,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.contact1Field.errors.required),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.minlength),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.maxlength),o.Bb(1),o.qc("ngIf",t.contact1Field.errors.pattern)}}function fe(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Contact number should has at lease ",t.contact2Field.errors.minlength.requiredLength," characters, ")}}function he(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Contact nUmber length should not exceed ",t.contact2Field.errors.maxlength.requiredLength," characters, ")}}function pe(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid contact number"),o.Tb())}function ge(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,fe,2,1,"span",10),o.Kc(2,he,2,1,"span",10),o.Kc(3,pe,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.contact2Field.errors.minlength),o.Bb(1),o.qc("ngIf",t.contact2Field.errors.maxlength),o.Bb(1),o.qc("ngIf",t.contact2Field.errors.pattern)}}function Te(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Email address should has at lease ",t.emailField.errors.minlength.requiredLength," characters, ")}}function Ue(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Email address length should not exceed ",t.emailField.errors.maxlength.requiredLength," characters, ")}}function Be(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Invalid email address"),o.Tb())}function qe(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Te,2,1,"span",10),o.Kc(2,Ue,2,1,"span",10),o.Kc(3,Be,2,0,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.emailField.errors.minlength),o.Bb(1),o.qc("ngIf",t.emailField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.emailField.errors.email)}}function Me(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Address is required"),o.Tb())}function ve(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Address should has at lease ",t.addressField.errors.minlength.requiredLength," characters ")}}function Ie(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Address length should not exceed ",t.addressField.errors.maxlength.requiredLength," characters ")}}function Fe(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Me,2,0,"span",10),o.Kc(2,ve,2,1,"span",10),o.Kc(3,Ie,2,1,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.addressField.errors.required),o.Bb(1),o.qc("ngIf",t.addressField.errors.minlength),o.Bb(1),o.qc("ngIf",t.addressField.errors.maxlength)}}function Ce(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.Oc("Description length should not exceed ",t.descriptionField.errors.maxlength.requiredLength," characters ")}}function Ke(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Ce,2,1,"span",10),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.qc("ngIf",t.descriptionField.errors.maxlength)}}function ye(t,e){if(1&t){const t=o.Vb();o.Ub(0,"form",2),o.fc("ngSubmit",(function(){return o.Bc(t),o.jc().submit()})),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-content"),o.Ub(3,"div",3),o.Ub(4,"div",4),o.Ub(5,"div",5),o.Ub(6,"mat-form-field",6),o.Ub(7,"mat-label"),o.Mc(8,"Customer Type"),o.Tb(),o.Ub(9,"mat-select",7),o.Ub(10,"mat-option",8),o.Mc(11,"Select the Type"),o.Tb(),o.Kc(12,Xt,2,2,"mat-option",9),o.Tb(),o.Kc(13,Jt,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Ub(14,"div",11),o.Ub(15,"mat-form-field",6),o.Ub(16,"mat-label"),o.Mc(17,"Name"),o.Tb(),o.Pb(18,"input",12),o.Ub(19,"mat-hint"),o.Mc(20,"Ex: Json Smith"),o.Tb(),o.Kc(21,te,5,4,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(22,"div",3),o.Ub(23,"div",4),o.Ub(24,"div",13),o.Ub(25,"mat-form-field",6),o.Ub(26,"mat-label"),o.Mc(27,"NIC Number"),o.Tb(),o.Pb(28,"input",14),o.Ub(29,"mat-hint"),o.Mc(30,"Ex: 789456123V or 197894506123"),o.Tb(),o.Kc(31,ae,5,4,"mat-error",10),o.Tb(),o.Tb(),o.Ub(32,"div",15),o.Ub(33,"mat-form-field",6),o.Ub(34,"mat-label"),o.Mc(35,"Passport Number"),o.Tb(),o.Pb(36,"input",16),o.Ub(37,"mat-hint"),o.Mc(38,"Ex: 197894506123"),o.Tb(),o.Kc(39,se,3,2,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(40,"div",3),o.Ub(41,"div",4),o.Ub(42,"div",17),o.Ub(43,"mat-form-field",6),o.Ub(44,"mat-label"),o.Mc(45,"Primary Contact"),o.Tb(),o.Pb(46,"input",18),o.Ub(47,"mat-hint"),o.Mc(48,"Ex: 0778941234 or 0112789456"),o.Tb(),o.Kc(49,ue,5,4,"mat-error",10),o.Tb(),o.Tb(),o.Ub(50,"div",17),o.Ub(51,"mat-form-field",6),o.Ub(52,"mat-label"),o.Mc(53,"Secondary Contact"),o.Tb(),o.Pb(54,"input",19),o.Ub(55,"mat-hint"),o.Mc(56,"Ex: 0778941234 or 0112789456"),o.Tb(),o.Kc(57,ge,4,3,"mat-error",10),o.Tb(),o.Tb(),o.Ub(58,"div",17),o.Ub(59,"mat-form-field",6),o.Ub(60,"mat-label"),o.Mc(61,"Email Address"),o.Tb(),o.Pb(62,"input",20),o.Ub(63,"mat-hint"),o.Mc(64,"Ex: user@sample.com"),o.Tb(),o.Kc(65,qe,4,3,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(66,"div",3),o.Ub(67,"mat-form-field",6),o.Ub(68,"mat-label"),o.Mc(69,"Address"),o.Tb(),o.Pb(70,"textarea",21),o.Ub(71,"mat-hint"),o.Mc(72,"Ex: 123, Gampaha Road, Colombo"),o.Tb(),o.Kc(73,Fe,4,3,"mat-error",10),o.Tb(),o.Tb(),o.Ub(74,"div",3),o.Ub(75,"mat-form-field",6),o.Ub(76,"mat-label"),o.Mc(77,"Description"),o.Tb(),o.Pb(78,"textarea",22),o.Kc(79,Ke,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Ub(80,"div",23),o.Ub(81,"button",24),o.Ub(82,"mat-icon"),o.Mc(83,"list"),o.Tb(),o.Mc(84," All Customers"),o.Tb(),o.Pb(85,"span",25),o.Ub(86,"button",26),o.fc("click",(function(){return o.Bc(t),o.jc().reset()})),o.Ub(87,"mat-icon"),o.Mc(88,"refresh"),o.Tb(),o.Mc(89," Reset"),o.Tb(),o.Ub(90,"button",27),o.Ub(91,"mat-icon"),o.Mc(92,"save"),o.Tb(),o.Mc(93," Save Changes"),o.Tb(),o.Tb(),o.Tb(),o.Ub(94,"mat-card-actions",28),o.Ub(95,"span",29),o.Mc(96,"*"),o.Tb(),o.Mc(97," Required Fields "),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=o.jc();o.qc("formGroup",t.form),o.Bb(10),o.qc("value",null),o.Bb(2),o.qc("ngForOf",t.customerTypes),o.Bb(1),o.qc("ngIf",t.customertypeField.invalid),o.Bb(8),o.qc("ngIf",t.nameField.invalid),o.Bb(10),o.qc("ngIf",t.nicField.invalid),o.Bb(8),o.qc("ngIf",t.passportField.invalid),o.Bb(10),o.qc("ngIf",t.contact1Field.invalid),o.Bb(8),o.qc("ngIf",t.contact2Field.invalid),o.Bb(8),o.qc("ngIf",t.emailField.invalid),o.Bb(8),o.qc("ngIf",t.addressField.invalid),o.Bb(6),o.qc("ngIf",t.descriptionField.invalid)}}let xe=(()=>{class t{constructor(t,e,n,r){this.route=t,this.customerService=e,this.snackBar=n,this.router=r,this.title="Customer Change Form",this.breadcrumbSegments=["Customers","Show All Customers","Change"],this.customerTypes=[{id:1,name:"Company"},{id:2,name:"Person"}],this.route.data.subscribe(({customer:t})=>{this.customer=t,this.id=t.id,this.title+=" of "+t.code,this.breadcrumbSegments[2]="Change Details of "+t.code,this.initializeForm()})}get nameField(){return this.form.controls.name}get nicField(){return this.form.controls.nic}get contact1Field(){return this.form.controls.contact1}get contact2Field(){return this.form.controls.contact2}get emailField(){return this.form.controls.email}get addressField(){return this.form.controls.address}get descriptionField(){return this.form.controls.description}get customertypeField(){return this.form.controls.customertype}get passportField(){return this.form.controls.nic}ngOnInit(){}reset(){this.form.reset(this.customer)}initializeForm(){this.form=new F.h({name:new F.e(this.customer.name,[F.u.required,F.u.minLength(3),F.u.maxLength(255),F.u.pattern("[a-zA-Z-,]+(s{0,1}[a-zA-Z-, ])*$")]),nic:new F.e(this.customer.nic,[F.u.required,F.u.minLength(10),F.u.maxLength(12),F.u.pattern("^(([0-9]{12})|([0-9]{9}[vVxX]))$")]),contact1:new F.e(this.customer.contact1,[F.u.required,F.u.minLength(9),F.u.maxLength(10),F.u.pattern("^([0]?[0-9]{9})$")]),contact2:new F.e(this.customer.contact2,[F.u.minLength(9),F.u.maxLength(10),F.u.pattern("^([0]?[0-9]{9})$")]),email:new F.e(this.customer.email,[F.u.minLength(4),F.u.maxLength(255),F.u.email]),address:new F.e(this.customer.address,[F.u.required,F.u.minLength(4),F.u.maxLength(65535)]),description:new F.e(this.customer.description,[F.u.maxLength(65535)]),customertype:new F.e(this.customer.customerType,[F.u.required]),passport:new F.e(this.customer.passport,[F.u.minLength(10)])})}submit(){this.form.invalid||(this.customer=this.form.value,this.customer.code="CU"+Math.round(1e5*Math.random()),this.customerService.update(this.id,this.customer).subscribe(()=>{this.snackBar.open("customer successfully Updated","\u2714",{duration:2e3}),this.router.navigateByUrl("/customers/"+this.id)},t=>{switch(t.status){case 401:this.snackBar.open("Authentication Failed. You have to login again","Error",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(t.error.message,"Error",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error",{duration:2e3})}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(c.a),o.Ob(s.a),o.Ob(m.a),o.Ob(c.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-customer-update-form"]],decls:2,vars:3,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","customertype"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","formControlName","nic","required",""],[1,"col-sm-7"],["matInput","","formControlName","passport"],[1,"col-md-4"],["matInput","","formControlName","contact1","required",""],["matInput","","formControlName","contact2"],["matInput","","formControlName","email"],["matInput","","formControlName","address","required",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/customers","mat-stroked-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(t,e){1&t&&(o.Pb(0,"app-page-header",0),o.Kc(1,ye,98,12,"form",1)),2&t&&(o.qc("title",e.title)("breadcrumbSegments",e.breadcrumbSegments),o.Bb(1),o.qc("ngIf",e.customer))},directives:[l.a,r.m,F.w,F.o,F.i,u.a,u.c,K.c,K.g,y.a,F.t,F.n,F.g,x.n,r.l,N.b,F.c,K.f,h.b,c.d,p.a,u.b,K.b],styles:[""]}),t})();var Ne=n("EY2u"),we=n("JIr8");let Le=(()=>{class t{constructor(t,e){this.customerService=t,this.route=e}resolve(t){return this.customerService.get(t.params.id).pipe(Object(we.a)(()=>(this.route.navigateByUrl("/customers"),Ne.a)))}}return t.\u0275fac=function(e){return new(e||t)(o.cc(s.a),o.cc(c.c))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Se=[{path:"",component:Ht},{path:"add",component:gt},{path:":id",component:I,resolve:{customer:Le}},{path:"edit/:id",component:xe,resolve:{customer:Le}}];let je=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[c.g.forChild(Se)],c.g]}),t})();var Oe=n("hctd"),Pe=n("FpXt");let ke=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[r.c,je,Oe.a,F.s,Pe.a]]}),t})()}}]);