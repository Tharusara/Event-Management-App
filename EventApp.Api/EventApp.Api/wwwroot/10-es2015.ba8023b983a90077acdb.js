(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{fILq:function(t,e,i){"use strict";i.r(e),i.d(e,"ItemsModule",(function(){return De}));var a=i("ofXK"),n=i("tyNb"),c=i("mrSG"),r=i("zHse"),o=i("fXoL"),s=i("mmMe"),b=i("0IaG"),l=i("dNgK"),m=i("5VPf"),d=i("Xa2L"),u=i("Wp6s"),p=i("bTqV"),h=i("NFeN"),f=i("yX84");function g(t,e){1&t&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Tb())}function U(t,e){if(1&t&&(o.Ub(0,"tr"),o.Ub(1,"th"),o.Mc(2,"Description"),o.Tb(),o.Ub(3,"td"),o.Mc(4),o.Tb(),o.Tb()),2&t){const t=o.jc(3);o.Bb(4),o.Nc(t.item.description)}}function T(t,e){if(1&t&&(o.Ub(0,"tr"),o.Ub(1,"th"),o.Mc(2,"Included Packages"),o.Tb(),o.Ub(3,"td"),o.Mc(4),o.Tb(),o.Tb()),2&t){const t=o.jc(3);o.Bb(4),o.Nc(t.item.packageItems)}}function v(t,e){if(1&t){const t=o.Vb();o.Ub(0,"button",18),o.fc("click",(function(){return o.Bc(t),o.jc(3).delete()})),o.Ub(1,"mat-icon"),o.Mc(2,"delete"),o.Tb(),o.Mc(3," Delete"),o.Tb()}}const k=function(){return["Admin","Manager"]};function B(t,e){if(1&t&&(o.Ub(0,"div"),o.Ub(1,"div",5),o.Ub(2,"div",6),o.Ub(3,"mat-card",7),o.Ub(4,"mat-card-content"),o.Ub(5,"mat-card",7),o.Pb(6,"img",8),o.Tb(),o.Ub(7,"table",9),o.Ub(8,"tbody"),o.Ub(9,"tr"),o.Ub(10,"th"),o.Mc(11,"ID"),o.Tb(),o.Ub(12,"td"),o.Mc(13),o.kc(14,"titlecase"),o.Tb(),o.Tb(),o.Ub(15,"tr"),o.Ub(16,"th"),o.Mc(17,"Created At"),o.Tb(),o.Ub(18,"td"),o.Mc(19),o.kc(20,"date"),o.Tb(),o.Tb(),o.Ub(21,"tr"),o.Ub(22,"th"),o.Mc(23,"Creator"),o.Tb(),o.Ub(24,"td"),o.Mc(25),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(26,"div",10),o.Ub(27,"mat-card",7),o.Ub(28,"mat-card-content"),o.Ub(29,"table",9),o.Ub(30,"tbody"),o.Ub(31,"tr"),o.Ub(32,"th"),o.Mc(33,"ID"),o.Tb(),o.Ub(34,"td"),o.Mc(35),o.Tb(),o.Tb(),o.Ub(36,"tr"),o.Ub(37,"th"),o.Mc(38,"Name"),o.Tb(),o.Ub(39,"td"),o.Mc(40),o.Tb(),o.Tb(),o.Ub(41,"tr"),o.Ub(42,"th"),o.Mc(43,"Item Date"),o.Tb(),o.Ub(44,"td"),o.Mc(45),o.Tb(),o.Tb(),o.Kc(46,U,5,1,"tr",4),o.Ub(47,"tr"),o.Ub(48,"th"),o.Mc(49,"Unit Price"),o.Tb(),o.Ub(50,"td"),o.Mc(51),o.Tb(),o.Tb(),o.Ub(52,"tr"),o.Ub(53,"th"),o.Mc(54,"Item Status"),o.Tb(),o.Ub(55,"td"),o.Mc(56),o.Tb(),o.Tb(),o.Kc(57,T,5,1,"tr",4),o.Tb(),o.Tb(),o.Tb(),o.Ub(58,"button",11),o.Ub(59,"mat-icon"),o.Mc(60,"add"),o.Tb(),o.Mc(61,"Add packages"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(62,"div",12),o.Kc(63,v,4,0,"button",13),o.Pb(64,"span",14),o.Ub(65,"button",15),o.Ub(66,"mat-icon"),o.Mc(67,"edit"),o.Tb(),o.Mc(68," Change"),o.Tb(),o.Ub(69,"button",16),o.Ub(70,"mat-icon"),o.Mc(71,"add"),o.Tb(),o.Mc(72," New item"),o.Tb(),o.Ub(73,"button",17),o.Ub(74,"mat-icon"),o.Mc(75,"list"),o.Tb(),o.Mc(76," All Items"),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.jc(2);o.Bb(6),o.rc("src",null==t.item||null==t.item.photos[0]?null:t.item.photos[0].filename,o.Dc),o.Bb(7),o.Nc(o.lc(14,13,t.item.code)),o.Bb(6),o.Nc(o.mc(20,15,t.item.toCreation,"medium")),o.Bb(6),o.Nc(null==t.item?null:t.item.creator.userName),o.Bb(10),o.Nc(t.item.code),o.Bb(5),o.Nc(t.item.name),o.Bb(5),o.Nc(t.item.toCreation),o.Bb(1),o.qc("ngIf",t.item.description),o.Bb(5),o.Nc(t.item.unitPrice),o.Bb(5),o.Nc(t.item.itemStatus),o.Bb(1),o.qc("ngIf",t.item.packageItems),o.Bb(6),o.qc("appHasRole",o.tc(18,k)),o.Bb(2),o.sc("routerLink","/items/edit/",t.item.id,"")}}function M(t,e){if(1&t&&o.Kc(0,B,77,19,"div",4),2&t){const t=o.jc();o.qc("ngIf",t.item)}}const I=function(t){return["Items","Show All Items",t]};let S=(()=>{class t{constructor(t,e,i,a,n){this.itemService=t,this.route=e,this.dialog=i,this.snackBar=a,this.router=n,this.loadingState=!1,this.route.data.subscribe(({item:t})=>{this.item=t})}ngOnInit(){}delete(){this.dialog.open(r.a,{width:"500px",data:{message:this.item.name}}).afterClosed().subscribe(t=>Object(c.b)(this,void 0,void 0,(function*(){t&&(this.loadingState=!0,this.itemService.delete(this.item.id).subscribe(()=>{this.snackBar.open("Item Deleted successfully","\u2714",{duration:2e3}),this.router.navigateByUrl("/items")},t=>{console.log(t),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(n.a),o.Ob(b.b),o.Ob(l.a),o.Ob(n.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-item-detail"]],decls:4,vars:6,consts:[[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["itemdetail",""],[1,"spinner"],[4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"example-card"],["mat-card-image","",3,"src"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],["routerLink","/items/showpackages","mat-stroked-button","","color","primary"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/items/add","mat-stroked-button",""],["routerLink","/items","mat-raised-button","","color","primary",1,"mr-0"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Kc(1,g,2,0,"div",1),o.Kc(2,M,1,1,"ng-template",null,2,o.Lc)),2&t){const t=o.yc(3);o.sc("title","Item Detail Page of ",e.item.code,""),o.qc("breadcrumbSegments",o.uc(4,I,"Details of "+e.item.code)),o.Bb(1),o.qc("ngIf",e.loadingState)("ngIfElse",t)}},directives:[m.a,a.m,d.b,u.a,u.c,u.d,p.b,n.d,h.a,f.a],pipes:[a.v,a.e],styles:[""]}),t})();var P=i("3Pt+"),q=i("ohFZ"),w=i("kmnG"),F=i("d3UM"),y=i("FKr1"),C=i("qFsG"),D=i("iadO");function K(t,e){if(1&t&&(o.Ub(0,"mat-option",32),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.qc("value",t.id),o.Bb(1),o.Nc(t.name)}}function O(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"itemStatus is required"),o.Tb())}function x(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,O,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.itemStatusField.errors.required)}}function N(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Name is required"),o.Tb())}function j(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Name should has at lease ",t.nameField.errors.minlength.requiredLength," characters ")}}function R(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Name length should not exceed ",t.nameField.errors.maxlength.requiredLength," characters ")}}function A(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"This Name Already Exists."),o.Tb())}function L(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,N,2,0,"span",10),o.Kc(2,j,2,1,"span",10),o.Kc(3,R,2,1,"span",10),o.Kc(4,A,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.nameField.errors.required),o.Bb(1),o.qc("ngIf",t.nameField.errors.minlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.maxlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.validate)}}function E(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"unit Price is required"),o.Tb())}function z(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("unit Price length should not exceed ",t.unitPriceField.errors.maxlength.requiredLength," characters, ")}}function V(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,E,2,0,"span",10),o.Kc(2,z,2,1,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.unitPriceField.errors.required),o.Bb(1),o.qc("ngIf",t.unitPriceField.errors.maxlength)}}function $(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1," Date Added is required"),o.Tb())}function H(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,$,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.toCreationField.errors.required)}}function _(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Description length should not exceed ",t.descriptionField.errors.maxlength.requiredLength," characters ")}}function G(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,_,2,1,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.descriptionField.errors.maxlength)}}function X(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Units are required"),o.Tb())}function Y(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,X,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.unitsField.errors)}}const J=function(){return["Items","Add a New item"]};let W=(()=>{class t{constructor(t,e,i,a){this.itemService=t,this.snackBar=e,this.asyncValidators=i,this.router=a,this.itemStatus=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.form=new P.h({name:new P.e("",[P.u.required,P.u.minLength(3),P.u.maxLength(255)],[this.asyncValidators.validateItemName]),description:new P.e("",[P.u.required,P.u.maxLength(65535)]),unitPrice:new P.e("",[P.u.required,P.u.maxLength(12)]),units:new P.e("",[]),supplierId:new P.e({value:"System will Provide",disabled:!0}),toCreation:new P.e("",[P.u.required]),itemStatus:new P.e("",[P.u.required])})}get itemStatusField(){return this.form.controls.itemStatus}get unitPriceField(){return this.form.controls.unitPrice}get unitsField(){return this.form.controls.units}get toCreationField(){return this.form.controls.toCreation}get descriptionField(){return this.form.controls.description}get nameField(){return this.form.controls.name}ngOnInit(){}submit(){this.form.invalid||(this.item=this.form.value,this.item.code="ITM"+Math.round(1e5*Math.random()),this.itemService.add(this.item).subscribe(t=>{this.snackBar.open("Item creation successfull","\u2714",{duration:2e3}),this.router.navigateByUrl("/items/"+t.id)},t=>{switch(t.status){case 401:this.snackBar.open("Authentication Failed. You have to login again","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open("Authorization Failed.","Access denied\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(l.a),o.Ob(q.a),o.Ob(n.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-item-form"]],decls:86,vars:13,consts:[["title","Item Form",3,"breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","itemStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","type","number","formControlName","unitPrice","required",""],[1,"col-sm-7"],["required","","matInput","","formControlName","toCreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"col-md-5"],["matInput","","formControlName","supplierId"],[1,"spacer"],[1,"col-md-6"],["type","number","matInput","","formControlName","units","required",""],[1,"text-right","mt-5","d-flex"],["routerLink","/items","mat-stroked-button","","color","primary",1,"ml-0"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Ub(1,"form",1),o.fc("ngSubmit",(function(){return e.submit()})),o.Ub(2,"div",2),o.Ub(3,"div",3),o.Ub(4,"mat-card"),o.Ub(5,"mat-card-content"),o.Ub(6,"div",4),o.Ub(7,"div",2),o.Ub(8,"div",5),o.Ub(9,"mat-form-field",6),o.Ub(10,"mat-label"),o.Mc(11,"Item Status"),o.Tb(),o.Ub(12,"mat-select",7),o.Ub(13,"mat-option",8),o.Mc(14,"Select the Type"),o.Tb(),o.Kc(15,K,2,2,"mat-option",9),o.Tb(),o.Kc(16,x,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Ub(17,"div",11),o.Ub(18,"mat-form-field",6),o.Ub(19,"mat-label"),o.Mc(20,"Item Name"),o.Tb(),o.Pb(21,"input",12),o.Ub(22,"mat-hint"),o.Mc(23,"Ex: Sound Setup"),o.Tb(),o.Kc(24,L,5,4,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(25,"div",4),o.Ub(26,"div",2),o.Ub(27,"div",13),o.Ub(28,"mat-form-field",6),o.Ub(29,"mat-label"),o.Mc(30,"Unit Price"),o.Tb(),o.Pb(31,"input",14),o.Ub(32,"mat-hint"),o.Mc(33,"Ex: $7800 or $1970"),o.Tb(),o.Kc(34,V,3,2,"mat-error",10),o.Tb(),o.Tb(),o.Ub(35,"div",15),o.Ub(36,"mat-form-field",6),o.Ub(37,"mat-label"),o.Mc(38,"Date Added"),o.Tb(),o.Pb(39,"input",16),o.Pb(40,"mat-datepicker-toggle",17),o.Ub(41,"mat-datepicker",18,19),o.fc("yearSelected",(function(){return 1992})),o.Tb(),o.Kc(43,H,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(44,"div",4),o.Ub(45,"mat-form-field",6),o.Ub(46,"mat-label"),o.Mc(47,"Description"),o.Tb(),o.Pb(48,"textarea",20),o.Kc(49,G,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Ub(50,"div",4),o.Ub(51,"div",2),o.Ub(52,"div",21),o.Ub(53,"mat-form-field",6),o.Ub(54,"mat-label"),o.Mc(55,"Supplier Id"),o.Tb(),o.Pb(56,"input",22),o.Ub(57,"mat-hint"),o.Mc(58,"Info: Supplied by the System"),o.Tb(),o.Tb(),o.Tb(),o.Pb(59,"span",23),o.Ub(60,"div",24),o.Ub(61,"mat-form-field",6),o.Ub(62,"mat-label"),o.Mc(63,"No of Units"),o.Tb(),o.Pb(64,"input",25),o.Ub(65,"mat-hint"),o.Mc(66,"ex: 1 or 50"),o.Tb(),o.Kc(67,Y,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(68,"div",26),o.Ub(69,"button",27),o.Ub(70,"mat-icon"),o.Mc(71,"list"),o.Tb(),o.Mc(72," All Items"),o.Tb(),o.Pb(73,"span",23),o.Ub(74,"button",28),o.Ub(75,"mat-icon"),o.Mc(76,"refresh"),o.Tb(),o.Mc(77," Clear"),o.Tb(),o.Ub(78,"button",29),o.Ub(79,"mat-icon"),o.Mc(80,"save"),o.Tb(),o.Mc(81," Save"),o.Tb(),o.Tb(),o.Tb(),o.Ub(82,"mat-card-actions",30),o.Ub(83,"span",31),o.Mc(84,"*"),o.Tb(),o.Mc(85," Required Fields "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.yc(42);o.qc("breadcrumbSegments",o.tc(12,J)),o.Bb(1),o.qc("formGroup",e.form),o.Bb(12),o.qc("value",null),o.Bb(2),o.qc("ngForOf",e.itemStatus),o.Bb(1),o.qc("ngIf",e.itemStatusField.invalid),o.Bb(8),o.qc("ngIf",e.nameField.invalid),o.Bb(10),o.qc("ngIf",e.unitPriceField.invalid),o.Bb(5),o.qc("matDatepicker",t),o.Bb(1),o.qc("for",t),o.Bb(3),o.qc("ngIf",e.toCreationField.invalid),o.Bb(6),o.qc("ngIf",e.descriptionField.invalid),o.Bb(18),o.qc("ngIf",e.unitsField.invalid)}},directives:[m.a,P.w,P.o,P.i,u.a,u.c,w.c,w.g,F.a,P.t,P.n,P.g,y.n,a.l,a.m,C.b,P.c,w.f,P.r,D.b,D.d,w.h,D.a,p.b,n.d,h.a,u.b,w.b],styles:[""]}),t})();var Q=i("M9IT"),Z=i("+0xr"),tt=i("rO2v");function et(t,e){1&t&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Ub(2,"h1",4),o.Mc(3,"Loading..."),o.Tb(),o.Tb())}function it(t,e){1&t&&(o.Ub(0,"div",20),o.Ub(1,"button",21),o.Ub(2,"mat-icon"),o.Mc(3,"add"),o.Tb(),o.Mc(4," New Item "),o.Tb(),o.Tb())}function at(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-option",22),o.fc("click",(function(){return o.Bc(t),o.jc(3).loadData()})),o.Mc(1),o.Tb()}if(2&t){const t=e.$implicit;o.qc("value",t.id),o.Bb(1),o.Nc(t.name)}}function nt(t,e){1&t&&(o.Ub(0,"th",39),o.Mc(1," ID "),o.Tb())}function ct(t,e){if(1&t&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.code," ")}}function rt(t,e){1&t&&(o.Ub(0,"th",39),o.Mc(1," Name "),o.Tb())}function ot(t,e){if(1&t&&(o.Ub(0,"td",40),o.Mc(1),o.kc(2,"titlecase"),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",o.lc(2,1,t.name)," ")}}function st(t,e){1&t&&(o.Ub(0,"th",39),o.Mc(1," Unit Price "),o.Tb())}function bt(t,e){if(1&t&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.unitPrice," ")}}function lt(t,e){1&t&&(o.Ub(0,"th",39),o.Mc(1," item Status "),o.Tb())}function mt(t,e){if(1&t&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.itemStatus,"")}}function dt(t,e){1&t&&(o.Ub(0,"th",39),o.Mc(1," Description "),o.Tb())}function ut(t,e){if(1&t&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.description,"")}}function pt(t,e){1&t&&o.Pb(0,"th",41)}function ht(t,e){if(1&t&&(o.Ub(0,"td",42),o.Ub(1,"button",43),o.Ub(2,"mat-icon"),o.Mc(3,"visibility"),o.Tb(),o.Mc(4," More ..."),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.sc("routerLink","/items/",t.id,"")}}function ft(t,e){1&t&&o.Pb(0,"th",41)}function gt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"button",45),o.fc("click",(function(){o.Bc(t);const e=o.jc().$implicit;return o.jc(4).delete(e)})),o.Ub(1,"mat-icon"),o.Mc(2,"delete"),o.Tb(),o.Mc(3," Delete"),o.Tb()}}const Ut=function(){return["Admin","Manager"]};function Tt(t,e){1&t&&(o.Ub(0,"td",42),o.Kc(1,gt,4,0,"button",44),o.Tb()),2&t&&(o.Bb(1),o.qc("appHasRole",o.tc(1,Ut)))}function vt(t,e){1&t&&o.Pb(0,"th",41)}function kt(t,e){if(1&t&&(o.Ub(0,"td",42),o.Ub(1,"button",46),o.Ub(2,"mat-icon"),o.Mc(3,"edit"),o.Tb(),o.Mc(4," Change"),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.sc("routerLink","/items/edit/",t.id,"")}}function Bt(t,e){1&t&&o.Pb(0,"tr",47)}function Mt(t,e){1&t&&o.Pb(0,"tr",48)}function It(t,e){if(1&t&&(o.Ub(0,"div",23),o.Ub(1,"table",24),o.Sb(2,25),o.Kc(3,nt,2,0,"th",26),o.Kc(4,ct,2,1,"td",27),o.Rb(),o.Sb(5,28),o.Kc(6,rt,2,0,"th",26),o.Kc(7,ot,3,3,"td",27),o.Rb(),o.Sb(8,29),o.Kc(9,st,2,0,"th",26),o.Kc(10,bt,2,1,"td",27),o.Rb(),o.Sb(11,30),o.Kc(12,lt,2,0,"th",26),o.Kc(13,mt,2,1,"td",27),o.Rb(),o.Sb(14,31),o.Kc(15,dt,2,0,"th",26),o.Kc(16,ut,2,1,"td",27),o.Rb(),o.Sb(17,32),o.Kc(18,pt,1,0,"th",33),o.Kc(19,ht,5,1,"td",34),o.Rb(),o.Sb(20,35),o.Kc(21,ft,1,0,"th",33),o.Kc(22,Tt,2,2,"td",34),o.Rb(),o.Sb(23,36),o.Kc(24,vt,1,0,"th",33),o.Kc(25,kt,5,1,"td",34),o.Rb(),o.Kc(26,Bt,1,0,"tr",37),o.Kc(27,Mt,1,0,"tr",38),o.Tb(),o.Tb()),2&t){const t=o.jc(3);o.Bb(1),o.qc("dataSource",t.itemDataPage),o.Bb(25),o.qc("matHeaderRowDef",t.displayedColumns),o.Bb(1),o.qc("matRowDefColumns",t.displayedColumns)}}function St(t,e){1&t&&o.Pb(0,"app-empty-data-table",49)}const Pt=function(){return["Admin"]},qt=function(){return[5,10,25,50,100]};function wt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div",6),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-content"),o.Kc(3,it,5,0,"div",7),o.Ub(4,"div",8),o.Ub(5,"div",9),o.Ub(6,"div",10),o.Ub(7,"mat-form-field",11),o.Ub(8,"mat-label"),o.Mc(9,"Filter by Name"),o.Tb(),o.Ub(10,"input",12),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(11,"div",10),o.Ub(12,"mat-form-field",11),o.Ub(13,"mat-label"),o.Mc(14,"Filter by ID"),o.Tb(),o.Ub(15,"input",12),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(16,"div",10),o.Ub(17,"mat-form-field",11),o.Ub(18,"mat-label"),o.Mc(19,"Filter by Price"),o.Tb(),o.Ub(20,"input",12),o.fc("keyup",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(21,"div",10),o.Ub(22,"mat-form-field",11),o.Ub(23,"mat-label"),o.Mc(24,"Filter by Status"),o.Tb(),o.Ub(25,"mat-select",13),o.Ub(26,"mat-option",14),o.fc("click",(function(){return o.Bc(t),o.jc(2).loadData()})),o.Mc(27,"Any Status"),o.Tb(),o.Kc(28,at,2,2,"mat-option",15),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Kc(29,It,28,3,"div",16),o.Kc(30,St,1,0,"app-empty-data-table",17),o.Ub(31,"div",18),o.Ub(32,"mat-paginator",19),o.fc("page",(function(e){return o.Bc(t),o.jc(2).paginate(e)})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=o.jc(2);o.Bb(3),o.qc("appHasRole",o.tc(13,Pt)),o.Bb(7),o.qc("formControl",t.nameField),o.Bb(5),o.qc("formControl",t.codeField),o.Bb(5),o.qc("formControl",t.priceField),o.Bb(5),o.qc("formControl",t.itemStatusField),o.Bb(1),o.qc("value",null),o.Bb(2),o.qc("ngForOf",t.itemStatus),o.Bb(1),o.qc("ngIf",t.itemDataPage.length>0),o.Bb(1),o.qc("ngIf",0===t.itemDataPage.length),o.Bb(2),o.qc("length",t.pagination.totalItems)("pageSize",t.pagination.itemsPerPage)("pageSizeOptions",o.tc(14,qt))("showFirstLastButtons",!0)}}function Ft(t,e){if(1&t&&o.Kc(0,wt,33,15,"div",5),2&t){const t=o.jc();o.qc("ngIf",void 0!==t.itemDataPage)}}const yt=function(){return["Items","Show All Items"]};let Ct=(()=>{class t{constructor(t,e,i){this.itemService=t,this.dialog=e,this.snackBar=i,this.userParams={},this.displayedColumns=["code","name","unitprice","status","description","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.itemStatus=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.nameField=new P.e,this.codeField=new P.e,this.itemStatusField=new P.e,this.priceField=new P.e}ngOnInit(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.code=this.codeField.value,this.userParams.itemStatus=this.itemStatusField.value,this.userParams.price=this.priceField.value,this.itemService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(t=>{this.loadingState=!1,this.itemDataPage=t.result,this.pagination=t.pagination},t=>{switch(t.status){case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("error loading data ","Error",{duration:3e3})}})}refreshData(){this.loadData()}paginate(t){this.pagination.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.pageIndex=t.pageIndex+1,this.loadData()}ngOnDestroy(){this.live=!1}delete(t){this.dialog.open(r.a,{width:"500px",data:{message:t.name}}).afterClosed().subscribe(e=>{e&&(this.loadingState=!0,this.itemService.delete(t.id).subscribe(()=>{this.snackBar.open("Item Deleted successfully","\u2714",{duration:2e3}),this.loadData()},t=>{console.log(t),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(b.b),o.Ob(l.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-item-table"]],decls:4,vars:4,consts:[["title","Items",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["itemlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["class","mb-2",4,"appHasRole"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[3,"formControl"],["selected","",3,"value","click"],[3,"value","click",4,"ngFor","ngForOf"],["class","table-responsive table-striped",4,"ngIf"],["message","No items to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"mb-2"],["routerLink","/items/add","mat-raised-button","","color","primary",1,"mx-0"],[3,"value","click"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","unitprice"],["matColumnDef","status"],["matColumnDef","description"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No items to show"]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Kc(1,et,4,0,"div",1),o.Kc(2,Ft,1,1,"ng-template",null,2,o.Lc)),2&t){const t=o.yc(3);o.qc("breadcrumbSegments",o.tc(3,yt)),o.Bb(1),o.qc("ngIf",e.loadingState)("ngIfElse",t)}},directives:[m.a,a.m,d.b,u.a,u.c,f.a,w.c,w.g,C.b,P.c,P.n,P.f,F.a,y.n,a.l,Q.a,p.b,n.d,h.a,Z.j,Z.c,Z.e,Z.b,Z.g,Z.i,Z.d,Z.a,Z.f,Z.h,tt.a],pipes:[a.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),t})();var Dt=i("/lRe"),Kt=i("bv9b");function Ot(t,e){if(1&t&&(o.Ub(0,"mat-option",35),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.qc("value",t.name),o.Bb(1),o.Nc(t.name)}}function xt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"itemStatus is required"),o.Tb())}function Nt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,xt,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.itemStatusField.errors.required)}}function jt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Name is required"),o.Tb())}function Rt(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Name should has at lease ",t.nameField.errors.minlength.requiredLength," characters ")}}function At(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Name length should not exceed ",t.nameField.errors.maxlength.requiredLength," characters ")}}function Lt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,jt,2,0,"span",10),o.Kc(2,Rt,2,1,"span",10),o.Kc(3,At,2,1,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.nameField.errors.required),o.Bb(1),o.qc("ngIf",t.nameField.errors.minlength),o.Bb(1),o.qc("ngIf",t.nameField.errors.maxlength)}}function Et(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"unit Price is required"),o.Tb())}function zt(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("unit Price length should not exceed ",t.unitPriceField.errors.maxlength.requiredLength," characters, ")}}function Vt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Et,2,0,"span",10),o.Kc(2,zt,2,1,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.unitPriceField.errors.required),o.Bb(1),o.qc("ngIf",t.unitPriceField.errors.maxlength)}}function $t(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1," Date Added is required"),o.Tb())}function Ht(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,$t,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.toCreationField.errors.required)}}function _t(t,e){if(1&t&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&t){const t=o.jc(2);o.Bb(1),o.Oc("Description length should not exceed ",t.descriptionField.errors.maxlength.requiredLength," characters ")}}function Gt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,_t,2,1,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.descriptionField.errors.maxlength)}}function Xt(t,e){1&t&&(o.Ub(0,"span"),o.Mc(1,"Units are required"),o.Tb())}function Yt(t,e){if(1&t&&(o.Ub(0,"mat-error"),o.Kc(1,Xt,2,0,"span",10),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.qc("ngIf",t.unitsField.errors)}}function Jt(t,e){1&t&&(o.Ub(0,"div",36),o.Pb(1,"mat-progress-bar",37),o.Ub(2,"h1",38),o.Mc(3,"Uploading..."),o.Tb(),o.Tb())}function Wt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div"),o.Ub(1,"input",39),o.fc("change",(function(e){return o.Bc(t),o.jc().openPhotoChoser(e)})),o.Tb(),o.Tb(),o.Ub(2,"mat-card"),o.Pb(3,"img",40),o.Pb(4,"input",41),o.Ub(5,"mat-card-content",42),o.Ub(6,"button",43),o.fc("click",(function(){return o.Bc(t),o.jc().addPhoto()})),o.Ub(7,"mat-icon"),o.Mc(8,"edit"),o.Tb(),o.Mc(9,"Add Photo"),o.Tb(),o.Ub(10,"button",44),o.fc("click",(function(){return o.Bc(t),o.jc().clearPhoto()})),o.Ub(11,"mat-icon"),o.Mc(12,"clear"),o.Tb(),o.Mc(13,"Clear"),o.Tb(),o.Tb(),o.Tb(),o.Ub(14,"div",45),o.Ub(15,"button",46),o.fc("click",(function(){return o.Bc(t),o.jc().delete()})),o.Ub(16,"mat-icon"),o.Mc(17,"delete"),o.Tb(),o.Mc(18,"Delete All Photos"),o.Tb(),o.Tb()}if(2&t){const t=o.jc();o.Bb(3),o.rc("src",(null==t.item.photos[0]?null:t.item.photos[0].filename)||"../../../assets/images/male.jpg",o.Dc)}}const Qt=function(t){return["Items","Show All Items",t]};let Zt=(()=>{class t{constructor(t,e,i,a,n,c){this.itemService=t,this.route=e,this.snackBar=i,this.photo=a,this.dialog=n,this.router=c,this.itemStatus=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.imageUrl=[],this.form=new P.h({name:new P.e("",[P.u.required,P.u.minLength(3),P.u.maxLength(255)]),description:new P.e("",[P.u.required,P.u.maxLength(65535)]),unitPrice:new P.e("",[P.u.required,P.u.maxLength(12)]),units:new P.e("",[]),supplierId:new P.e({value:"System will Provide",disabled:!0}),toCreation:new P.e("",[P.u.required]),itemStatus:new P.e("",[P.u.required])}),this.route.data.subscribe(({item:t})=>{this.item=t,this.itemId=t.id,this.setValues()})}get itemStatusField(){return this.form.controls.itemStatus}get unitPriceField(){return this.form.controls.unitPrice}get unitsField(){return this.form.controls.units}get toCreationField(){return this.form.controls.toCreation}get descriptionField(){return this.form.controls.description}get nameField(){return this.form.controls.name}ngOnInit(){}discardChanges(){this.setValues()}submit(){this.form.invalid||(this.item=this.form.value,this.item.code="ITM"+Math.round(1e5*Math.random()),this.itemService.update(this.itemId,this.item).subscribe(t=>{this.snackBar.open("Item successfully Updated","\u2714",{duration:2e3}),this.router.navigateByUrl("/items/"+t.id)},t=>{switch(t.status){case 401:this.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(t.error.message,"Error\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}}))}setValues(){this.descriptionField.pristine&&this.descriptionField.setValue(this.item.description),this.unitsField.pristine&&this.unitsField.patchValue(this.item.photo),this.itemStatusField.pristine&&this.itemStatusField.patchValue(this.item.itemStatus),this.unitPriceField.pristine&&this.unitPriceField.patchValue(this.item.unitPrice),this.toCreationField.pristine&&this.toCreationField.patchValue(this.item.toCreation),this.nameField.pristine&&this.nameField.patchValue(this.item.name)}clearPhoto(){this.imageUrl=[]}openPhotoChoser(t){var e;this.files=t.target.files,this.imageUrl=[];for(let i=0;i<(null===(e=this.files)||void 0===e?void 0:e.length);i++)if(-1===this.files[i].type.indexOf("image"))this.clearPhoto();else{const t=new FileReader;t.onload=t=>{this.imageUrl.push(t.target.result)},t.readAsDataURL(this.files[i])}}addPhoto(){var t;const e=new FormData;for(let i=0;i<(null===(t=this.files)||void 0===t?void 0:t.length);i++)e.append("Photos",this.files[i],this.files[i].name);this.loadingState=!0,this.photo.addPhotoForItem(this.itemId,e).subscribe(()=>{this.snackBar.open("Photo Added successfully","\u2714",{duration:3e3}),this.loadingState=!1,this.router.navigateByUrl("/other/photos")},t=>{switch(t.status){case 401:this.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(t.error.message,"Error\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}this.loadingState=!1})}delete(){this.dialog.open(r.a,{width:"500px",data:{message:this.item.name+" photos"}}).afterClosed().subscribe(t=>{t&&(this.loadingState=!0,this.photo.deletePhotosFromItem(this.item.id).subscribe(t=>{this.snackBar.open("Photos Deleted successfully","\u2714",{duration:3e3}),this.loadingState=!1},t=>{200===t.status?(this.snackBar.open("Photos Deleted successfully","\u2714",{duration:3e3}),this.loadingState=!1):(console.log(t),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:3e3}),this.loadingState=!1)}))})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(n.a),o.Ob(l.a),o.Ob(Dt.a),o.Ob(b.b),o.Ob(n.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-item-update-form"]],decls:90,vars:17,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-9"],[1,"form-group"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","itemStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","formControlName","unitPrice","required",""],[1,"col-sm-7"],["required","","matInput","","formControlName","toCreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"col-md-5"],["matInput","","formControlName","supplierId"],[1,"spacer"],[1,"col-md-6"],["type","number","matInput","","formControlName","units","required",""],[1,"text-right","mt-5","d-flex"],["routerLink","/items","mat-stroked-button","","color","primary",1,"ml-0"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[1,"col-md-3"],["class","spinner",4,"ngIf","ngIfElse"],["photolist",""],[3,"value"],[1,"spinner"],["mode","indeterminate"],[1,"mat-h1","mt-3"],["id","file-uploader","type","file","accept","image/*","multiple","",1,"image-name",3,"change"],["mat-card-image","","alt","Photo of a item",3,"src"],["id","photoChooser","type","file",1,"image-name",2,"display","none"],[1,"d-flex","justify-content-center"],["mat-flat-button","","color","primary","type","button",3,"click"],["mat-flat-button","","color","accent","type","button",3,"click"],[1,"mt-3"],["mat-flat-button","","color","warn","type","button",3,"click"]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Ub(1,"form",1),o.fc("ngSubmit",(function(){return e.submit()})),o.Ub(2,"div",2),o.Ub(3,"div",3),o.Ub(4,"mat-card"),o.Ub(5,"mat-card-content"),o.Ub(6,"div",4),o.Ub(7,"div",2),o.Ub(8,"div",5),o.Ub(9,"mat-form-field",6),o.Ub(10,"mat-label"),o.Mc(11,"Item Status"),o.Tb(),o.Ub(12,"mat-select",7),o.Ub(13,"mat-option",8),o.Mc(14,"Select the Type"),o.Tb(),o.Kc(15,Ot,2,2,"mat-option",9),o.Tb(),o.Kc(16,Nt,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Ub(17,"div",11),o.Ub(18,"mat-form-field",6),o.Ub(19,"mat-label"),o.Mc(20,"Item Name"),o.Tb(),o.Pb(21,"input",12),o.Ub(22,"mat-hint"),o.Mc(23,"Ex: Sound Setup"),o.Tb(),o.Kc(24,Lt,4,3,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(25,"div",4),o.Ub(26,"div",2),o.Ub(27,"div",13),o.Ub(28,"mat-form-field",6),o.Ub(29,"mat-label"),o.Mc(30,"Unit Price"),o.Tb(),o.Pb(31,"input",14),o.Ub(32,"mat-hint"),o.Mc(33,"Ex: $7800 or $1970"),o.Tb(),o.Kc(34,Vt,3,2,"mat-error",10),o.Tb(),o.Tb(),o.Ub(35,"div",15),o.Ub(36,"mat-form-field",6),o.Ub(37,"mat-label"),o.Mc(38,"Date Added"),o.Tb(),o.Pb(39,"input",16),o.Pb(40,"mat-datepicker-toggle",17),o.Ub(41,"mat-datepicker",18,19),o.fc("yearSelected",(function(){return 1992})),o.Tb(),o.Kc(43,Ht,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(44,"div",4),o.Ub(45,"mat-form-field",6),o.Ub(46,"mat-label"),o.Mc(47,"Description"),o.Tb(),o.Pb(48,"textarea",20),o.Kc(49,Gt,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Ub(50,"div",4),o.Ub(51,"div",2),o.Ub(52,"div",21),o.Ub(53,"mat-form-field",6),o.Ub(54,"mat-label"),o.Mc(55,"Supplier Id"),o.Tb(),o.Pb(56,"input",22),o.Ub(57,"mat-hint"),o.Mc(58,"Info: Supplied by the System"),o.Tb(),o.Tb(),o.Tb(),o.Pb(59,"span",23),o.Ub(60,"div",24),o.Ub(61,"mat-form-field",6),o.Ub(62,"mat-label"),o.Mc(63,"No of Units"),o.Tb(),o.Pb(64,"input",25),o.Ub(65,"mat-hint"),o.Mc(66,"ex: 1 or 50"),o.Tb(),o.Kc(67,Yt,2,1,"mat-error",10),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(68,"div",26),o.Ub(69,"button",27),o.Ub(70,"mat-icon"),o.Mc(71,"list"),o.Tb(),o.Mc(72," All Items"),o.Tb(),o.Pb(73,"span",23),o.Ub(74,"button",28),o.fc("click",(function(){return e.discardChanges()})),o.Ub(75,"mat-icon"),o.Mc(76,"refresh"),o.Tb(),o.Mc(77," Clear"),o.Tb(),o.Ub(78,"button",29),o.Ub(79,"mat-icon"),o.Mc(80,"save"),o.Tb(),o.Mc(81," Save"),o.Tb(),o.Tb(),o.Tb(),o.Ub(82,"mat-card-actions",30),o.Ub(83,"span",31),o.Mc(84,"*"),o.Tb(),o.Mc(85," Required Fields "),o.Tb(),o.Tb(),o.Tb(),o.Ub(86,"div",32),o.Kc(87,Jt,4,0,"div",33),o.Kc(88,Wt,19,1,"ng-template",null,34,o.Lc),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.yc(42),i=o.yc(89);o.sc("title","Item Change Form of ",e.item.code,""),o.qc("breadcrumbSegments",o.uc(15,Qt,"Change Details of "+e.item.code)),o.Bb(1),o.qc("formGroup",e.form),o.Bb(12),o.qc("value",null),o.Bb(2),o.qc("ngForOf",e.itemStatus),o.Bb(1),o.qc("ngIf",e.itemStatusField.invalid),o.Bb(8),o.qc("ngIf",e.nameField.invalid),o.Bb(10),o.qc("ngIf",e.unitPriceField.invalid),o.Bb(5),o.qc("matDatepicker",t),o.Bb(1),o.qc("for",t),o.Bb(3),o.qc("ngIf",e.toCreationField.invalid),o.Bb(6),o.qc("ngIf",e.descriptionField.invalid),o.Bb(18),o.qc("ngIf",e.unitsField.invalid),o.Bb(20),o.qc("ngIf",e.loadingState)("ngIfElse",i)}},directives:[m.a,P.w,P.o,P.i,u.a,u.c,w.c,w.g,F.a,P.t,P.n,P.g,y.n,a.l,a.m,C.b,P.c,w.f,D.b,D.d,w.h,D.a,P.r,p.b,n.d,h.a,u.b,w.b,Kt.a,u.d],styles:[".spinner[_ngcontent-%COMP%]{top:40%;left:30%;position:absolute}"]}),t})();var te=i("IOme"),ee=i("bSwM");function ie(t,e){if(1&t&&(o.Ub(0,"div",11),o.Ub(1,"mat-checkbox",12),o.fc("change",(function(){const t=e.$implicit;return t.checked=!t.checked})),o.Mc(2),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.rc("value",t.id),o.qc("checked",t.checked),o.Bb(1),o.Nc(t.name)}}let ae=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){this.dialogRef.addPanelClass("custom-dialog"),te.a.isDark()?this.dialogRef.addPanelClass("dark"):this.dialogRef.addPanelClass("light"),this.item=this.data.item,this.packages=this.data.packages}updateItems(){this.dialogRef.close(this.packages)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(b.g),o.Ob(b.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-package-edit"]],decls:24,vars:4,consts:[[1,"dialog-wrapper"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"message"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["color","accent","mat-raised-button","",1,"mr-0",3,"click"],[1,"form-check"],[1,"example-margin",3,"value","checked","change"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"h1",1),o.Mc(2),o.Tb(),o.Ub(3,"mat-card"),o.Ub(4,"div",2),o.Ub(5,"p"),o.Mc(6,"Are you sure you want to Edit \u201c\xa0"),o.Ub(7,"span",3),o.Mc(8),o.Tb(),o.Mc(9,"\xa0\u201ds Packages?"),o.Tb(),o.Tb(),o.Ub(10,"div"),o.Ub(11,"form",4,5),o.Kc(13,ie,3,3,"div",6),o.Tb(),o.Tb(),o.Ub(14,"div",7),o.Pb(15,"span",8),o.Ub(16,"button",9),o.Ub(17,"mat-icon"),o.Mc(18,"clear"),o.Tb(),o.Mc(19," No"),o.Tb(),o.Ub(20,"button",10),o.fc("click",(function(){return e.updateItems()})),o.Ub(21,"mat-icon"),o.Mc(22,"edit"),o.Tb(),o.Mc(23," Yes"),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.Bb(2),o.Oc("Add a Package for ",e.item.name,""),o.Bb(6),o.Nc(e.item.name),o.Bb(5),o.qc("ngForOf",e.packages),o.Bb(3),o.qc("mat-dialog-close",!1))},directives:[b.h,u.a,b.e,P.w,P.o,P.p,a.l,b.c,p.b,b.d,h.a,ee.a],styles:[".message[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:110%}div[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:-10px}.dialog-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}h1[_ngcontent-%COMP%]{margin-top:-24px;font-size:20px!important;margin-left:-24px!important;margin-right:-24px!important;padding:14px 14px 5px!important;border-bottom:1px solid rgba(0,0,0,.1)}"]}),t})();var ne=i("O+Qd"),ce=i("IgKp");function re(t,e){1&t&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Ub(2,"h1",4),o.Mc(3,"Loading..."),o.Tb(),o.Tb())}function oe(t,e){1&t&&(o.Ub(0,"th",28),o.Mc(1,"ItemId"),o.Tb())}function se(t,e){if(1&t&&(o.Ub(0,"td",29),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc("SUP0",t.id,"")}}function be(t,e){1&t&&(o.Ub(0,"th",28),o.Mc(1,"Item"),o.Tb())}function le(t,e){if(1&t&&(o.Ub(0,"td",29),o.Mc(1),o.kc(2,"titlecase"),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",o.lc(2,1,t.name)," ")}}function me(t,e){1&t&&(o.Ub(0,"th",28),o.Mc(1,"Included Packages"),o.Tb())}function de(t,e){if(1&t&&(o.Ub(0,"td",29),o.Mc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Oc(" ",t.packageItems," ")}}function ue(t,e){1&t&&o.Pb(0,"th",30)}function pe(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",31),o.Ub(1,"button",32),o.fc("click",(function(){o.Bc(t);const i=e.$implicit;return o.jc(2).deleteModals(i)})),o.Ub(2,"mat-icon"),o.Mc(3,"delete"),o.Tb(),o.Mc(4," Remove"),o.Tb(),o.Tb()}}function he(t,e){1&t&&o.Pb(0,"th",30)}function fe(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",31),o.Ub(1,"button",33),o.fc("click",(function(){o.Bc(t);const i=e.$implicit;return o.jc(2).editItemModals(i)})),o.Ub(2,"mat-icon"),o.Mc(3,"edit"),o.Tb(),o.Mc(4," Add Packages "),o.Tb(),o.Tb()}}function ge(t,e){1&t&&o.Pb(0,"th",30)}function Ue(t,e){if(1&t&&(o.Ub(0,"td",31),o.Ub(1,"button",34),o.Ub(2,"mat-icon"),o.Mc(3,"visibility"),o.Tb(),o.Mc(4," More ..."),o.Tb(),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.sc("routerLink","/items/",t.id,"")}}function Te(t,e){1&t&&o.Pb(0,"tr",35)}function ve(t,e){1&t&&o.Pb(0,"tr",36)}const ke=function(){return[5,10,25,50,100]};function Be(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div",5),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-content"),o.Ub(3,"div",6),o.Ub(4,"div",7),o.Ub(5,"div",8),o.Ub(6,"mat-form-field",9),o.Ub(7,"mat-label"),o.Mc(8,"Filter by ID"),o.Tb(),o.Ub(9,"input",10),o.fc("keyup",(function(){return o.Bc(t),o.jc().loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Pb(10,"span",11),o.Ub(11,"div",8),o.Ub(12,"mat-form-field",9),o.Ub(13,"mat-label"),o.Mc(14,"Filter by Item Name"),o.Tb(),o.Ub(15,"input",10),o.fc("keyup",(function(){return o.Bc(t),o.jc().loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(16,"div",12),o.Ub(17,"table",13),o.Sb(18,14),o.Kc(19,oe,2,0,"th",15),o.Kc(20,se,2,1,"td",16),o.Rb(),o.Sb(21,17),o.Kc(22,be,2,0,"th",15),o.Kc(23,le,3,3,"td",16),o.Rb(),o.Sb(24,18),o.Kc(25,me,2,0,"th",15),o.Kc(26,de,2,1,"td",16),o.Rb(),o.Sb(27,19),o.Kc(28,ue,1,0,"th",20),o.Kc(29,pe,5,0,"td",21),o.Rb(),o.Sb(30,22),o.Kc(31,he,1,0,"th",20),o.Kc(32,fe,5,0,"td",21),o.Rb(),o.Sb(33,23),o.Kc(34,ge,1,0,"th",20),o.Kc(35,Ue,5,1,"td",21),o.Rb(),o.Kc(36,Te,1,0,"tr",24),o.Kc(37,ve,1,0,"tr",25),o.Tb(),o.Tb(),o.Ub(38,"div",26),o.Ub(39,"mat-paginator",27),o.fc("page",(function(e){return o.Bc(t),o.jc().paginate(e)})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=o.jc();o.Bb(9),o.qc("formControl",t.codeField),o.Bb(6),o.qc("formControl",t.nameField),o.Bb(2),o.qc("dataSource",t.items),o.Bb(19),o.qc("matHeaderRowDef",t.displayedColumns),o.Bb(1),o.qc("matRowDefColumns",t.displayedColumns),o.Bb(2),o.qc("length",t.items.length)("pageSize",25)("pageSizeOptions",o.tc(9,ke))("showFirstLastButtons",!0)}}const Me=function(){return["Items","Show All Items of Packages"]};let Ie=(()=>{class t{constructor(t,e,i,a,n){this.packagesToAdd=t,this.dialog=e,this.snackBar=i,this.mappingService=a,this.packageService=n,this.displayedColumns=["itemid","item","packages","delete-col","update-col","more-col"],this.packages=[],this.userParams={},this.pageSize=25,this.pageIndex=1,this.live=!1,this.codeField=new P.e,this.nameField=new P.e}ngOnInit(){this.loadingState=!0,this.live=!0,this.loadData()}paginate(t){this.pagination.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.pageIndex=t.pageIndex+1,this.loadData()}ngOnDestroy(){this.loadData(),this.live=!0,this.refreshData()}refreshData(){this.loadData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.id=this.codeField.value,this.packageService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(t=>{this.packages=t.result},t=>{console.log(t),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:3e3})}),this.mappingService.getPackageWithItems(this.pageIndex,this.pageSize,this.userParams).subscribe(t=>{this.loadingState=!1,this.items=t.body},t=>{switch(console.log(t),t.status){case 401:case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("there is a problem loading roles\u2757","\u274c",{duration:3e3})}})}editItemModals(t){this.dialog.open(ae,{width:"500px",data:{item:t,packages:this.getItemsArray(t)}}).afterClosed().subscribe(e=>{if(!e)return;this.loadingState=!0;const i={packageNames:[...e.filter(t=>!0===t.checked).map(t=>t.name)],packageid:[...e.filter(t=>!0===t.checked).map(t=>t.id)]};i&&this.packagesToAdd.addPackages(t.id,i).subscribe(()=>{t.packageItems=[...i.packageNames],this.snackBar.open("packages Added successfully","\u2714",{duration:2e3}),this.loadData()},t=>{console.log(t),this.snackBar.open("Item already been added in the Package\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}deleteModals(t){this.dialog.open(r.a,{width:"500px",data:{message:t.packageItems}}).afterClosed().subscribe(e=>{if(!e)return;this.loadingState=!0;const i=this.getItemsArray(t),a={packageNames:[...i.map(t=>t.name)],packageid:[...i.map(t=>t.id)]};i&&this.packagesToAdd.removePackages(t.id,a).subscribe(()=>{this.snackBar.open("packages removed successfully","\u2714",{duration:2e3}),this.loadData()},t=>{console.log(t),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}getItemsArray(t){const e=[],i=t.packageItems,a=this.packages;for(let n=0;n<a.length;n++){let t=!1;for(let c=0;c<i.length;c++)if(a[n].name===i[c]){t=!0,a[n].checked=!0,e.push(a[n]);break}t||(a[n].checked=!1,e.push(a[n]))}return e}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(s.a),o.Ob(b.b),o.Ob(l.a),o.Ob(ne.a),o.Ob(ce.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-package-items"]],decls:4,vars:4,consts:[["title","Package Items",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["Supplierlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],[1,"mat-elevation-z8"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[1,"spacer"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","itemid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","item"],["matColumnDef","packages"],["matColumnDef","delete-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","update-col"],["matColumnDef","more-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"click"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(o.Pb(0,"app-page-header",0),o.Kc(1,re,4,0,"div",1),o.Kc(2,Be,40,10,"ng-template",null,2,o.Lc)),2&t){const t=o.yc(3);o.qc("breadcrumbSegments",o.tc(3,Me)),o.Bb(1),o.qc("ngIf",e.loadingState)("ngIfElse",t)}},directives:[m.a,a.m,d.b,u.a,u.c,w.c,w.g,C.b,P.c,P.n,P.f,Z.j,Z.c,Z.e,Z.b,Z.g,Z.i,Q.a,Z.d,Z.a,p.b,h.a,n.d,Z.f,Z.h],pipes:[a.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),t})();var Se=i("EY2u"),Pe=i("JIr8");let qe=(()=>{class t{constructor(t,e){this.itemService=t,this.route=e}resolve(t){return this.itemService.get(t.params.id).pipe(Object(Pe.a)(()=>(this.route.navigateByUrl("/items"),Se.a)))}}return t.\u0275fac=function(e){return new(e||t)(o.cc(s.a),o.cc(n.c))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const we=[{path:"",component:Ct},{path:"add",component:W},{path:"showpackages",component:Ie},{path:":id",component:S,resolve:{item:qe}},{path:"edit/:id",component:Zt,resolve:{item:qe}}];let Fe=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[n.g.forChild(we)],n.g]}),t})();var ye=i("hctd"),Ce=i("FpXt");let De=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[a.c,Fe,Ce.a,ye.a,P.s,P.j]]}),t})()}}]);