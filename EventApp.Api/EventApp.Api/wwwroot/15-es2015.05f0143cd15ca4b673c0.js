(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{YFug:function(e,t,i){"use strict";i.r(t),i.d(t,"ServicesModule",(function(){return Kt}));var a=i("ofXK"),r=i("tyNb"),c=i("EY2u"),n=i("JIr8"),s=i("fXoL"),o=i("/dUf");let b=(()=>{class e{constructor(e,t){this.Service=e,this.route=t}resolve(e){return this.Service.get(e.params.id).pipe(Object(n.a)(()=>(this.route.navigateByUrl("/services"),c.a)))}}return e.\u0275fac=function(t){return new(t||e)(s.cc(o.a),s.cc(r.c))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i("mrSG"),d=i("zHse"),u=i("0IaG"),m=i("dNgK"),p=i("5VPf"),f=i("Xa2L"),h=i("Wp6s"),g=i("yX84"),v=i("bTqV"),U=i("NFeN");function T(e,t){1&e&&(s.Ub(0,"div",3),s.Pb(1,"mat-spinner"),s.Tb())}function S(e,t){if(1&e&&(s.Ub(0,"tr"),s.Ub(1,"th"),s.Mc(2,"Description"),s.Tb(),s.Ub(3,"td"),s.Mc(4),s.Tb(),s.Tb()),2&e){const e=s.jc(3);s.Bb(4),s.Nc(e.service.description)}}function M(e,t){if(1&e&&(s.Ub(0,"tr"),s.Ub(1,"th"),s.Mc(2,"Suppliers"),s.Tb(),s.Ub(3,"td"),s.Mc(4),s.Tb(),s.Tb()),2&e){const e=s.jc(3);s.Bb(4),s.Nc(e.service.serviceSuppliers)}}function B(e,t){1&e&&(s.Ub(0,"button",17),s.Ub(1,"mat-icon"),s.Mc(2,"add"),s.Tb(),s.Mc(3,"Add Suppliers"),s.Tb())}function q(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",18),s.fc("click",(function(){return s.Bc(e),s.jc(3).delete()})),s.Ub(1,"mat-icon"),s.Mc(2,"delete"),s.Tb(),s.Mc(3," Delete"),s.Tb()}}function k(e,t){if(1&e&&(s.Ub(0,"button",19),s.Ub(1,"mat-icon"),s.Mc(2,"edit"),s.Tb(),s.Mc(3," Change"),s.Tb()),2&e){const e=s.jc(3);s.sc("routerLink","/services/edit/",e.service.id,"")}}function F(e,t){1&e&&(s.Ub(0,"button",20),s.Ub(1,"mat-icon"),s.Mc(2,"add"),s.Tb(),s.Mc(3," New service"),s.Tb())}const w=function(){return["Admin","Manager","Supervisor","Employee"]},I=function(){return["Admin","Manager"]};function D(e,t){if(1&e&&(s.Ub(0,"div"),s.Ub(1,"div",5),s.Ub(2,"div",6),s.Ub(3,"mat-card",7),s.Ub(4,"mat-card-content"),s.Ub(5,"table",8),s.Ub(6,"tbody"),s.Ub(7,"tr"),s.Ub(8,"th"),s.Mc(9,"ID"),s.Tb(),s.Ub(10,"td"),s.Mc(11),s.kc(12,"titlecase"),s.Tb(),s.Tb(),s.Ub(13,"tr"),s.Ub(14,"th"),s.Mc(15,"Created At"),s.Tb(),s.Ub(16,"td"),s.Mc(17),s.kc(18,"date"),s.Tb(),s.Tb(),s.Ub(19,"tr"),s.Ub(20,"th"),s.Mc(21,"Creator"),s.Tb(),s.Ub(22,"td"),s.Mc(23),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(24,"div",9),s.Ub(25,"mat-card",7),s.Ub(26,"mat-card-content"),s.Ub(27,"table",8),s.Ub(28,"tbody"),s.Ub(29,"tr"),s.Ub(30,"th"),s.Mc(31,"ID"),s.Tb(),s.Ub(32,"td"),s.Mc(33),s.Tb(),s.Tb(),s.Ub(34,"tr"),s.Ub(35,"th"),s.Mc(36,"Name"),s.Tb(),s.Ub(37,"td"),s.Mc(38),s.Tb(),s.Tb(),s.Ub(39,"tr"),s.Ub(40,"th"),s.Mc(41,"Service Date"),s.Tb(),s.Ub(42,"td"),s.Mc(43),s.Tb(),s.Tb(),s.Ub(44,"tr"),s.Ub(45,"th"),s.Mc(46,"Unit"),s.Tb(),s.Ub(47,"td"),s.Mc(48),s.Tb(),s.Tb(),s.Ub(49,"tr"),s.Ub(50,"th"),s.Mc(51,"Unit Charge"),s.Tb(),s.Ub(52,"td"),s.Mc(53),s.Tb(),s.Tb(),s.Ub(54,"tr"),s.Ub(55,"th"),s.Mc(56,"Service Status"),s.Tb(),s.Ub(57,"td"),s.Mc(58),s.Tb(),s.Tb(),s.Kc(59,S,5,1,"tr",4),s.Kc(60,M,5,1,"tr",4),s.Tb(),s.Tb(),s.Tb(),s.Kc(61,B,4,0,"button",10),s.Tb(),s.Tb(),s.Tb(),s.Ub(62,"div",11),s.Kc(63,q,4,0,"button",12),s.Pb(64,"span",13),s.Kc(65,k,4,1,"button",14),s.Kc(66,F,4,0,"button",15),s.Ub(67,"button",16),s.Ub(68,"mat-icon"),s.Mc(69,"list"),s.Tb(),s.Mc(70," All Services"),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.jc(2);s.Bb(11),s.Nc(s.lc(12,15,e.service.code)),s.Bb(6),s.Nc(s.mc(18,17,e.service.tocreation,"medium")),s.Bb(6),s.Nc(null==e.service?null:e.service.creator.userName),s.Bb(10),s.Nc(e.service.code),s.Bb(5),s.Nc(e.service.name),s.Bb(5),s.Nc(e.service.tocreation),s.Bb(5),s.Nc(e.service.unit),s.Bb(5),s.Nc(e.service.unitCharge),s.Bb(5),s.Nc(e.service.serviceStatus),s.Bb(1),s.qc("ngIf",e.service.description),s.Bb(1),s.qc("ngIf",e.service.serviceSuppliers),s.Bb(1),s.qc("appHasRole",s.tc(20,w)),s.Bb(2),s.qc("appHasRole",s.tc(21,I)),s.Bb(2),s.qc("appHasRole",s.tc(22,w)),s.Bb(1),s.qc("appHasRole",s.tc(23,w))}}function C(e,t){if(1&e&&s.Kc(0,D,71,24,"div",4),2&e){const e=s.jc();s.qc("ngIf",e.service)}}const y=function(e){return["Services","Show All Services",e]};let K=(()=>{class e{constructor(e,t,i,a,r){this.serviceService=e,this.route=t,this.dialog=i,this.snackBar=a,this.router=r,this.loadingState=!1,this.route.data.subscribe(({service:e})=>{this.service=e})}ngOnInit(){}delete(){this.dialog.open(d.a,{width:"500px",data:{message:this.service.name}}).afterClosed().subscribe(e=>Object(l.b)(this,void 0,void 0,(function*(){e&&(this.loadingState=!0,this.serviceService.delete(this.service.id).subscribe(()=>{this.snackBar.open("Service Deleted successfully","\u2714",{duration:2e3}),this.router.navigateByUrl("/events")},e=>{console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})))}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(o.a),s.Ob(r.a),s.Ob(u.b),s.Ob(m.a),s.Ob(r.c))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-service-detail"]],decls:4,vars:6,consts:[[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["servicedetail",""],[1,"spinner"],[4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"example-card"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],["routerLink","/services/showsuppliers","mat-stroked-button","","color","primary",4,"appHasRole"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink",4,"appHasRole"],["routerLink","/services/add","mat-stroked-button","",4,"appHasRole"],["routerLink","/services","mat-raised-button","","color","primary",1,"mr-0"],["routerLink","/services/showsuppliers","mat-stroked-button","","color","primary"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/services/add","mat-stroked-button",""]],template:function(e,t){if(1&e&&(s.Pb(0,"app-page-header",0),s.Kc(1,T,2,0,"div",1),s.Kc(2,C,1,1,"ng-template",null,2,s.Lc)),2&e){const e=s.yc(3);s.sc("title","Service Detail Page of ",t.service.code,""),s.qc("breadcrumbSegments",s.uc(4,y,"Details of "+t.service.code)),s.Bb(1),s.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[p.a,a.m,f.b,h.a,h.c,g.a,v.b,r.d,U.a],pipes:[a.v,a.e],styles:[""]}),e})();var P=i("3Pt+"),x=i("kmnG"),O=i("qFsG"),R=i("d3UM"),N=i("FKr1"),j=i("iadO");function L(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Name is required"),s.Tb())}function A(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Name should has at lease ",e.nameField.errors.minlength.requiredLength," characters ")}}function E(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Name length should not exceed ",e.nameField.errors.maxlength.requiredLength," characters ")}}function z(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,L,2,0,"span",7),s.Kc(2,A,2,1,"span",7),s.Kc(3,E,2,1,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.nameField.errors.required),s.Bb(1),s.qc("ngIf",e.nameField.errors.minlength),s.Bb(1),s.qc("ngIf",e.nameField.errors.maxlength)}}function V(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Unit Field is required"),s.Tb())}function H(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Unit length should not exceed ",e.unitField.errors.maxlength.requiredLength," characters, ")}}function $(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,V,2,0,"span",7),s.Kc(2,H,2,1,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.unitField.errors.required),s.Bb(1),s.qc("ngIf",e.unitField.errors.maxlength)}}function G(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Unit ChargeField required"),s.Tb())}function _(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,G,2,0,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.unitChargeField.errors.required)}}function X(e,t){if(1&e&&(s.Ub(0,"mat-option",29),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.qc("value",e.name),s.Bb(1),s.Nc(e.name)}}function Y(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"serviceStatus is required"),s.Tb())}function J(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,Y,2,0,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.serviceStatusField.errors.required)}}function W(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Date Added is required"),s.Tb())}function Q(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,W,2,0,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.tocreationField.errors.required)}}function Z(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Description length should not exceed ",e.descriptionField.errors.maxlength.requiredLength," characters ")}}function ee(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,Z,2,1,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.descriptionField.errors.maxlength)}}const te=function(){return["Services","Add a New Service"]};let ie=(()=>{class e{constructor(e,t,i){this.serviceService=e,this.snackBar=t,this.router=i,this.serviceStatus=[{id:0,name:"Off"},{id:1,name:"Inquairy"},{id:2,name:"Propect"},{id:3,name:"Tentative"},{id:4,name:"Definate"}],this.form=new P.h({name:new P.e("",[P.u.required,P.u.minLength(3),P.u.maxLength(255)]),description:new P.e("",[P.u.required,P.u.maxLength(65535)]),unit:new P.e("",[P.u.required,P.u.maxLength(12)]),unitCharge:new P.e("",[P.u.required]),tocreation:new P.e("",[P.u.required]),serviceStatus:new P.e("",[P.u.required])})}get serviceStatusField(){return this.form.controls.serviceStatus}get unitField(){return this.form.controls.unit}get unitChargeField(){return this.form.controls.unitCharge}get tocreationField(){return this.form.controls.tocreation}get descriptionField(){return this.form.controls.description}get nameField(){return this.form.controls.name}ngOnInit(){}submit(){this.form.invalid||(this.service=this.form.value,this.service.code="SVC"+Math.round(1e5*Math.random()),this.serviceService.add(this.service).subscribe(e=>{this.snackBar.open(" Service creation successfull","\u2714",{duration:2e3}),this.router.navigateByUrl("/services/"+e.id)},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open("Authorization Failed.","Access denied\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}}))}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(o.a),s.Ob(m.a),s.Ob(r.c))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-service-form"]],decls:77,vars:13,consts:[["title","Service Form",3,"breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"col-sm-5"],["matInput","","type","number","formControlName","unit","required",""],[1,"col-sm-7"],["matInput","","type","number","formControlName","unitCharge","required",""],[1,"col-md-6"],["required","","formControlName","serviceStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"spacer"],[1,"col-md-5"],["required","","matInput","","formControlName","tocreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/services","mat-stroked-button","","color","primary",1,"ml-0"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(e,t){if(1&e&&(s.Pb(0,"app-page-header",0),s.Ub(1,"form",1),s.fc("ngSubmit",(function(){return t.submit()})),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-content"),s.Ub(4,"div",2),s.Ub(5,"div",3),s.Ub(6,"div",4),s.Ub(7,"mat-form-field",5),s.Ub(8,"mat-label"),s.Mc(9,"Service Name"),s.Tb(),s.Pb(10,"input",6),s.Ub(11,"mat-hint"),s.Mc(12,"Ex: Buffey"),s.Tb(),s.Kc(13,z,4,3,"mat-error",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(14,"div",2),s.Ub(15,"div",3),s.Ub(16,"div",8),s.Ub(17,"mat-form-field",5),s.Ub(18,"mat-label"),s.Mc(19,"Units"),s.Tb(),s.Pb(20,"input",9),s.Ub(21,"mat-hint"),s.Mc(22,"Ex: 1 or 5"),s.Tb(),s.Kc(23,$,3,2,"mat-error",7),s.Tb(),s.Tb(),s.Ub(24,"div",10),s.Ub(25,"mat-form-field",5),s.Ub(26,"mat-label"),s.Mc(27,"UnitCharge"),s.Tb(),s.Pb(28,"input",11),s.Ub(29,"mat-hint"),s.Mc(30,"Ex $: 7000"),s.Tb(),s.Kc(31,_,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(32,"div",2),s.Ub(33,"div",3),s.Ub(34,"div",12),s.Ub(35,"mat-form-field",5),s.Ub(36,"mat-label"),s.Mc(37,"Service Status"),s.Tb(),s.Ub(38,"mat-select",13),s.Ub(39,"mat-option",14),s.Mc(40,"Select the Type"),s.Tb(),s.Kc(41,X,2,2,"mat-option",15),s.Tb(),s.Kc(42,J,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Pb(43,"span",16),s.Ub(44,"div",17),s.Ub(45,"mat-form-field",5),s.Ub(46,"mat-label"),s.Mc(47,"Date Added"),s.Tb(),s.Pb(48,"input",18),s.Pb(49,"mat-datepicker-toggle",19),s.Ub(50,"mat-datepicker",20,21),s.fc("yearSelected",(function(){return 1992})),s.Tb(),s.Kc(52,Q,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(53,"div",2),s.Ub(54,"mat-form-field",5),s.Ub(55,"mat-label"),s.Mc(56,"Description"),s.Tb(),s.Pb(57,"textarea",22),s.Kc(58,ee,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Ub(59,"div",23),s.Ub(60,"button",24),s.Ub(61,"mat-icon"),s.Mc(62,"list"),s.Tb(),s.Mc(63," All Services"),s.Tb(),s.Pb(64,"span",16),s.Ub(65,"button",25),s.Ub(66,"mat-icon"),s.Mc(67,"refresh"),s.Tb(),s.Mc(68," Clear"),s.Tb(),s.Ub(69,"button",26),s.Ub(70,"mat-icon"),s.Mc(71,"save"),s.Tb(),s.Mc(72," Save"),s.Tb(),s.Tb(),s.Tb(),s.Ub(73,"mat-card-actions",27),s.Ub(74,"span",28),s.Mc(75,"*"),s.Tb(),s.Mc(76," Required Fields "),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.yc(51);s.qc("breadcrumbSegments",s.tc(12,te)),s.Bb(1),s.qc("formGroup",t.form),s.Bb(12),s.qc("ngIf",t.nameField.invalid),s.Bb(10),s.qc("ngIf",t.unitField.invalid),s.Bb(8),s.qc("ngIf",t.unitChargeField.invalid),s.Bb(8),s.qc("value",null),s.Bb(2),s.qc("ngForOf",t.serviceStatus),s.Bb(1),s.qc("ngIf",t.serviceStatusField.invalid),s.Bb(6),s.qc("matDatepicker",e),s.Bb(1),s.qc("for",e),s.Bb(3),s.qc("ngIf",t.tocreationField.invalid),s.Bb(6),s.qc("ngIf",t.descriptionField.invalid)}},directives:[p.a,P.w,P.o,P.i,h.a,h.c,x.c,x.g,O.b,P.c,P.n,P.g,P.t,x.f,a.m,P.r,R.a,N.n,a.l,j.b,j.d,x.h,j.a,v.b,r.d,U.a,h.b,x.b],styles:[""]}),e})();var ae=i("IOme"),re=i("bSwM");function ce(e,t){if(1&e&&(s.Ub(0,"div",11),s.Ub(1,"mat-checkbox",12),s.fc("change",(function(){const e=t.$implicit;return e.checked=!e.checked})),s.Mc(2),s.Tb(),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.rc("value",e.id),s.qc("checked",e.checked),s.Bb(1),s.Nc(e.name)}}let ne=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){this.dialogRef.addPanelClass("custom-dialog"),ae.a.isDark()?this.dialogRef.addPanelClass("dark"):this.dialogRef.addPanelClass("light"),this.service=this.data.service,this.suppliers=this.data.suppliers}updateItems(){this.dialogRef.close(this.suppliers)}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(u.g),s.Ob(u.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-supplier-edit"]],decls:24,vars:4,consts:[[1,"dialog-wrapper"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"message"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["color","accent","mat-raised-button","",1,"mr-0",3,"click"],[1,"form-check"],[1,"example-margin",3,"value","checked","change"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"h1",1),s.Mc(2),s.Tb(),s.Ub(3,"mat-card"),s.Ub(4,"div",2),s.Ub(5,"p"),s.Mc(6,"Are you sure you want to Add \u201c\xa0"),s.Ub(7,"span",3),s.Mc(8),s.Tb(),s.Mc(9,"\xa0\u201ds Suppliers?"),s.Tb(),s.Tb(),s.Ub(10,"div"),s.Ub(11,"form",4,5),s.Kc(13,ce,3,3,"div",6),s.Tb(),s.Tb(),s.Ub(14,"div",7),s.Pb(15,"span",8),s.Ub(16,"button",9),s.Ub(17,"mat-icon"),s.Mc(18,"clear"),s.Tb(),s.Mc(19," No"),s.Tb(),s.Ub(20,"button",10),s.fc("click",(function(){return t.updateItems()})),s.Ub(21,"mat-icon"),s.Mc(22,"edit"),s.Tb(),s.Mc(23," Yes"),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Bb(2),s.Oc("Add Suppliers for ",t.service.name,""),s.Bb(6),s.Nc(t.service.name),s.Bb(5),s.qc("ngForOf",t.suppliers),s.Bb(3),s.qc("mat-dialog-close",!1))},directives:[u.h,h.a,u.e,P.w,P.o,P.p,a.l,u.c,v.b,u.d,U.a,re.a],styles:[".message[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:110%}div[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:-10px}.dialog-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}h1[_ngcontent-%COMP%]{margin-top:-24px;font-size:20px!important;margin-left:-24px!important;margin-right:-24px!important;padding:14px 14px 5px!important;border-bottom:1px solid rgba(0,0,0,.1)}"]}),e})();var se=i("O+Qd"),oe=i("8LTU"),be=i("+0xr"),le=i("M9IT");function de(e,t){1&e&&(s.Ub(0,"div",3),s.Pb(1,"mat-spinner"),s.Ub(2,"h1",4),s.Mc(3,"Loading..."),s.Tb(),s.Tb())}function ue(e,t){1&e&&(s.Ub(0,"th",28),s.Mc(1,"ServiceId"),s.Tb())}function me(e,t){if(1&e&&(s.Ub(0,"td",29),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc("SVC0",e.id,"")}}function pe(e,t){1&e&&(s.Ub(0,"th",28),s.Mc(1,"Service"),s.Tb())}function fe(e,t){if(1&e&&(s.Ub(0,"td",29),s.Mc(1),s.kc(2,"titlecase"),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",s.lc(2,1,e.name)," ")}}function he(e,t){1&e&&(s.Ub(0,"th",28),s.Mc(1,"Active Suppliers"),s.Tb())}function ge(e,t){if(1&e&&(s.Ub(0,"td",29),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",e.serviceSuppliers," ")}}function ve(e,t){1&e&&s.Pb(0,"th",30)}function Ue(e,t){if(1&e){const e=s.Vb();s.Ub(0,"td",31),s.Ub(1,"button",32),s.fc("click",(function(){s.Bc(e);const i=t.$implicit;return s.jc(2).deleteModals(i)})),s.Ub(2,"mat-icon"),s.Mc(3,"delete"),s.Tb(),s.Mc(4," Remove"),s.Tb(),s.Tb()}}function Te(e,t){1&e&&s.Pb(0,"th",30)}function Se(e,t){if(1&e){const e=s.Vb();s.Ub(0,"td",31),s.Ub(1,"button",33),s.fc("click",(function(){s.Bc(e);const i=t.$implicit;return s.jc(2).editSupplierModals(i)})),s.Ub(2,"mat-icon"),s.Mc(3,"edit"),s.Tb(),s.Mc(4," Add Suppliers "),s.Tb(),s.Tb()}}function Me(e,t){1&e&&s.Pb(0,"th",30)}function Be(e,t){if(1&e&&(s.Ub(0,"td",31),s.Ub(1,"button",34),s.Ub(2,"mat-icon"),s.Mc(3,"visibility"),s.Tb(),s.Mc(4," More ..."),s.Tb(),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.sc("routerLink","/services/",e.id,"")}}function qe(e,t){1&e&&s.Pb(0,"tr",35)}function ke(e,t){1&e&&s.Pb(0,"tr",36)}const Fe=function(){return[5,10,25,50,100]};function we(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",5),s.Ub(1,"mat-card"),s.Ub(2,"mat-card-content"),s.Ub(3,"div",6),s.Ub(4,"div",7),s.Ub(5,"div",8),s.Ub(6,"mat-form-field",9),s.Ub(7,"mat-label"),s.Mc(8,"Filter by ID"),s.Tb(),s.Ub(9,"input",10),s.fc("keyup",(function(){return s.Bc(e),s.jc().loadData()})),s.Tb(),s.Tb(),s.Tb(),s.Pb(10,"span",11),s.Ub(11,"div",8),s.Ub(12,"mat-form-field",9),s.Ub(13,"mat-label"),s.Mc(14,"Filter by Service "),s.Tb(),s.Ub(15,"input",10),s.fc("keyup",(function(){return s.Bc(e),s.jc().loadData()})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(16,"div",12),s.Ub(17,"table",13),s.Sb(18,14),s.Kc(19,ue,2,0,"th",15),s.Kc(20,me,2,1,"td",16),s.Rb(),s.Sb(21,17),s.Kc(22,pe,2,0,"th",15),s.Kc(23,fe,3,3,"td",16),s.Rb(),s.Sb(24,18),s.Kc(25,he,2,0,"th",15),s.Kc(26,ge,2,1,"td",16),s.Rb(),s.Sb(27,19),s.Kc(28,ve,1,0,"th",20),s.Kc(29,Ue,5,0,"td",21),s.Rb(),s.Sb(30,22),s.Kc(31,Te,1,0,"th",20),s.Kc(32,Se,5,0,"td",21),s.Rb(),s.Sb(33,23),s.Kc(34,Me,1,0,"th",20),s.Kc(35,Be,5,1,"td",21),s.Rb(),s.Kc(36,qe,1,0,"tr",24),s.Kc(37,ke,1,0,"tr",25),s.Tb(),s.Tb(),s.Ub(38,"div",26),s.Ub(39,"mat-paginator",27),s.fc("page",(function(t){return s.Bc(e),s.jc().paginate(t)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=s.jc();s.Bb(9),s.qc("formControl",e.codeField),s.Bb(6),s.qc("formControl",e.nameField),s.Bb(2),s.qc("dataSource",e.services),s.Bb(19),s.qc("matHeaderRowDef",e.displayedColumns),s.Bb(1),s.qc("matRowDefColumns",e.displayedColumns),s.Bb(2),s.qc("length",e.services.length)("pageSize",25)("pageSizeOptions",s.tc(9,Fe))("showFirstLastButtons",!0)}}const Ie=function(){return["Services","Show All Service Suppliers"]};let De=(()=>{class e{constructor(e,t,i,a,r){this.suppliersToAdd=e,this.dialog=t,this.snackBar=i,this.mappingService=a,this.supplierService=r,this.displayedColumns=["serviceid","service","suppliers","delete-col","update-col","more-col"],this.suppliers=[],this.userParams={},this.pageSize=25,this.pageIndex=1,this.live=!1,this.codeField=new P.e,this.nameField=new P.e}ngOnInit(){this.loadingState=!0,this.live=!0,this.loadData()}paginate(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}ngOnDestroy(){this.loadData(),this.live=!0,this.refreshData()}refreshData(){this.loadData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.id=this.codeField.value,this.supplierService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.suppliers=e.result},e=>{console.log(e),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:3e3})}),this.mappingService.getSuppliersWithServices(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.loadingState=!1,this.services=e.body},e=>{switch(console.log(e),e.status){case 401:case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("there is a problem loading roles\u2757","\u274c",{duration:3e3})}})}editSupplierModals(e){this.dialog.open(ne,{width:"500px",data:{service:e,suppliers:this.getSuppliersArray(e)}}).afterClosed().subscribe(t=>{if(!t)return;this.loadingState=!0;const i={supplierNames:[...t.filter(e=>!0===e.checked).map(e=>e.name)],supplierid:[...t.filter(e=>!0===e.checked).map(e=>e.id)]};i&&this.suppliersToAdd.addSuppliers(e.id,i).subscribe(()=>{e.serviceSuppliers=[...i.supplierNames],this.snackBar.open("Suppliers Added successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Service already been supplied by the Supplier\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}deleteModals(e){this.dialog.open(d.a,{width:"500px",data:{message:e.serviceSuppliers}}).afterClosed().subscribe(t=>{if(!t)return;this.loadingState=!0;const i=this.getSuppliersArray(e),a={supplierNames:[...i.map(e=>e.name)],supplierid:[...i.map(e=>e.id)]};i&&this.suppliersToAdd.removeSuppliers(e.id,a).subscribe(()=>{this.snackBar.open("Suppliers removed successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}getSuppliersArray(e){const t=[],i=e.serviceSuppliers,a=this.suppliers;for(let r=0;r<a.length;r++){let e=!1;for(let c=0;c<i.length;c++)if(a[r].name===i[c]){e=!0,a[r].checked=!0,t.push(a[r]);break}e||(a[r].checked=!1,t.push(a[r]))}return t}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(o.a),s.Ob(u.b),s.Ob(m.a),s.Ob(se.a),s.Ob(oe.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-service-suppliers"]],decls:4,vars:4,consts:[["title","Service Suppliers",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["Supplierlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],[1,"mat-elevation-z8"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[1,"spacer"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","serviceid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","service"],["matColumnDef","suppliers"],["matColumnDef","delete-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","update-col"],["matColumnDef","more-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"click"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(s.Pb(0,"app-page-header",0),s.Kc(1,de,4,0,"div",1),s.Kc(2,we,40,10,"ng-template",null,2,s.Lc)),2&e){const e=s.yc(3);s.qc("breadcrumbSegments",s.tc(3,Ie)),s.Bb(1),s.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[p.a,a.m,f.b,h.a,h.c,x.c,x.g,O.b,P.c,P.n,P.f,be.j,be.c,be.e,be.b,be.g,be.i,le.a,be.d,be.a,v.b,U.a,r.d,be.f,be.h],pipes:[a.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),e})();var Ce=i("qNIJ"),ye=i("rO2v");function Ke(e,t){1&e&&(s.Ub(0,"div",3),s.Pb(1,"mat-spinner"),s.Ub(2,"h1",4),s.Mc(3,"Loading..."),s.Tb(),s.Tb())}function Pe(e,t){1&e&&(s.Ub(0,"button",28),s.Ub(1,"mat-icon"),s.Mc(2,"add"),s.Tb(),s.Mc(3," New Service "),s.Tb())}const xe=function(){return["Admin","Manager","Supervisor","Employee"]};function Oe(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",24),s.Kc(1,Pe,4,0,"button",25),s.Pb(2,"span",26),s.Ub(3,"button",27),s.fc("click",(function(){return s.Bc(e),s.jc(3).loadData()})),s.Ub(4,"mat-icon"),s.Mc(5,"search"),s.Tb(),s.Mc(6," Filter by Date "),s.Tb(),s.Tb()}2&e&&(s.Bb(1),s.qc("appHasRole",s.tc(1,xe)))}function Re(e,t){if(1&e){const e=s.Vb();s.Ub(0,"mat-option",29),s.fc("click",(function(){return s.Bc(e),s.jc(3).loadData()})),s.Mc(1),s.Tb()}if(2&e){const e=t.$implicit;s.qc("value",e.id),s.Bb(1),s.Nc(e.name)}}function Ne(e,t){1&e&&(s.Ub(0,"th",46),s.Mc(1," ID "),s.Tb())}function je(e,t){if(1&e&&(s.Ub(0,"td",47),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",e.code," ")}}function Le(e,t){1&e&&(s.Ub(0,"th",46),s.Mc(1," Name "),s.Tb())}function Ae(e,t){if(1&e&&(s.Ub(0,"td",47),s.Mc(1),s.kc(2,"titlecase"),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",s.lc(2,1,e.name)," ")}}function Ee(e,t){1&e&&(s.Ub(0,"th",46),s.Mc(1," Unit Charge "),s.Tb())}function ze(e,t){if(1&e&&(s.Ub(0,"td",47),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",e.unitCharge," ")}}function Ve(e,t){1&e&&(s.Ub(0,"th",46),s.Mc(1," Service Status "),s.Tb())}function He(e,t){if(1&e&&(s.Ub(0,"td",47),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",e.serviceStatus,"")}}function $e(e,t){1&e&&(s.Ub(0,"th",46),s.Mc(1," Date "),s.Tb())}function Ge(e,t){if(1&e&&(s.Ub(0,"td",47),s.Mc(1),s.kc(2,"date"),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.Oc(" ",s.lc(2,1,e.tocreation),"")}}function _e(e,t){1&e&&s.Pb(0,"th",48)}function Xe(e,t){if(1&e&&(s.Ub(0,"td",49),s.Ub(1,"button",50),s.Ub(2,"mat-icon"),s.Mc(3,"visibility"),s.Tb(),s.Mc(4," More ..."),s.Tb(),s.Tb()),2&e){const e=t.$implicit;s.Bb(1),s.sc("routerLink","/services/",e.id,"")}}function Ye(e,t){1&e&&s.Pb(0,"th",48)}function Je(e,t){if(1&e){const e=s.Vb();s.Ub(0,"button",52),s.fc("click",(function(){s.Bc(e);const t=s.jc().$implicit;return s.jc(4).delete(t)})),s.Ub(1,"mat-icon"),s.Mc(2,"delete"),s.Tb(),s.Mc(3," Delete"),s.Tb()}}const We=function(){return["Admin","Manager"]};function Qe(e,t){1&e&&(s.Ub(0,"td",49),s.Kc(1,Je,4,0,"button",51),s.Tb()),2&e&&(s.Bb(1),s.qc("appHasRole",s.tc(1,We)))}function Ze(e,t){1&e&&s.Pb(0,"th",48)}function et(e,t){if(1&e&&(s.Ub(0,"button",54),s.Ub(1,"mat-icon"),s.Mc(2,"edit"),s.Tb(),s.Mc(3," Change"),s.Tb()),2&e){const e=s.jc().$implicit;s.sc("routerLink","/services/edit/",e.id,"")}}function tt(e,t){1&e&&(s.Ub(0,"td",49),s.Kc(1,et,4,1,"button",53),s.Tb()),2&e&&(s.Bb(1),s.qc("appHasRole",s.tc(1,xe)))}function it(e,t){1&e&&s.Pb(0,"tr",55)}function at(e,t){1&e&&s.Pb(0,"tr",56)}function rt(e,t){if(1&e&&(s.Ub(0,"div",30),s.Ub(1,"table",31),s.Sb(2,32),s.Kc(3,Ne,2,0,"th",33),s.Kc(4,je,2,1,"td",34),s.Rb(),s.Sb(5,35),s.Kc(6,Le,2,0,"th",33),s.Kc(7,Ae,3,3,"td",34),s.Rb(),s.Sb(8,36),s.Kc(9,Ee,2,0,"th",33),s.Kc(10,ze,2,1,"td",34),s.Rb(),s.Sb(11,37),s.Kc(12,Ve,2,0,"th",33),s.Kc(13,He,2,1,"td",34),s.Rb(),s.Sb(14,38),s.Kc(15,$e,2,0,"th",33),s.Kc(16,Ge,3,3,"td",34),s.Rb(),s.Sb(17,39),s.Kc(18,_e,1,0,"th",40),s.Kc(19,Xe,5,1,"td",41),s.Rb(),s.Sb(20,42),s.Kc(21,Ye,1,0,"th",40),s.Kc(22,Qe,2,2,"td",41),s.Rb(),s.Sb(23,43),s.Kc(24,Ze,1,0,"th",40),s.Kc(25,tt,2,2,"td",41),s.Rb(),s.Kc(26,it,1,0,"tr",44),s.Kc(27,at,1,0,"tr",45),s.Tb(),s.Tb()),2&e){const e=s.jc(3);s.Bb(1),s.qc("dataSource",e.serviceDataPage),s.Bb(25),s.qc("matHeaderRowDef",e.displayedColumns),s.Bb(1),s.qc("matRowDefColumns",e.displayedColumns)}}function ct(e,t){1&e&&s.Pb(0,"app-empty-data-table",57)}const nt=function(){return["Admin"]},st=function(){return[5,10,25,50,100]};function ot(e,t){if(1&e){const e=s.Vb();s.Ub(0,"div",6),s.Ub(1,"mat-card"),s.Ub(2,"mat-card-content"),s.Kc(3,Oe,7,2,"div",7),s.Ub(4,"div",8),s.Ub(5,"div",9),s.Ub(6,"div",10),s.Ub(7,"mat-form-field",11),s.Ub(8,"mat-label"),s.Mc(9,"Filter by Name"),s.Tb(),s.Ub(10,"input",12),s.fc("keyup",(function(){return s.Bc(e),s.jc(2).loadData()})),s.Tb(),s.Tb(),s.Tb(),s.Ub(11,"div",10),s.Ub(12,"mat-form-field",11),s.Ub(13,"mat-label"),s.Mc(14,"Filter by ID"),s.Tb(),s.Ub(15,"input",12),s.fc("keyup",(function(){return s.Bc(e),s.jc(2).loadData()})),s.Tb(),s.Tb(),s.Tb(),s.Ub(16,"div",10),s.Ub(17,"mat-form-field",11),s.Ub(18,"mat-label"),s.Mc(19,"Filter by Status"),s.Tb(),s.Ub(20,"mat-select",13),s.Ub(21,"mat-option",14),s.fc("click",(function(){return s.Bc(e),s.jc(2).loadData()})),s.Mc(22,"Any Status"),s.Tb(),s.Kc(23,Re,2,2,"mat-option",15),s.Tb(),s.Tb(),s.Tb(),s.Ub(24,"div",10),s.Ub(25,"mat-form-field",11),s.Ub(26,"mat-label"),s.Mc(27,"Start Date"),s.Tb(),s.Pb(28,"input",16),s.Pb(29,"mat-datepicker-toggle",17),s.Pb(30,"mat-datepicker",null,18),s.Tb(),s.Ub(32,"mat-form-field",11),s.Ub(33,"mat-label"),s.Mc(34,"End Date"),s.Tb(),s.Pb(35,"input",16),s.Pb(36,"mat-datepicker-toggle",17),s.Pb(37,"mat-datepicker",null,19),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Kc(39,rt,28,3,"div",20),s.Kc(40,ct,1,0,"app-empty-data-table",21),s.Ub(41,"div",22),s.Ub(42,"mat-paginator",23),s.fc("page",(function(t){return s.Bc(e),s.jc(2).paginate(t)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){const e=s.yc(31),t=s.yc(38),i=s.jc(2);s.Bb(3),s.qc("appHasRole",s.tc(18,nt)),s.Bb(7),s.qc("formControl",i.nameField),s.Bb(5),s.qc("formControl",i.codeField),s.Bb(5),s.qc("formControl",i.serviceStatusField),s.Bb(1),s.qc("value",null),s.Bb(2),s.qc("ngForOf",i.serviceStatus),s.Bb(5),s.qc("matDatepicker",e)("formControl",i.startDateField),s.Bb(1),s.qc("for",e),s.Bb(6),s.qc("matDatepicker",t)("formControl",i.endDateField),s.Bb(1),s.qc("for",t),s.Bb(3),s.qc("ngIf",i.serviceDataPage.length>0),s.Bb(1),s.qc("ngIf",0===i.serviceDataPage.length),s.Bb(2),s.qc("length",i.pagination.totalItems)("pageSize",i.pagination.itemsPerPage)("pageSizeOptions",s.tc(19,st))("showFirstLastButtons",!0)}}function bt(e,t){if(1&e&&s.Kc(0,ot,43,20,"div",5),2&e){const e=s.jc();s.qc("ngIf",void 0!==e.serviceDataPage)}}const lt=function(){return["Services","Show All Services"]};function dt(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Name is required"),s.Tb())}function ut(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Name should has at lease ",e.nameField.errors.minlength.requiredLength," characters ")}}function mt(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Name length should not exceed ",e.nameField.errors.maxlength.requiredLength," characters ")}}function pt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,dt,2,0,"span",7),s.Kc(2,ut,2,1,"span",7),s.Kc(3,mt,2,1,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.nameField.errors.required),s.Bb(1),s.qc("ngIf",e.nameField.errors.minlength),s.Bb(1),s.qc("ngIf",e.nameField.errors.maxlength)}}function ft(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Unit Field is required"),s.Tb())}function ht(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Unit length should not exceed ",e.unitField.errors.maxlength.requiredLength," characters, ")}}function gt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,ft,2,0,"span",7),s.Kc(2,ht,2,1,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.unitField.errors.required),s.Bb(1),s.qc("ngIf",e.unitField.errors.maxlength)}}function vt(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Unit ChargeField required"),s.Tb())}function Ut(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,vt,2,0,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.unitChargeField.errors.required)}}function Tt(e,t){if(1&e&&(s.Ub(0,"mat-option",29),s.Mc(1),s.Tb()),2&e){const e=t.$implicit;s.qc("value",e.name),s.Bb(1),s.Nc(e.name)}}function St(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"ServiceStatus is required"),s.Tb())}function Mt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,St,2,0,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.serviceStatusField.errors.required)}}function Bt(e,t){1&e&&(s.Ub(0,"span"),s.Mc(1,"Date Added is required"),s.Tb())}function qt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,Bt,2,0,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.tocreationField.errors.required)}}function kt(e,t){if(1&e&&(s.Ub(0,"span"),s.Mc(1),s.Tb()),2&e){const e=s.jc(2);s.Bb(1),s.Oc("Description length should not exceed ",e.descriptionField.errors.maxlength.requiredLength," characters ")}}function Ft(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.Kc(1,kt,2,1,"span",7),s.Tb()),2&e){const e=s.jc();s.Bb(1),s.qc("ngIf",e.descriptionField.errors.maxlength)}}const wt=function(e){return["Services","Show All Services",e]},It=[{path:"",component:(()=>{class e{constructor(e,t,i){this.serviceService=e,this.dialog=t,this.snackBar=i,this.userParams={},this.displayedColumns=["code","name","unitCharge","status","tocreation","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.serviceStatus=[{id:0,name:"Off"},{id:1,name:"Inquairy"},{id:2,name:"Propect"},{id:3,name:"Tentative"},{id:4,name:"Definate"}],this.nameField=new P.e,this.codeField=new P.e,this.serviceStatusField=new P.e,this.startDateField=new P.e,this.endDateField=new P.e}ngOnInit(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.code=this.codeField.value,this.userParams.serviceStatus=this.serviceStatusField.value,this.userParams.startDate=Ce.a.getDateAsString(this.startDateField.value),this.userParams.endDate=Ce.a.getDateAsString(this.endDateField.value),this.serviceService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.loadingState=!1,this.serviceDataPage=e.result,this.pagination=e.pagination},e=>{switch(e.status){case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("error loading data ","Error",{duration:3e3})}})}refreshData(){this.loadData()}paginate(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}ngOnDestroy(){this.live=!1}delete(e){this.dialog.open(d.a,{width:"500px",data:{message:e.name}}).afterClosed().subscribe(t=>{t&&(this.loadingState=!0,this.serviceService.delete(e.id).subscribe(()=>{this.snackBar.open("Service Deleted successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(o.a),s.Ob(u.b),s.Ob(m.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-service-table"]],decls:4,vars:4,consts:[["title","Services",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["servicelist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["class","text-right mb-2 d-flex",4,"appHasRole"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[3,"formControl"],["selected","",3,"value","click"],[3,"value","click",4,"ngFor","ngForOf"],["required","","matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""],["picker1",""],["class","table-responsive table-striped",4,"ngIf"],["message","No services to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"text-right","mb-2","d-flex"],["class","mx-0","routerLink","/services/add","mat-raised-button","","color","primary",4,"appHasRole"],[1,"spacer"],["mat-stroked-button","","color","primary",1,"mx-0",3,"click"],["routerLink","/services/add","mat-raised-button","","color","primary",1,"mx-0"],[3,"value","click"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","unitCharge"],["matColumnDef","status"],["matColumnDef","tocreation"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["class","mat-btn-sm","mat-raised-button","","color","accent",3,"routerLink",4,"appHasRole"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No services to show"]],template:function(e,t){if(1&e&&(s.Pb(0,"app-page-header",0),s.Kc(1,Ke,4,0,"div",1),s.Kc(2,bt,1,1,"ng-template",null,2,s.Lc)),2&e){const e=s.yc(3);s.qc("breadcrumbSegments",s.tc(3,lt)),s.Bb(1),s.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[p.a,a.m,f.b,h.a,h.c,g.a,x.c,x.g,O.b,P.c,P.n,P.f,R.a,N.n,a.l,j.b,P.t,j.d,x.h,j.a,le.a,v.b,U.a,r.d,be.j,be.c,be.e,be.b,be.g,be.i,be.d,be.a,be.f,be.h,ye.a],pipes:[a.v,a.e],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),e})()},{path:"add",component:ie},{path:"showsuppliers",component:De},{path:":id",component:K,resolve:{service:b}},{path:"edit/:id",component:(()=>{class e{constructor(e,t,i,a){this.serviceService=e,this.route=t,this.snackBar=i,this.router=a,this.serviceStatus=[{id:0,name:"Off"},{id:1,name:"Inquairy"},{id:2,name:"Propect"},{id:3,name:"Tentative"},{id:4,name:"Definate"}],this.form=new P.h({name:new P.e("",[P.u.required,P.u.minLength(3),P.u.maxLength(255)]),description:new P.e("",[P.u.required,P.u.maxLength(65535)]),unit:new P.e("",[P.u.required,P.u.maxLength(12)]),unitCharge:new P.e("",[P.u.required]),tocreation:new P.e("",[P.u.required]),serviceStatus:new P.e("",[P.u.required])}),this.route.data.subscribe(({service:e})=>{this.service=e,this.serviceId=e.id,this.setValues()})}get serviceStatusField(){return this.form.controls.serviceStatus}get unitField(){return this.form.controls.unit}get unitChargeField(){return this.form.controls.unitCharge}get tocreationField(){return this.form.controls.tocreation}get descriptionField(){return this.form.controls.description}get nameField(){return this.form.controls.name}ngOnInit(){}discardChanges(){this.setValues()}submit(){this.form.invalid||(this.service=this.form.value,this.service.code="EVT"+Math.round(1e5*Math.random()),this.serviceService.update(this.serviceId,this.service).subscribe(()=>{this.snackBar.open("Service successfully Updated","\u2714",{duration:2e3}),this.router.navigateByUrl("/services")},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(e.error.message,"Error\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}}))}setValues(){this.descriptionField.pristine&&this.descriptionField.setValue(this.service.description),this.unitField.pristine&&this.unitField.patchValue(this.service.unit),this.serviceStatusField.pristine&&this.serviceStatusField.patchValue(this.service.serviceStatus),this.unitChargeField.pristine&&this.unitChargeField.patchValue(this.service.unitCharge),this.tocreationField.pristine&&this.tocreationField.patchValue(this.service.tocreation),this.nameField.pristine&&this.nameField.patchValue(this.service.name)}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(o.a),s.Ob(r.a),s.Ob(m.a),s.Ob(r.c))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-service-update-form"]],decls:77,vars:15,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"col-sm-5"],["matInput","","formControlName","unit","required",""],[1,"col-sm-7"],["matInput","","formControlName","unitCharge","required",""],[1,"col-md-6"],["required","","formControlName","serviceStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"spacer"],[1,"col-md-5"],["required","","matInput","","formControlName","tocreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/services","mat-stroked-button","","color","primary",1,"ml-0"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(e,t){if(1&e&&(s.Pb(0,"app-page-header",0),s.Ub(1,"form",1),s.fc("ngSubmit",(function(){return t.submit()})),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-content"),s.Ub(4,"div",2),s.Ub(5,"div",3),s.Ub(6,"div",4),s.Ub(7,"mat-form-field",5),s.Ub(8,"mat-label"),s.Mc(9,"Service Name"),s.Tb(),s.Pb(10,"input",6),s.Ub(11,"mat-hint"),s.Mc(12,"Ex: BallRoom"),s.Tb(),s.Kc(13,pt,4,3,"mat-error",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(14,"div",2),s.Ub(15,"div",3),s.Ub(16,"div",8),s.Ub(17,"mat-form-field",5),s.Ub(18,"mat-label"),s.Mc(19,"Units"),s.Tb(),s.Pb(20,"input",9),s.Ub(21,"mat-hint"),s.Mc(22,"Ex: 1 or 5"),s.Tb(),s.Kc(23,gt,3,2,"mat-error",7),s.Tb(),s.Tb(),s.Ub(24,"div",10),s.Ub(25,"mat-form-field",5),s.Ub(26,"mat-label"),s.Mc(27,"UnitCharge"),s.Tb(),s.Pb(28,"input",11),s.Ub(29,"mat-hint"),s.Mc(30,"Ex $: 7000"),s.Tb(),s.Kc(31,Ut,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(32,"div",2),s.Ub(33,"div",3),s.Ub(34,"div",12),s.Ub(35,"mat-form-field",5),s.Ub(36,"mat-label"),s.Mc(37,"Service Status"),s.Tb(),s.Ub(38,"mat-select",13),s.Ub(39,"mat-option",14),s.Mc(40,"Select the Type"),s.Tb(),s.Kc(41,Tt,2,2,"mat-option",15),s.Tb(),s.Kc(42,Mt,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Pb(43,"span",16),s.Ub(44,"div",17),s.Ub(45,"mat-form-field",5),s.Ub(46,"mat-label"),s.Mc(47,"Date Added"),s.Tb(),s.Pb(48,"input",18),s.Pb(49,"mat-datepicker-toggle",19),s.Ub(50,"mat-datepicker",20,21),s.fc("yearSelected",(function(){return 1992})),s.Tb(),s.Kc(52,qt,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(53,"div",2),s.Ub(54,"mat-form-field",5),s.Ub(55,"mat-label"),s.Mc(56,"Description"),s.Tb(),s.Pb(57,"textarea",22),s.Kc(58,Ft,2,1,"mat-error",7),s.Tb(),s.Tb(),s.Ub(59,"div",23),s.Ub(60,"button",24),s.Ub(61,"mat-icon"),s.Mc(62,"list"),s.Tb(),s.Mc(63," All Services"),s.Tb(),s.Pb(64,"span",16),s.Ub(65,"button",25),s.fc("click",(function(){return t.discardChanges()})),s.Ub(66,"mat-icon"),s.Mc(67,"refresh"),s.Tb(),s.Mc(68," Clear"),s.Tb(),s.Ub(69,"button",26),s.Ub(70,"mat-icon"),s.Mc(71,"save"),s.Tb(),s.Mc(72," Save"),s.Tb(),s.Tb(),s.Tb(),s.Ub(73,"mat-card-actions",27),s.Ub(74,"span",28),s.Mc(75,"*"),s.Tb(),s.Mc(76," Required Fields "),s.Tb(),s.Tb(),s.Tb()),2&e){const e=s.yc(51);s.sc("title","Service Change Form of ",t.service.code,""),s.qc("breadcrumbSegments",s.uc(13,wt,"Change Details of "+t.service.code)),s.Bb(1),s.qc("formGroup",t.form),s.Bb(12),s.qc("ngIf",t.nameField.invalid),s.Bb(10),s.qc("ngIf",t.unitField.invalid),s.Bb(8),s.qc("ngIf",t.unitChargeField.invalid),s.Bb(8),s.qc("value",null),s.Bb(2),s.qc("ngForOf",t.serviceStatus),s.Bb(1),s.qc("ngIf",t.serviceStatusField.invalid),s.Bb(6),s.qc("matDatepicker",e),s.Bb(1),s.qc("for",e),s.Bb(3),s.qc("ngIf",t.tocreationField.invalid),s.Bb(6),s.qc("ngIf",t.descriptionField.invalid)}},directives:[p.a,P.w,P.o,P.i,h.a,h.c,x.c,x.g,O.b,P.c,P.n,P.g,P.t,x.f,a.m,R.a,N.n,a.l,j.b,j.d,x.h,j.a,v.b,r.d,U.a,h.b,x.b],styles:[""]}),e})(),resolve:{service:b}}];let Dt=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(It)],r.g]}),e})();var Ct=i("hctd"),yt=i("FpXt");let Kt=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[a.c,Dt,yt.a,Ct.a,P.s,P.j]]}),e})()}}]);