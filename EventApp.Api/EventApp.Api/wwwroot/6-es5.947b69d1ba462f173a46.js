!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{CC9r:function(t,n,a){"use strict";a.r(n),a.d(n,"CustomersModule",(function(){return Ht}));var c=a("ofXK"),i=a("tyNb"),o=a("mrSG"),s=a("zHse"),b=a("fXoL"),m=a("TZGB"),u=a("0IaG"),l=a("dNgK"),d=a("5VPf"),f=a("Xa2L"),p=a("Wp6s"),h=a("yX84"),g=a("bTqV"),T=a("NFeN");function U(e,t){1&e&&(b.Ub(0,"div",3),b.Pb(1,"mat-spinner"),b.Tb())}function v(e,t){if(1&e&&(b.Ub(0,"tr"),b.Ub(1,"th"),b.Mc(2,"Passport Number"),b.Tb(),b.Ub(3,"td"),b.Mc(4),b.Tb(),b.Tb()),2&e){var r=b.jc(3);b.Bb(4),b.Nc(r.customer.passport)}}function B(e,t){if(1&e&&(b.Ub(0,"tr"),b.Ub(1,"th"),b.Mc(2,"Description"),b.Tb(),b.Ub(3,"td"),b.Mc(4),b.Tb(),b.Tb()),2&e){var r=b.jc(3);b.Bb(4),b.Nc(r.customer.description)}}function q(e,t){if(1&e){var r=b.Vb();b.Ub(0,"button",16),b.fc("click",(function(){return b.Bc(r),b.jc(3).delete()})),b.Ub(1,"mat-icon"),b.Mc(2,"delete"),b.Tb(),b.Mc(3," Delete"),b.Tb()}}var M=function(){return["Admin","Manager"]};function I(e,t){if(1&e&&(b.Ub(0,"div"),b.Ub(1,"div",5),b.Ub(2,"div",6),b.Ub(3,"mat-card",7),b.Ub(4,"mat-card-content"),b.Ub(5,"table",8),b.Ub(6,"tbody"),b.Ub(7,"tr"),b.Ub(8,"th"),b.Mc(9,"ID"),b.Tb(),b.Ub(10,"td"),b.Mc(11),b.kc(12,"titlecase"),b.Tb(),b.Tb(),b.Ub(13,"tr"),b.Ub(14,"th"),b.Mc(15,"Created At"),b.Tb(),b.Ub(16,"td"),b.Mc(17),b.kc(18,"date"),b.Tb(),b.Tb(),b.Ub(19,"tr"),b.Ub(20,"th"),b.Mc(21,"Creator"),b.Tb(),b.Ub(22,"td"),b.Mc(23),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(24,"div",9),b.Ub(25,"mat-card",7),b.Ub(26,"mat-card-content"),b.Ub(27,"table",8),b.Ub(28,"tbody"),b.Ub(29,"tr"),b.Ub(30,"th"),b.Mc(31,"ID"),b.Tb(),b.Ub(32,"td"),b.Mc(33),b.Tb(),b.Tb(),b.Ub(34,"tr"),b.Ub(35,"th"),b.Mc(36,"Name"),b.Tb(),b.Ub(37,"td"),b.Mc(38),b.Tb(),b.Tb(),b.Ub(39,"tr"),b.Ub(40,"th"),b.Mc(41,"NIC Number"),b.Tb(),b.Ub(42,"td"),b.Mc(43),b.Tb(),b.Tb(),b.Kc(44,v,5,1,"tr",4),b.Ub(45,"tr"),b.Ub(46,"th"),b.Mc(47,"Contacts"),b.Tb(),b.Ub(48,"td"),b.Mc(49),b.Tb(),b.Tb(),b.Ub(50,"tr"),b.Ub(51,"th"),b.Mc(52,"Email Address"),b.Tb(),b.Ub(53,"td"),b.Mc(54),b.Tb(),b.Tb(),b.Ub(55,"tr"),b.Ub(56,"th"),b.Mc(57,"Address"),b.Tb(),b.Ub(58,"td"),b.Mc(59),b.Tb(),b.Tb(),b.Ub(60,"tr"),b.Ub(61,"th"),b.Mc(62,"Customer Type"),b.Tb(),b.Ub(63,"td"),b.Mc(64),b.Tb(),b.Tb(),b.Kc(65,B,5,1,"tr",4),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(66,"div",10),b.Kc(67,q,4,0,"button",11),b.Pb(68,"span",12),b.Ub(69,"button",13),b.Ub(70,"mat-icon"),b.Mc(71,"edit"),b.Tb(),b.Mc(72," Change"),b.Tb(),b.Ub(73,"button",14),b.Ub(74,"mat-icon"),b.Mc(75,"add"),b.Tb(),b.Mc(76," New Customer"),b.Tb(),b.Ub(77,"button",15),b.Ub(78,"mat-icon"),b.Mc(79,"list"),b.Tb(),b.Mc(80," All Customers"),b.Tb(),b.Tb(),b.Tb()),2&e){var r=b.jc(2);b.Bb(11),b.Nc(b.lc(12,15,r.customer.code)),b.Bb(6),b.Nc(b.mc(18,17,r.customer.tocreation,"medium")),b.Bb(6),b.Nc(null==r.customer?null:r.customer.creator.userName),b.Bb(10),b.Nc(r.customer.code),b.Bb(5),b.Nc(r.customer.name),b.Bb(5),b.Nc(r.customer.nic),b.Bb(1),b.qc("ngIf",r.customer.passport),b.Bb(5),b.Pc("",r.customer.contact1,"",r.customer.contact2?", "+r.customer.contact2:"",""),b.Bb(5),b.Nc(r.customer.email),b.Bb(5),b.Nc(r.customer.address),b.Bb(5),b.Nc(r.customer.customerType),b.Bb(1),b.qc("ngIf",r.customer.description),b.Bb(2),b.qc("appHasRole",b.tc(20,M)),b.Bb(2),b.sc("routerLink","/customers/edit/",r.customer.id,"")}}function F(e,t){if(1&e&&b.Kc(0,I,81,21,"div",4),2&e){var r=b.jc();b.qc("ngIf",r.customer)}}var y,C=((y=function(){function t(r,n,a,c,i){var o=this;e(this,t),this.customerService=r,this.route=n,this.dialog=a,this.snackBar=c,this.router=i,this.title="Customer Detail Page",this.breadcrumbSegments=["Customers","Show All Customers","Details"],this.loadingState=!1,this.route.data.subscribe((function(e){var t=e.customer;o.customer=t,o.title+=" of "+t.code,o.breadcrumbSegments[2]="Details of "+t.code}))}return r(t,[{key:"ngOnInit",value:function(){}},{key:"delete",value:function(){var e=this;this.dialog.open(s.a,{width:"300px",data:{message:this.customer.name}}).afterClosed().subscribe((function(t){return Object(o.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(this.loadingState=!0,this.customerService.delete(this.customer.id).subscribe((function(){r.snackBar.open("customer Deleted successfully","\u2714",{duration:2e3}),r.router.navigateByUrl("/customers")}),(function(e){console.log(e),r.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),r.loadingState=!1})));case 1:case"end":return e.stop()}}),e,this)})))}))}}]),t}()).\u0275fac=function(e){return new(e||y)(b.Ob(m.a),b.Ob(i.a),b.Ob(u.b),b.Ob(l.a),b.Ob(i.c))},y.\u0275cmp=b.Ib({type:y,selectors:[["app-customer-detail"]],decls:4,vars:4,consts:[[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["customerdetail",""],[1,"spinner"],[4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"example-card"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/customers/add","mat-stroked-button",""],["routerLink","/customers","mat-raised-button","","color","primary",1,"mr-0"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"]],template:function(e,t){if(1&e&&(b.Pb(0,"app-page-header",0),b.Kc(1,U,2,0,"div",1),b.Kc(2,F,1,1,"ng-template",null,2,b.Lc)),2&e){var r=b.yc(3);b.qc("title",t.title)("breadcrumbSegments",t.breadcrumbSegments),b.Bb(1),b.qc("ngIf",t.loadingState)("ngIfElse",r)}},directives:[d.a,c.m,f.b,p.a,p.c,h.a,g.b,i.d,T.a],pipes:[c.v,c.e],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),y),K=a("3Pt+"),x=a("ohFZ"),k=a("kmnG"),w=a("d3UM"),N=a("FKr1"),L=a("qFsG");function S(e,t){if(1&e&&(b.Ub(0,"mat-option",29),b.Mc(1),b.Tb()),2&e){var r=t.$implicit;b.qc("value",r.id),b.Bb(1),b.Nc(r.name)}}function j(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"customerType is required"),b.Tb())}function O(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,j,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.customertypeField.errors.required)}}function P(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Name is required"),b.Tb())}function D(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Name should has at lease ",r.nameField.errors.minlength.requiredLength," characters ")}}function E(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Name length should not exceed ",r.nameField.errors.maxlength.requiredLength," characters ")}}function A(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid Name"),b.Tb())}function R(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Name Already Exists."),b.Tb())}function V(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,P,2,0,"span",9),b.Kc(2,D,2,1,"span",9),b.Kc(3,E,2,1,"span",9),b.Kc(4,A,2,0,"span",9),b.Kc(5,R,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.nameField.errors.required),b.Bb(1),b.qc("ngIf",r.nameField.errors.minlength),b.Bb(1),b.qc("ngIf",r.nameField.errors.maxlength),b.Bb(1),b.qc("ngIf",r.nameField.errors.pattern),b.Bb(1),b.qc("ngIf",r.nameField.errors.validate)}}function z(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"NIC Number is required"),b.Tb())}function $(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("NIC Number should has at lease ",r.nicField.errors.minlength.requiredLength," characters, ")}}function G(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("NIC Number length should not exceed ",r.nicField.errors.maxlength.requiredLength," characters, ")}}function H(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid NIC number"),b.Tb())}function X(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"NIC Already Exists."),b.Tb())}function Z(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,z,2,0,"span",9),b.Kc(2,$,2,1,"span",9),b.Kc(3,G,2,1,"span",9),b.Kc(4,H,2,0,"span",9),b.Kc(5,X,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.nicField.errors.required),b.Bb(1),b.qc("ngIf",r.nicField.errors.minlength),b.Bb(1),b.qc("ngIf",r.nicField.errors.maxlength),b.Bb(1),b.qc("ngIf",r.nicField.errors.pattern),b.Bb(1),b.qc("ngIf",r.nicField.errors.validate)}}function J(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("passport Number should has at lease ",r.passportField.errors.minlength.requiredLength," characters, ")}}function Y(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid passport number"),b.Tb())}function _(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Passport Already Exists."),b.Tb())}function W(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,J,2,1,"span",9),b.Kc(2,Y,2,0,"span",9),b.Kc(3,_,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.passportField.errors.minlength),b.Bb(1),b.qc("ngIf",r.passportField.errors.pattern),b.Bb(1),b.qc("ngIf",r.passportField.errors.validate)}}function Q(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Primary contact number is required"),b.Tb())}function ee(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Contact Number should has at lease ",r.contact1Field.errors.minlength.requiredLength," characters, ")}}function te(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Contact Number length should not exceed ",r.contact1Field.errors.maxlength.requiredLength," characters, ")}}function re(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid contact number"),b.Tb())}function ne(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Contact Number Already Exists."),b.Tb())}function ae(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,Q,2,0,"span",9),b.Kc(2,ee,2,1,"span",9),b.Kc(3,te,2,1,"span",9),b.Kc(4,re,2,0,"span",9),b.Kc(5,ne,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.contact1Field.errors.required),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.minlength),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.maxlength),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.pattern),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.validate)}}function ce(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Contact number should has at lease ",r.contact2Field.errors.minlength.requiredLength," characters, ")}}function ie(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Contact nUmber length should not exceed ",r.contact2Field.errors.maxlength.requiredLength," characters, ")}}function oe(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid contact number"),b.Tb())}function se(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,ce,2,1,"span",9),b.Kc(2,ie,2,1,"span",9),b.Kc(3,oe,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.contact2Field.errors.minlength),b.Bb(1),b.qc("ngIf",r.contact2Field.errors.maxlength),b.Bb(1),b.qc("ngIf",r.contact2Field.errors.pattern)}}function be(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Email address should has at lease ",r.emailField.errors.minlength.requiredLength," characters, ")}}function me(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Email address length should not exceed ",r.emailField.errors.maxlength.requiredLength," characters, ")}}function ue(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid email address"),b.Tb())}function le(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Email address Already Exists."),b.Tb())}function de(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,be,2,1,"span",9),b.Kc(2,me,2,1,"span",9),b.Kc(3,ue,2,0,"span",9),b.Kc(4,le,2,0,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.emailField.errors.minlength),b.Bb(1),b.qc("ngIf",r.emailField.errors.maxlength),b.Bb(1),b.qc("ngIf",r.emailField.errors.email),b.Bb(1),b.qc("ngIf",r.emailField.errors.validate)}}function fe(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Address is required"),b.Tb())}function pe(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Address should has at lease ",r.addressField.errors.minlength.requiredLength," characters ")}}function he(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Address length should not exceed ",r.addressField.errors.maxlength.requiredLength," characters ")}}function ge(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,fe,2,0,"span",9),b.Kc(2,pe,2,1,"span",9),b.Kc(3,he,2,1,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.addressField.errors.required),b.Bb(1),b.qc("ngIf",r.addressField.errors.minlength),b.Bb(1),b.qc("ngIf",r.addressField.errors.maxlength)}}function Te(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.Oc("Description length should not exceed ",r.descriptionField.errors.maxlength.requiredLength," characters ")}}function Ue(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,Te,2,1,"span",9),b.Tb()),2&e){var r=b.jc();b.Bb(1),b.qc("ngIf",r.descriptionField.errors.maxlength)}}var ve,Be=((ve=function(){function t(r,n,a,c){e(this,t),this.customerService=r,this.snackBar=n,this.asyncValidation=a,this.router=c,this.title="Customer Form",this.breadcrumbSegments=["Customers","Add New Customer"],this.customerTypes=[{id:1,name:"Company"},{id:2,name:"Person"}],this.form=new K.h({name:new K.e("",[K.u.required,K.u.minLength(3),K.u.maxLength(255),K.u.pattern("[a-zA-Z-,]+(s{0,1}[a-zA-Z-, ])*$")],[this.asyncValidation.validateCustomerName]),nic:new K.e("",[K.u.required,K.u.minLength(10),K.u.maxLength(12),K.u.pattern("^(([0-9]{12})|([0-9]{9}[vVxX]))$")],[this.asyncValidation.validateCustomerNic]),contact1:new K.e("",[K.u.required,K.u.minLength(9),K.u.maxLength(10),K.u.pattern("^([0]?[0-9]{9})$")],[this.asyncValidation.validateCustomerMobile]),contact2:new K.e("",[K.u.minLength(9),K.u.maxLength(10),K.u.pattern("^([0]?[0-9]{9})$")]),email:new K.e("",[K.u.minLength(4),K.u.maxLength(255),K.u.email],[this.asyncValidation.validateCustomerEmail]),address:new K.e("",[K.u.required,K.u.minLength(4),K.u.maxLength(65535)]),description:new K.e("",[K.u.maxLength(65535)]),customertype:new K.e("",[K.u.required]),passport:new K.e("",[K.u.minLength(10)],[this.asyncValidation.validateCustomerPassport])})}return r(t,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){var e=this;this.form.invalid||(this.customer=this.form.value,this.customer.code="CU"+Math.round(1e5*Math.random()),this.customerService.add(this.customer).subscribe((function(t){e.snackBar.open("customer created successfully",null,{duration:2e3}),e.router.navigateByUrl("/customers/"+t.id)}),(function(t){switch(t.status){case 401:e.snackBar.open("Authentication Failed. You have to login again",null,{duration:2e3}),setTimeout((function(){e.router.navigateByUrl("/login")}),500);break;case 403:e.snackBar.open(t.error.message,"Error",{duration:2e3}),setTimeout((function(){e.router.navigateByUrl("/")}),500);break;case 400:e.snackBar.open("Validation Error","Error",{duration:2e3});break;default:e.snackBar.open("Something went wrong","Error",{duration:2e3})}})))}},{key:"nameField",get:function(){return this.form.controls.name}},{key:"customertypeField",get:function(){return this.form.controls.customertype}},{key:"nicField",get:function(){return this.form.controls.nic}},{key:"passportField",get:function(){return this.form.controls.nic}},{key:"contact1Field",get:function(){return this.form.controls.contact1}},{key:"contact2Field",get:function(){return this.form.controls.contact2}},{key:"emailField",get:function(){return this.form.controls.email}},{key:"addressField",get:function(){return this.form.controls.address}},{key:"descriptionField",get:function(){return this.form.controls.description}}]),t}()).\u0275fac=function(e){return new(e||ve)(b.Ob(m.a),b.Ob(l.a),b.Ob(x.a),b.Ob(i.c))},ve.\u0275cmp=b.Ib({type:ve,selectors:[["app-customer-form"]],decls:99,vars:14,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","customertype"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","formControlName","nic","required",""],[1,"col-sm-7"],["matInput","","formControlName","passport"],[1,"col-md-4"],["matInput","","formControlName","contact1","required",""],["matInput","","formControlName","contact2"],["matInput","","formControlName","email"],["matInput","","formControlName","address","required",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/customers","mat-stroked-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(e,t){1&e&&(b.Pb(0,"app-page-header",0),b.Ub(1,"form",1),b.fc("ngSubmit",(function(){return t.submit()})),b.Ub(2,"mat-card"),b.Ub(3,"mat-card-content"),b.Ub(4,"div",2),b.Ub(5,"div",3),b.Ub(6,"div",4),b.Ub(7,"mat-form-field",5),b.Ub(8,"mat-label"),b.Mc(9,"Customer Type"),b.Tb(),b.Ub(10,"mat-select",6),b.Ub(11,"mat-option",7),b.Mc(12,"Select the Type"),b.Tb(),b.Kc(13,S,2,2,"mat-option",8),b.Tb(),b.Kc(14,O,2,1,"mat-error",9),b.Tb(),b.Tb(),b.Ub(15,"div",10),b.Ub(16,"mat-form-field",5),b.Ub(17,"mat-label"),b.Mc(18,"Name"),b.Tb(),b.Pb(19,"input",11),b.Ub(20,"mat-hint"),b.Mc(21,"Ex: Json Smith"),b.Tb(),b.Kc(22,V,6,5,"mat-error",9),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(23,"div",2),b.Ub(24,"div",3),b.Ub(25,"div",12),b.Ub(26,"mat-form-field",5),b.Ub(27,"mat-label"),b.Mc(28,"NIC Number"),b.Tb(),b.Pb(29,"input",13),b.Ub(30,"mat-hint"),b.Mc(31,"Ex: 789456123V or 197894506123"),b.Tb(),b.Kc(32,Z,6,5,"mat-error",9),b.Tb(),b.Tb(),b.Ub(33,"div",14),b.Ub(34,"mat-form-field",5),b.Ub(35,"mat-label"),b.Mc(36,"Passport Number"),b.Tb(),b.Pb(37,"input",15),b.Ub(38,"mat-hint"),b.Mc(39,"Ex: 197894506123"),b.Tb(),b.Kc(40,W,4,3,"mat-error",9),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(41,"div",2),b.Ub(42,"div",3),b.Ub(43,"div",16),b.Ub(44,"mat-form-field",5),b.Ub(45,"mat-label"),b.Mc(46,"Primary Contact"),b.Tb(),b.Pb(47,"input",17),b.Ub(48,"mat-hint"),b.Mc(49,"Ex: 0778941234 or 0112789456"),b.Tb(),b.Kc(50,ae,6,5,"mat-error",9),b.Tb(),b.Tb(),b.Ub(51,"div",16),b.Ub(52,"mat-form-field",5),b.Ub(53,"mat-label"),b.Mc(54,"Secondary Contact"),b.Tb(),b.Pb(55,"input",18),b.Ub(56,"mat-hint"),b.Mc(57,"Ex: 0778941234 or 0112789456"),b.Tb(),b.Kc(58,se,4,3,"mat-error",9),b.Tb(),b.Tb(),b.Ub(59,"div",16),b.Ub(60,"mat-form-field",5),b.Ub(61,"mat-label"),b.Mc(62,"Email Address"),b.Tb(),b.Pb(63,"input",19),b.Ub(64,"mat-hint"),b.Mc(65,"Ex: user@sample.com"),b.Tb(),b.Kc(66,de,5,4,"mat-error",9),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(67,"div",2),b.Ub(68,"mat-form-field",5),b.Ub(69,"mat-label"),b.Mc(70,"Address"),b.Tb(),b.Pb(71,"textarea",20),b.Ub(72,"mat-hint"),b.Mc(73,"Ex: 123, Gampaha Road, Colombo"),b.Tb(),b.Kc(74,ge,4,3,"mat-error",9),b.Tb(),b.Tb(),b.Ub(75,"div",2),b.Ub(76,"mat-form-field",5),b.Ub(77,"mat-label"),b.Mc(78,"Description"),b.Tb(),b.Pb(79,"textarea",21),b.Kc(80,Ue,2,1,"mat-error",9),b.Tb(),b.Tb(),b.Ub(81,"div",22),b.Ub(82,"button",23),b.Ub(83,"mat-icon"),b.Mc(84,"list"),b.Tb(),b.Mc(85," All Customers"),b.Tb(),b.Pb(86,"span",24),b.Ub(87,"button",25),b.Ub(88,"mat-icon"),b.Mc(89,"refresh"),b.Tb(),b.Mc(90," Clear"),b.Tb(),b.Ub(91,"button",26),b.Ub(92,"mat-icon"),b.Mc(93,"save"),b.Tb(),b.Mc(94," Save"),b.Tb(),b.Tb(),b.Tb(),b.Ub(95,"mat-card-actions",27),b.Ub(96,"span",28),b.Mc(97,"*"),b.Tb(),b.Mc(98," Required Fields "),b.Tb(),b.Tb(),b.Tb()),2&e&&(b.qc("title",t.title)("breadcrumbSegments",t.breadcrumbSegments),b.Bb(1),b.qc("formGroup",t.form),b.Bb(10),b.qc("value",null),b.Bb(2),b.qc("ngForOf",t.customerTypes),b.Bb(1),b.qc("ngIf",t.customertypeField.invalid),b.Bb(8),b.qc("ngIf",t.nameField.invalid),b.Bb(10),b.qc("ngIf",t.nicField.invalid),b.Bb(8),b.qc("ngIf",t.passportField.invalid),b.Bb(10),b.qc("ngIf",t.contact1Field.invalid),b.Bb(8),b.qc("ngIf",t.contact2Field.invalid),b.Bb(8),b.qc("ngIf",t.emailField.invalid),b.Bb(8),b.qc("ngIf",t.addressField.invalid),b.Bb(6),b.qc("ngIf",t.descriptionField.invalid))},directives:[d.a,K.w,K.o,K.i,p.a,p.c,k.c,k.g,w.a,K.t,K.n,K.g,N.n,c.l,c.m,L.b,K.c,k.f,g.b,i.d,T.a,p.b,k.b],styles:[""]}),ve),qe=a("M9IT"),Me=a("+0xr"),Ie=a("rO2v");function Fe(e,t){1&e&&(b.Ub(0,"div",3),b.Pb(1,"mat-spinner"),b.Ub(2,"h1",4),b.Mc(3,"Loading..."),b.Tb(),b.Tb())}function ye(e,t){1&e&&(b.Ub(0,"th",33),b.Mc(1," ID "),b.Tb())}function Ce(e,t){if(1&e&&(b.Ub(0,"td",34),b.Mc(1),b.Tb()),2&e){var r=t.$implicit;b.Bb(1),b.Oc(" ",r.code," ")}}function Ke(e,t){1&e&&(b.Ub(0,"th",33),b.Mc(1," Name "),b.Tb())}function xe(e,t){if(1&e&&(b.Ub(0,"td",34),b.Mc(1),b.kc(2,"titlecase"),b.Tb()),2&e){var r=t.$implicit;b.Bb(1),b.Oc(" ",b.lc(2,1,r.name)," ")}}function ke(e,t){1&e&&(b.Ub(0,"th",33),b.Mc(1," NIC Number "),b.Tb())}function we(e,t){if(1&e&&(b.Ub(0,"td",34),b.Mc(1),b.Tb()),2&e){var r=t.$implicit;b.Bb(1),b.Oc(" ",r.nic," ")}}function Ne(e,t){1&e&&(b.Ub(0,"th",33),b.Mc(1," Contacts "),b.Tb())}function Le(e,t){if(1&e&&(b.Ub(0,"td",34),b.Mc(1),b.Tb()),2&e){var r=t.$implicit;b.Bb(1),b.Pc(" ",r.contact1,"",r.contact2?", "+r.contact2:""," ")}}function Se(e,t){1&e&&b.Pb(0,"th",35)}function je(e,t){if(1&e&&(b.Ub(0,"td",36),b.Ub(1,"button",37),b.Ub(2,"mat-icon"),b.Mc(3,"visibility"),b.Tb(),b.Mc(4," More ..."),b.Tb(),b.Tb()),2&e){var r=t.$implicit;b.Bb(1),b.sc("routerLink","/customers/",r.id,"")}}function Oe(e,t){1&e&&b.Pb(0,"th",35)}function Pe(e,t){if(1&e){var r=b.Vb();b.Ub(0,"button",39),b.fc("click",(function(){b.Bc(r);var e=b.jc().$implicit;return b.jc(4).delete(e)})),b.Ub(1,"mat-icon"),b.Mc(2,"delete"),b.Tb(),b.Mc(3," Delete"),b.Tb()}}var De=function(){return["Admin","Manager"]};function Ee(e,t){1&e&&(b.Ub(0,"td",36),b.Kc(1,Pe,4,0,"button",38),b.Tb()),2&e&&(b.Bb(1),b.qc("appHasRole",b.tc(1,De)))}function Ae(e,t){1&e&&b.Pb(0,"th",35)}function Re(e,t){if(1&e&&(b.Ub(0,"td",36),b.Ub(1,"button",40),b.Ub(2,"mat-icon"),b.Mc(3,"edit"),b.Tb(),b.Mc(4," Change"),b.Tb(),b.Tb()),2&e){var r=t.$implicit;b.Bb(1),b.sc("routerLink","/customers/edit/",r.id,"")}}function Ve(e,t){1&e&&b.Pb(0,"tr",41)}function ze(e,t){1&e&&b.Pb(0,"tr",42)}function $e(e,t){if(1&e&&(b.Ub(0,"div",18),b.Ub(1,"table",19),b.Sb(2,20),b.Kc(3,ye,2,0,"th",21),b.Kc(4,Ce,2,1,"td",22),b.Rb(),b.Sb(5,23),b.Kc(6,Ke,2,0,"th",21),b.Kc(7,xe,3,3,"td",22),b.Rb(),b.Sb(8,24),b.Kc(9,ke,2,0,"th",21),b.Kc(10,we,2,1,"td",22),b.Rb(),b.Sb(11,25),b.Kc(12,Ne,2,0,"th",21),b.Kc(13,Le,2,2,"td",22),b.Rb(),b.Sb(14,26),b.Kc(15,Se,1,0,"th",27),b.Kc(16,je,5,1,"td",28),b.Rb(),b.Sb(17,29),b.Kc(18,Oe,1,0,"th",27),b.Kc(19,Ee,2,2,"td",28),b.Rb(),b.Sb(20,30),b.Kc(21,Ae,1,0,"th",27),b.Kc(22,Re,5,1,"td",28),b.Rb(),b.Kc(23,Ve,1,0,"tr",31),b.Kc(24,ze,1,0,"tr",32),b.Tb(),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.qc("dataSource",r.customerDataPage),b.Bb(22),b.qc("matHeaderRowDef",r.displayedColumns),b.Bb(1),b.qc("matRowDefColumns",r.displayedColumns)}}function Ge(e,t){1&e&&b.Pb(0,"app-empty-data-table",43)}var He=function(){return[5,10,25,50,100]};function Xe(e,t){if(1&e){var r=b.Vb();b.Ub(0,"div",6),b.Ub(1,"mat-card"),b.Ub(2,"mat-card-content"),b.Ub(3,"div",7),b.Ub(4,"button",8),b.Ub(5,"mat-icon"),b.Mc(6,"add"),b.Tb(),b.Mc(7," New Customer "),b.Tb(),b.Tb(),b.Ub(8,"div",9),b.Ub(9,"div",10),b.Ub(10,"div",11),b.Ub(11,"mat-form-field",12),b.Ub(12,"mat-label"),b.Mc(13,"Filter by ID"),b.Tb(),b.Ub(14,"input",13),b.fc("keyup",(function(){return b.Bc(r),b.jc(2).loadData()})),b.Tb(),b.Tb(),b.Tb(),b.Ub(15,"div",11),b.Ub(16,"mat-form-field",12),b.Ub(17,"mat-label"),b.Mc(18,"Filter by Name"),b.Tb(),b.Ub(19,"input",13),b.fc("keyup",(function(){return b.Bc(r),b.jc(2).loadData()})),b.Tb(),b.Tb(),b.Tb(),b.Ub(20,"div",11),b.Ub(21,"mat-form-field",12),b.Ub(22,"mat-label"),b.Mc(23,"Filter by NIC number"),b.Tb(),b.Ub(24,"input",13),b.fc("keyup",(function(){return b.Bc(r),b.jc(2).loadData()})),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"div",11),b.Ub(26,"mat-form-field",12),b.Ub(27,"mat-label"),b.Mc(28,"Filter by Contact"),b.Tb(),b.Ub(29,"input",13),b.fc("keyup",(function(){return b.Bc(r),b.jc(2).loadData()})),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Kc(30,$e,25,3,"div",14),b.Kc(31,Ge,1,0,"app-empty-data-table",15),b.Ub(32,"div",16),b.Ub(33,"mat-paginator",17),b.fc("page",(function(e){return b.Bc(r),b.jc(2).paginate(e)})),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&e){var n=b.jc(2);b.Bb(14),b.qc("formControl",n.codeField),b.Bb(5),b.qc("formControl",n.nameField),b.Bb(5),b.qc("formControl",n.nicField),b.Bb(5),b.qc("formControl",n.contactField),b.Bb(1),b.qc("ngIf",n.customerDataPage.length>0),b.Bb(1),b.qc("ngIf",0===n.customerDataPage.length),b.Bb(2),b.qc("length",n.pagination.totalItems)("pageSize",n.pagination.itemsPerPage)("pageSizeOptions",b.tc(10,He))("showFirstLastButtons",!0)}}function Ze(e,t){if(1&e&&b.Kc(0,Xe,34,11,"div",5),2&e){var r=b.jc();b.qc("ngIf",void 0!==r.customerDataPage)}}var Je,Ye=function(){return["Customers","Show All Customers"]},_e=((Je=function(){function t(r,n,a){e(this,t),this.customerService=r,this.snackBar=n,this.dialog=a,this.userParams={},this.displayedColumns=["code","name","nic","contacts","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.codeField=new K.e,this.nameField=new K.e,this.nicField=new K.e,this.contactField=new K.e}return r(t,[{key:"ngOnInit",value:function(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}},{key:"loadData",value:function(){var e=this;this.userParams.name=this.nameField.value,this.userParams.code=this.codeField.value,this.userParams.nic=this.nicField.value,this.userParams.mobile=this.contactField.value,this.customerService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe((function(t){e.loadingState=!1,e.customerDataPage=t.result,e.pagination=t.pagination}),(function(t){console.log(t),e.snackBar.open("error loading data ","Error",{duration:3e3})}))}},{key:"refreshData",value:function(){this.loadData()}},{key:"paginate",value:function(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}},{key:"ngOnDestroy",value:function(){this.live=!1}},{key:"delete",value:function(e){var t=this;this.dialog.open(s.a,{width:"500px",data:{message:e.name}}).afterClosed().subscribe((function(r){r&&(t.loadingState=!0,t.customerService.delete(e.id).subscribe((function(){t.snackBar.open("customer Deleted successfully","\u2714",{duration:2e3}),t.loadData()}),(function(e){console.log(e),t.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),t.loadingState=!1})))}))}}]),t}()).\u0275fac=function(e){return new(e||Je)(b.Ob(m.a),b.Ob(l.a),b.Ob(u.b))},Je.\u0275cmp=b.Ib({type:Je,selectors:[["app-customer-table"]],decls:4,vars:4,consts:[["title","Customers",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["customerlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],[1,"mb-2"],["routerLink","/customers/add","mat-raised-button","","color","primary",1,"mx-0"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],["class","table-responsive table-striped",4,"ngIf"],["message","No customers to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","nic"],["matColumnDef","contacts"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No customers to show"]],template:function(e,t){if(1&e&&(b.Pb(0,"app-page-header",0),b.Kc(1,Fe,4,0,"div",1),b.Kc(2,Ze,1,1,"ng-template",null,2,b.Lc)),2&e){var r=b.yc(3);b.qc("breadcrumbSegments",b.tc(3,Ye)),b.Bb(1),b.qc("ngIf",t.loadingState)("ngIfElse",r)}},directives:[d.a,c.m,f.b,p.a,p.c,g.b,i.d,T.a,k.c,k.g,L.b,K.c,K.n,K.f,qe.a,Me.j,Me.c,Me.e,Me.b,Me.g,Me.i,Me.d,Me.a,h.a,Me.f,Me.h,Ie.a],pipes:[c.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),Je);function We(e,t){if(1&e&&(b.Ub(0,"mat-option",30),b.Mc(1),b.Tb()),2&e){var r=t.$implicit;b.qc("value",r.name),b.Bb(1),b.Nc(r.name)}}function Qe(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"customerType is required"),b.Tb())}function et(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,Qe,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.customertypeField.errors.required)}}function tt(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Name is required"),b.Tb())}function rt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Name should has at lease ",r.nameField.errors.minlength.requiredLength," characters ")}}function nt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Name length should not exceed ",r.nameField.errors.maxlength.requiredLength," characters ")}}function at(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid Name"),b.Tb())}function ct(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,tt,2,0,"span",10),b.Kc(2,rt,2,1,"span",10),b.Kc(3,nt,2,1,"span",10),b.Kc(4,at,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.nameField.errors.required),b.Bb(1),b.qc("ngIf",r.nameField.errors.minlength),b.Bb(1),b.qc("ngIf",r.nameField.errors.maxlength),b.Bb(1),b.qc("ngIf",r.nameField.errors.pattern)}}function it(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"NIC Number is required"),b.Tb())}function ot(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("NIC Number should has at lease ",r.nicField.errors.minlength.requiredLength," characters, ")}}function st(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("NIC NUmber length should not exceed ",r.nicField.errors.maxlength.requiredLength," characters, ")}}function bt(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid NIC number"),b.Tb())}function mt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,it,2,0,"span",10),b.Kc(2,ot,2,1,"span",10),b.Kc(3,st,2,1,"span",10),b.Kc(4,bt,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.nicField.errors.required),b.Bb(1),b.qc("ngIf",r.nicField.errors.minlength),b.Bb(1),b.qc("ngIf",r.nicField.errors.maxlength),b.Bb(1),b.qc("ngIf",r.nicField.errors.pattern)}}function ut(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("passport Number should has at lease ",r.passportField.errors.minlength.requiredLength," characters, ")}}function lt(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid passport number"),b.Tb())}function dt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,ut,2,1,"span",10),b.Kc(2,lt,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.passportField.errors.minlength),b.Bb(1),b.qc("ngIf",r.passportField.errors.pattern)}}function ft(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Primary contact number is required"),b.Tb())}function pt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Contact number should has at lease ",r.contact1Field.errors.minlength.requiredLength," characters, ")}}function ht(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Contact nUmber length should not exceed ",r.contact1Field.errors.maxlength.requiredLength," characters, ")}}function gt(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid contact number"),b.Tb())}function Tt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,ft,2,0,"span",10),b.Kc(2,pt,2,1,"span",10),b.Kc(3,ht,2,1,"span",10),b.Kc(4,gt,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.contact1Field.errors.required),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.minlength),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.maxlength),b.Bb(1),b.qc("ngIf",r.contact1Field.errors.pattern)}}function Ut(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Contact number should has at lease ",r.contact2Field.errors.minlength.requiredLength," characters, ")}}function vt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Contact nUmber length should not exceed ",r.contact2Field.errors.maxlength.requiredLength," characters, ")}}function Bt(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid contact number"),b.Tb())}function qt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,Ut,2,1,"span",10),b.Kc(2,vt,2,1,"span",10),b.Kc(3,Bt,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.contact2Field.errors.minlength),b.Bb(1),b.qc("ngIf",r.contact2Field.errors.maxlength),b.Bb(1),b.qc("ngIf",r.contact2Field.errors.pattern)}}function Mt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Email address should has at lease ",r.emailField.errors.minlength.requiredLength," characters, ")}}function It(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Email address length should not exceed ",r.emailField.errors.maxlength.requiredLength," characters, ")}}function Ft(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Invalid email address"),b.Tb())}function yt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,Mt,2,1,"span",10),b.Kc(2,It,2,1,"span",10),b.Kc(3,Ft,2,0,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.emailField.errors.minlength),b.Bb(1),b.qc("ngIf",r.emailField.errors.maxlength),b.Bb(1),b.qc("ngIf",r.emailField.errors.email)}}function Ct(e,t){1&e&&(b.Ub(0,"span"),b.Mc(1,"Address is required"),b.Tb())}function Kt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Address should has at lease ",r.addressField.errors.minlength.requiredLength," characters ")}}function xt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Address length should not exceed ",r.addressField.errors.maxlength.requiredLength," characters ")}}function kt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,Ct,2,0,"span",10),b.Kc(2,Kt,2,1,"span",10),b.Kc(3,xt,2,1,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.addressField.errors.required),b.Bb(1),b.qc("ngIf",r.addressField.errors.minlength),b.Bb(1),b.qc("ngIf",r.addressField.errors.maxlength)}}function wt(e,t){if(1&e&&(b.Ub(0,"span"),b.Mc(1),b.Tb()),2&e){var r=b.jc(3);b.Bb(1),b.Oc("Description length should not exceed ",r.descriptionField.errors.maxlength.requiredLength," characters ")}}function Nt(e,t){if(1&e&&(b.Ub(0,"mat-error"),b.Kc(1,wt,2,1,"span",10),b.Tb()),2&e){var r=b.jc(2);b.Bb(1),b.qc("ngIf",r.descriptionField.errors.maxlength)}}function Lt(e,t){if(1&e){var r=b.Vb();b.Ub(0,"form",2),b.fc("ngSubmit",(function(){return b.Bc(r),b.jc().submit()})),b.Ub(1,"mat-card"),b.Ub(2,"mat-card-content"),b.Ub(3,"div",3),b.Ub(4,"div",4),b.Ub(5,"div",5),b.Ub(6,"mat-form-field",6),b.Ub(7,"mat-label"),b.Mc(8,"Customer Type"),b.Tb(),b.Ub(9,"mat-select",7),b.Ub(10,"mat-option",8),b.Mc(11,"Select the Type"),b.Tb(),b.Kc(12,We,2,2,"mat-option",9),b.Tb(),b.Kc(13,et,2,1,"mat-error",10),b.Tb(),b.Tb(),b.Ub(14,"div",11),b.Ub(15,"mat-form-field",6),b.Ub(16,"mat-label"),b.Mc(17,"Name"),b.Tb(),b.Pb(18,"input",12),b.Ub(19,"mat-hint"),b.Mc(20,"Ex: Json Smith"),b.Tb(),b.Kc(21,ct,5,4,"mat-error",10),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(22,"div",3),b.Ub(23,"div",4),b.Ub(24,"div",13),b.Ub(25,"mat-form-field",6),b.Ub(26,"mat-label"),b.Mc(27,"NIC Number"),b.Tb(),b.Pb(28,"input",14),b.Ub(29,"mat-hint"),b.Mc(30,"Ex: 789456123V or 197894506123"),b.Tb(),b.Kc(31,mt,5,4,"mat-error",10),b.Tb(),b.Tb(),b.Ub(32,"div",15),b.Ub(33,"mat-form-field",6),b.Ub(34,"mat-label"),b.Mc(35,"Passport Number"),b.Tb(),b.Pb(36,"input",16),b.Ub(37,"mat-hint"),b.Mc(38,"Ex: 197894506123"),b.Tb(),b.Kc(39,dt,3,2,"mat-error",10),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(40,"div",3),b.Ub(41,"div",4),b.Ub(42,"div",17),b.Ub(43,"mat-form-field",6),b.Ub(44,"mat-label"),b.Mc(45,"Primary Contact"),b.Tb(),b.Pb(46,"input",18),b.Ub(47,"mat-hint"),b.Mc(48,"Ex: 0778941234 or 0112789456"),b.Tb(),b.Kc(49,Tt,5,4,"mat-error",10),b.Tb(),b.Tb(),b.Ub(50,"div",17),b.Ub(51,"mat-form-field",6),b.Ub(52,"mat-label"),b.Mc(53,"Secondary Contact"),b.Tb(),b.Pb(54,"input",19),b.Ub(55,"mat-hint"),b.Mc(56,"Ex: 0778941234 or 0112789456"),b.Tb(),b.Kc(57,qt,4,3,"mat-error",10),b.Tb(),b.Tb(),b.Ub(58,"div",17),b.Ub(59,"mat-form-field",6),b.Ub(60,"mat-label"),b.Mc(61,"Email Address"),b.Tb(),b.Pb(62,"input",20),b.Ub(63,"mat-hint"),b.Mc(64,"Ex: user@sample.com"),b.Tb(),b.Kc(65,yt,4,3,"mat-error",10),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(66,"div",3),b.Ub(67,"mat-form-field",6),b.Ub(68,"mat-label"),b.Mc(69,"Address"),b.Tb(),b.Pb(70,"textarea",21),b.Ub(71,"mat-hint"),b.Mc(72,"Ex: 123, Gampaha Road, Colombo"),b.Tb(),b.Kc(73,kt,4,3,"mat-error",10),b.Tb(),b.Tb(),b.Ub(74,"div",3),b.Ub(75,"mat-form-field",6),b.Ub(76,"mat-label"),b.Mc(77,"Description"),b.Tb(),b.Pb(78,"textarea",22),b.Kc(79,Nt,2,1,"mat-error",10),b.Tb(),b.Tb(),b.Ub(80,"div",23),b.Ub(81,"button",24),b.Ub(82,"mat-icon"),b.Mc(83,"list"),b.Tb(),b.Mc(84," All Customers"),b.Tb(),b.Pb(85,"span",25),b.Ub(86,"button",26),b.fc("click",(function(){return b.Bc(r),b.jc().reset()})),b.Ub(87,"mat-icon"),b.Mc(88,"refresh"),b.Tb(),b.Mc(89," Reset"),b.Tb(),b.Ub(90,"button",27),b.Ub(91,"mat-icon"),b.Mc(92,"save"),b.Tb(),b.Mc(93," Save Changes"),b.Tb(),b.Tb(),b.Tb(),b.Ub(94,"mat-card-actions",28),b.Ub(95,"span",29),b.Mc(96,"*"),b.Tb(),b.Mc(97," Required Fields "),b.Tb(),b.Tb(),b.Tb()}if(2&e){var n=b.jc();b.qc("formGroup",n.form),b.Bb(10),b.qc("value",null),b.Bb(2),b.qc("ngForOf",n.customerTypes),b.Bb(1),b.qc("ngIf",n.customertypeField.invalid),b.Bb(8),b.qc("ngIf",n.nameField.invalid),b.Bb(10),b.qc("ngIf",n.nicField.invalid),b.Bb(8),b.qc("ngIf",n.passportField.invalid),b.Bb(10),b.qc("ngIf",n.contact1Field.invalid),b.Bb(8),b.qc("ngIf",n.contact2Field.invalid),b.Bb(8),b.qc("ngIf",n.emailField.invalid),b.Bb(8),b.qc("ngIf",n.addressField.invalid),b.Bb(6),b.qc("ngIf",n.descriptionField.invalid)}}var St,jt,Ot,Pt,Dt=((St=function(){function t(r,n,a,c){var i=this;e(this,t),this.route=r,this.customerService=n,this.snackBar=a,this.router=c,this.title="Customer Change Form",this.breadcrumbSegments=["Customers","Show All Customers","Change"],this.customerTypes=[{id:1,name:"Company"},{id:2,name:"Person"}],this.route.data.subscribe((function(e){var t=e.customer;i.customer=t,i.id=t.id,i.title+=" of "+t.code,i.breadcrumbSegments[2]="Change Details of "+t.code,i.initializeForm()}))}return r(t,[{key:"ngOnInit",value:function(){}},{key:"reset",value:function(){this.form.reset(this.customer)}},{key:"initializeForm",value:function(){this.form=new K.h({name:new K.e(this.customer.name,[K.u.required,K.u.minLength(3),K.u.maxLength(255),K.u.pattern("[a-zA-Z-,]+(s{0,1}[a-zA-Z-, ])*$")]),nic:new K.e(this.customer.nic,[K.u.required,K.u.minLength(10),K.u.maxLength(12),K.u.pattern("^(([0-9]{12})|([0-9]{9}[vVxX]))$")]),contact1:new K.e(this.customer.contact1,[K.u.required,K.u.minLength(9),K.u.maxLength(10),K.u.pattern("^([0]?[0-9]{9})$")]),contact2:new K.e(this.customer.contact2,[K.u.minLength(9),K.u.maxLength(10),K.u.pattern("^([0]?[0-9]{9})$")]),email:new K.e(this.customer.email,[K.u.minLength(4),K.u.maxLength(255),K.u.email]),address:new K.e(this.customer.address,[K.u.required,K.u.minLength(4),K.u.maxLength(65535)]),description:new K.e(this.customer.description,[K.u.maxLength(65535)]),customertype:new K.e(this.customer.customerType,[K.u.required]),passport:new K.e(this.customer.passport,[K.u.minLength(10)])})}},{key:"submit",value:function(){var e=this;this.form.invalid||(this.customer=this.form.value,this.customer.code="CU"+Math.round(1e5*Math.random()),this.customerService.update(this.id,this.customer).subscribe((function(){e.snackBar.open("customer successfully Updated","\u2714",{duration:2e3}),e.router.navigateByUrl("/customers/"+e.id)}),(function(t){switch(t.status){case 401:e.snackBar.open("Authentication Failed. You have to login again","Error",{duration:2e3}),setTimeout((function(){e.router.navigateByUrl("/login")}),500);break;case 403:e.snackBar.open(t.error.message,"Error",{duration:2e3}),setTimeout((function(){e.router.navigateByUrl("/")}),500);break;case 400:e.snackBar.open("Validation Error","Error",{duration:2e3});break;default:e.snackBar.open("Something went wrong","Error",{duration:2e3})}})))}},{key:"nameField",get:function(){return this.form.controls.name}},{key:"nicField",get:function(){return this.form.controls.nic}},{key:"contact1Field",get:function(){return this.form.controls.contact1}},{key:"contact2Field",get:function(){return this.form.controls.contact2}},{key:"emailField",get:function(){return this.form.controls.email}},{key:"addressField",get:function(){return this.form.controls.address}},{key:"descriptionField",get:function(){return this.form.controls.description}},{key:"customertypeField",get:function(){return this.form.controls.customertype}},{key:"passportField",get:function(){return this.form.controls.nic}}]),t}()).\u0275fac=function(e){return new(e||St)(b.Ob(i.a),b.Ob(m.a),b.Ob(l.a),b.Ob(i.c))},St.\u0275cmp=b.Ib({type:St,selectors:[["app-customer-update-form"]],decls:2,vars:3,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","customertype"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","formControlName","nic","required",""],[1,"col-sm-7"],["matInput","","formControlName","passport"],[1,"col-md-4"],["matInput","","formControlName","contact1","required",""],["matInput","","formControlName","contact2"],["matInput","","formControlName","email"],["matInput","","formControlName","address","required",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/customers","mat-stroked-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(e,t){1&e&&(b.Pb(0,"app-page-header",0),b.Kc(1,Lt,98,12,"form",1)),2&e&&(b.qc("title",t.title)("breadcrumbSegments",t.breadcrumbSegments),b.Bb(1),b.qc("ngIf",t.customer))},directives:[d.a,c.m,K.w,K.o,K.i,p.a,p.c,k.c,k.g,w.a,K.t,K.n,K.g,N.n,c.l,L.b,K.c,k.f,g.b,i.d,T.a,p.b,k.b],styles:[""]}),St),Et=a("EY2u"),At=a("JIr8"),Rt=((jt=function(){function t(r,n){e(this,t),this.customerService=r,this.route=n}return r(t,[{key:"resolve",value:function(e){var t=this;return this.customerService.get(e.params.id).pipe(Object(At.a)((function(){return t.route.navigateByUrl("/customers"),Et.a})))}}]),t}()).\u0275fac=function(e){return new(e||jt)(b.cc(m.a),b.cc(i.c))},jt.\u0275prov=b.Kb({token:jt,factory:jt.\u0275fac,providedIn:"root"}),jt),Vt=[{path:"",component:_e},{path:"add",component:Be},{path:":id",component:C,resolve:{customer:Rt}},{path:"edit/:id",component:Dt,resolve:{customer:Rt}}],zt=((Ot=function t(){e(this,t)}).\u0275mod=b.Mb({type:Ot}),Ot.\u0275inj=b.Lb({factory:function(e){return new(e||Ot)},imports:[[i.g.forChild(Vt)],i.g]}),Ot),$t=a("hctd"),Gt=a("FpXt"),Ht=((Pt=function t(){e(this,t)}).\u0275mod=b.Mb({type:Pt}),Pt.\u0275inj=b.Lb({factory:function(e){return new(e||Pt)},imports:[[c.c,zt,$t.a,K.s,Gt.a]]}),Pt)}}])}();