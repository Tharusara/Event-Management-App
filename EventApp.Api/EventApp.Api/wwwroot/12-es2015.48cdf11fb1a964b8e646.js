(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"2e08":function(e,t,a){"use strict";a.r(t),a.d(t,"PackagesModule",(function(){return wt}));var c=a("ofXK"),i=a("tyNb"),n=a("mrSG"),r=a("zHse"),o=a("fXoL"),s=a("IgKp"),b=a("0IaG"),l=a("dNgK"),d=a("5VPf"),u=a("Xa2L"),m=a("Wp6s"),p=a("bTqV"),g=a("NFeN"),h=a("yX84");function f(e,t){1&e&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Tb())}function T(e,t){if(1&e&&(o.Ub(0,"tr"),o.Ub(1,"th"),o.Mc(2,"Description"),o.Tb(),o.Ub(3,"td"),o.Mc(4),o.Tb(),o.Tb()),2&e){const e=o.jc(3);o.Bb(4),o.Nc(e.package.description)}}function U(e,t){if(1&e&&(o.Ub(0,"tr"),o.Ub(1,"th"),o.Mc(2,"Included Services"),o.Tb(),o.Ub(3,"td"),o.Mc(4),o.Tb(),o.Tb()),2&e){const e=o.jc(3);o.Bb(4),o.Nc(e.package.servicePackages)}}function k(e,t){if(1&e){const e=o.Vb();o.Ub(0,"button",17),o.fc("click",(function(){return o.Bc(e),o.jc(3).delete()})),o.Ub(1,"mat-icon"),o.Mc(2,"delete"),o.Tb(),o.Mc(3," Delete"),o.Tb()}}const v=function(){return["Admin","Manager"]};function M(e,t){if(1&e&&(o.Ub(0,"div"),o.Ub(1,"div",5),o.Ub(2,"div",6),o.Ub(3,"mat-card",7),o.Ub(4,"mat-card-content"),o.Ub(5,"table",8),o.Ub(6,"tbody"),o.Ub(7,"tr"),o.Ub(8,"th"),o.Mc(9,"ID"),o.Tb(),o.Ub(10,"td"),o.Mc(11),o.kc(12,"titlecase"),o.Tb(),o.Tb(),o.Ub(13,"tr"),o.Ub(14,"th"),o.Mc(15,"Created At"),o.Tb(),o.Ub(16,"td"),o.Mc(17),o.kc(18,"date"),o.Tb(),o.Tb(),o.Ub(19,"tr"),o.Ub(20,"th"),o.Mc(21,"Creator"),o.Tb(),o.Ub(22,"td"),o.Mc(23),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(24,"div",9),o.Ub(25,"mat-card",7),o.Ub(26,"mat-card-content"),o.Ub(27,"table",8),o.Ub(28,"tbody"),o.Ub(29,"tr"),o.Ub(30,"th"),o.Mc(31,"ID"),o.Tb(),o.Ub(32,"td"),o.Mc(33),o.Tb(),o.Tb(),o.Ub(34,"tr"),o.Ub(35,"th"),o.Mc(36,"Name"),o.Tb(),o.Ub(37,"td"),o.Mc(38),o.Tb(),o.Tb(),o.Ub(39,"tr"),o.Ub(40,"th"),o.Mc(41,"Package Date"),o.Tb(),o.Ub(42,"td"),o.Mc(43),o.Tb(),o.Tb(),o.Kc(44,T,5,1,"tr",4),o.Ub(45,"tr"),o.Ub(46,"th"),o.Mc(47,"Price"),o.Tb(),o.Ub(48,"td"),o.Mc(49),o.Tb(),o.Tb(),o.Ub(50,"tr"),o.Ub(51,"th"),o.Mc(52,"Hours"),o.Tb(),o.Ub(53,"td"),o.Mc(54),o.Tb(),o.Tb(),o.Ub(55,"tr"),o.Ub(56,"th"),o.Mc(57,"Extra Hour Cost"),o.Tb(),o.Ub(58,"td"),o.Mc(59),o.Tb(),o.Tb(),o.Ub(60,"tr"),o.Ub(61,"th"),o.Mc(62,"Package Status"),o.Tb(),o.Ub(63,"td"),o.Mc(64),o.Tb(),o.Tb(),o.Kc(65,U,5,1,"tr",4),o.Tb(),o.Tb(),o.Tb(),o.Ub(66,"button",10),o.Ub(67,"mat-icon"),o.Mc(68,"add"),o.Tb(),o.Mc(69,"Add Services"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(70,"div",11),o.Kc(71,k,4,0,"button",12),o.Pb(72,"span",13),o.Ub(73,"button",14),o.Ub(74,"mat-icon"),o.Mc(75,"edit"),o.Tb(),o.Mc(76," Change"),o.Tb(),o.Ub(77,"button",15),o.Ub(78,"mat-icon"),o.Mc(79,"add"),o.Tb(),o.Mc(80," New package"),o.Tb(),o.Ub(81,"button",16),o.Ub(82,"mat-icon"),o.Mc(83,"list"),o.Tb(),o.Mc(84," All Packages"),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.jc(2);o.Bb(11),o.Nc(o.lc(12,14,e.package.code)),o.Bb(6),o.Nc(o.mc(18,16,e.package.tocreation,"medium")),o.Bb(6),o.Nc(null==e.package?null:e.package.creator.userName),o.Bb(10),o.Nc(e.package.code),o.Bb(5),o.Nc(e.package.name),o.Bb(5),o.Nc(e.package.tocreation),o.Bb(1),o.qc("ngIf",e.package.description),o.Bb(5),o.Nc(e.package.price),o.Bb(5),o.Nc(e.package.hours),o.Bb(5),o.Nc(e.package.extrahourcost),o.Bb(5),o.Nc(e.package.packageStatus),o.Bb(1),o.qc("ngIf",e.package.servicePackages),o.Bb(6),o.qc("appHasRole",o.tc(19,v)),o.Bb(2),o.sc("routerLink","/packages/edit/",e.package.id,"")}}function B(e,t){if(1&e&&o.Kc(0,M,85,20,"div",4),2&e){const e=o.jc();o.qc("ngIf",e.package)}}const S=function(e){return["Packages","Show All Packages",e]};let q=(()=>{class e{constructor(e,t,a,c,i){this.packageService=e,this.route=t,this.dialog=a,this.snackBar=c,this.router=i,this.loadingState=!1,this.route.data.subscribe(({packag:e})=>{this.package=e})}ngOnInit(){}delete(){this.dialog.open(r.a,{width:"500px",data:{message:this.package.name}}).afterClosed().subscribe(e=>Object(n.b)(this,void 0,void 0,(function*(){e&&(this.loadingState=!0,this.packageService.delete(this.package.id).subscribe(()=>{this.snackBar.open("Package Deleted successfully","\u2714",{duration:2e3}),this.router.navigateByUrl("/events")},e=>{console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})))}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(s.a),o.Ob(i.a),o.Ob(b.b),o.Ob(l.a),o.Ob(i.c))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-package-detail"]],decls:4,vars:6,consts:[[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["packagedetail",""],[1,"spinner"],[4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"example-card"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],["routerLink","/packages/showservices","mat-stroked-button","","color","primary"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/packages/add","mat-stroked-button",""],["routerLink","/packages","mat-raised-button","","color","primary",1,"mr-0"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"]],template:function(e,t){if(1&e&&(o.Pb(0,"app-page-header",0),o.Kc(1,f,2,0,"div",1),o.Kc(2,B,1,1,"ng-template",null,2,o.Lc)),2&e){const e=o.yc(3);o.sc("title","Package Detail Page of ",t.package.code,""),o.qc("breadcrumbSegments",o.uc(4,S,"Details of "+t.package.code)),o.Bb(1),o.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[d.a,c.m,u.b,m.a,m.c,p.b,i.d,g.a,h.a],pipes:[c.v,c.e],styles:[""]}),e})();var F=a("3Pt+"),P=a("ohFZ"),w=a("kmnG"),I=a("qFsG"),y=a("d3UM"),D=a("FKr1"),x=a("iadO");function K(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"Name is required"),o.Tb())}function C(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("Name should has at lease ",e.nameField.errors.minlength.requiredLength," characters ")}}function O(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"This Name Already Exists."),o.Tb())}function N(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("Name length should not exceed ",e.nameField.errors.maxlength.requiredLength," characters ")}}function j(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,K,2,0,"span",7),o.Kc(2,C,2,1,"span",7),o.Kc(3,O,2,0,"span",7),o.Kc(4,N,2,1,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.nameField.errors.required),o.Bb(1),o.qc("ngIf",e.nameField.errors.minlength),o.Bb(1),o.qc("ngIf",e.nameField.errors.validate),o.Bb(1),o.qc("ngIf",e.nameField.errors.maxlength)}}function R(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"hoursField is required"),o.Tb())}function L(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("hoursField length should not exceed ",e.hoursField.errors.maxlength.requiredLength," characters, ")}}function A(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,R,2,0,"span",7),o.Kc(2,L,2,1,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.hoursField.errors.required),o.Bb(1),o.qc("ngIf",e.hoursField.errors.maxlength)}}function E(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"Price is required"),o.Tb())}function z(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,E,2,0,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.priceField.errors.required)}}function V(e,t){if(1&e&&(o.Ub(0,"mat-option",29),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.qc("value",e.name),o.Bb(1),o.Nc(e.name)}}function $(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"packageStatus is required"),o.Tb())}function H(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,$,2,0,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.packageStatusField.errors.required)}}function G(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"Date Added is required"),o.Tb())}function _(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,G,2,0,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.tocreationField.errors.required)}}function X(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("Description length should not exceed ",e.descriptionField.errors.maxlength.requiredLength," characters ")}}function Y(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,X,2,1,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.descriptionField.errors.maxlength)}}const J=function(){return["Packages","Add a New Package"]};let W=(()=>{class e{constructor(e,t,a,c){this.packageService=e,this.snackBar=t,this.asyncValidators=a,this.router=c,this.packageStatus=[{id:0,name:"Off"},{id:1,name:"Inquairy"},{id:2,name:"Propect"},{id:3,name:"Tentative"},{id:4,name:"Definate"}],this.form=new F.h({name:new F.e("",[F.u.required,F.u.minLength(3),F.u.maxLength(255)],[this.asyncValidators.validatePackageName]),description:new F.e("",[F.u.required,F.u.maxLength(65535)]),hours:new F.e("",[F.u.required,F.u.maxLength(12)]),price:new F.e("",[F.u.required]),tocreation:new F.e("",[F.u.required]),extrahourcost:new F.e("",[F.u.required]),packageStatus:new F.e("",[F.u.required])})}get packageStatusField(){return this.form.controls.packageStatus}get priceField(){return this.form.controls.price}get hoursField(){return this.form.controls.hours}get extrahourcostField(){return this.form.controls.extrahourcost}get tocreationField(){return this.form.controls.tocreation}get descriptionField(){return this.form.controls.description}get nameField(){return this.form.controls.name}ngOnInit(){}submit(){this.form.invalid||(this.package=this.form.value,this.package.code="PAC"+Math.round(1e5*Math.random()),this.packageService.add(this.package).subscribe(e=>{this.snackBar.open(" Package creation successfull","\u2714",{duration:2e3}),this.router.navigateByUrl("/packages/"+e.id)},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open("Authorization Failed.","Access denied\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}}))}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(s.a),o.Ob(l.a),o.Ob(P.a),o.Ob(i.c))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-package-form"]],decls:83,vars:13,consts:[["title","Package Form",3,"breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"col-sm-5"],["matInput","","type","number","formControlName","hours","required",""],[1,"col-sm-7"],["matInput","","type","number","formControlName","price","required",""],[1,"col-md-4"],["required","","formControlName","packageStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","extrahourcost"],["required","","matInput","","formControlName","tocreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/packages","mat-stroked-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(e,t){if(1&e&&(o.Pb(0,"app-page-header",0),o.Ub(1,"form",1),o.fc("ngSubmit",(function(){return t.submit()})),o.Ub(2,"mat-card"),o.Ub(3,"mat-card-content"),o.Ub(4,"div",2),o.Ub(5,"div",3),o.Ub(6,"div",4),o.Ub(7,"mat-form-field",5),o.Ub(8,"mat-label"),o.Mc(9,"Package Name"),o.Tb(),o.Pb(10,"input",6),o.Ub(11,"mat-hint"),o.Mc(12,"Ex: BallRoom"),o.Tb(),o.Kc(13,j,5,4,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(14,"div",2),o.Ub(15,"div",3),o.Ub(16,"div",8),o.Ub(17,"mat-form-field",5),o.Ub(18,"mat-label"),o.Mc(19,"Hours"),o.Tb(),o.Pb(20,"input",9),o.Ub(21,"mat-hint"),o.Mc(22,"Ex: 7h or 12h"),o.Tb(),o.Kc(23,A,3,2,"mat-error",7),o.Tb(),o.Tb(),o.Ub(24,"div",10),o.Ub(25,"mat-form-field",5),o.Ub(26,"mat-label"),o.Mc(27,"Price"),o.Tb(),o.Pb(28,"input",11),o.Ub(29,"mat-hint"),o.Mc(30,"Ex: $1970"),o.Tb(),o.Kc(31,z,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(32,"div",2),o.Ub(33,"div",3),o.Ub(34,"div",12),o.Ub(35,"mat-form-field",5),o.Ub(36,"mat-label"),o.Mc(37,"Package Status"),o.Tb(),o.Ub(38,"mat-select",13),o.Ub(39,"mat-option",14),o.Mc(40,"Select the Type"),o.Tb(),o.Kc(41,V,2,2,"mat-option",15),o.Tb(),o.Kc(42,H,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Ub(43,"div",12),o.Ub(44,"mat-form-field",5),o.Ub(45,"mat-label"),o.Mc(46,"Extra Hour Cost"),o.Tb(),o.Pb(47,"input",16),o.Ub(48,"mat-hint"),o.Mc(49,"Ex $: 500"),o.Tb(),o.Tb(),o.Tb(),o.Ub(50,"div",12),o.Ub(51,"mat-form-field",5),o.Ub(52,"mat-label"),o.Mc(53,"Date Added"),o.Tb(),o.Pb(54,"input",17),o.Pb(55,"mat-datepicker-toggle",18),o.Ub(56,"mat-datepicker",19,20),o.fc("yearSelected",(function(){return 1992})),o.Tb(),o.Kc(58,_,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(59,"div",2),o.Ub(60,"mat-form-field",5),o.Ub(61,"mat-label"),o.Mc(62,"Description"),o.Tb(),o.Pb(63,"textarea",21),o.Kc(64,Y,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Ub(65,"div",22),o.Ub(66,"button",23),o.Ub(67,"mat-icon"),o.Mc(68,"list"),o.Tb(),o.Mc(69," All Packages"),o.Tb(),o.Pb(70,"span",24),o.Ub(71,"button",25),o.Ub(72,"mat-icon"),o.Mc(73,"refresh"),o.Tb(),o.Mc(74," Clear"),o.Tb(),o.Ub(75,"button",26),o.Ub(76,"mat-icon"),o.Mc(77,"save"),o.Tb(),o.Mc(78," Save"),o.Tb(),o.Tb(),o.Tb(),o.Ub(79,"mat-card-actions",27),o.Ub(80,"span",28),o.Mc(81,"*"),o.Tb(),o.Mc(82," Required Fields "),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.yc(57);o.qc("breadcrumbSegments",o.tc(12,J)),o.Bb(1),o.qc("formGroup",t.form),o.Bb(12),o.qc("ngIf",t.nameField.invalid),o.Bb(10),o.qc("ngIf",t.hoursField.invalid),o.Bb(8),o.qc("ngIf",t.priceField.invalid),o.Bb(8),o.qc("value",null),o.Bb(2),o.qc("ngForOf",t.packageStatus),o.Bb(1),o.qc("ngIf",t.packageStatusField.invalid),o.Bb(12),o.qc("matDatepicker",e),o.Bb(1),o.qc("for",e),o.Bb(3),o.qc("ngIf",t.tocreationField.invalid),o.Bb(6),o.qc("ngIf",t.descriptionField.invalid)}},directives:[d.a,F.w,F.o,F.i,m.a,m.c,w.c,w.g,I.b,F.c,F.n,F.g,F.t,w.f,c.m,F.r,y.a,D.n,c.l,x.b,x.d,w.h,x.a,p.b,i.d,g.a,m.b,w.b],styles:[""]}),e})();var Q=a("IOme"),Z=a("bSwM");function ee(e,t){if(1&e&&(o.Ub(0,"div",11),o.Ub(1,"mat-checkbox",12),o.fc("change",(function(){const e=t.$implicit;return e.checked=!e.checked})),o.Mc(2),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.rc("value",e.id),o.qc("checked",e.checked),o.Bb(1),o.Nc(e.name)}}let te=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){this.dialogRef.addPanelClass("custom-dialog"),Q.a.isDark()?this.dialogRef.addPanelClass("dark"):this.dialogRef.addPanelClass("light"),this.package=this.data.package,this.services=this.data.services}updateItems(){this.dialogRef.close(this.services)}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(b.g),o.Ob(b.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-services-edit"]],decls:24,vars:4,consts:[[1,"dialog-wrapper"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"message"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["color","accent","mat-raised-button","",1,"mr-0",3,"click"],[1,"form-check"],[1,"example-margin",3,"value","checked","change"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.Ub(1,"h1",1),o.Mc(2),o.Tb(),o.Ub(3,"mat-card"),o.Ub(4,"div",2),o.Ub(5,"p"),o.Mc(6,"Are you sure you want to Add \u201c\xa0"),o.Ub(7,"span",3),o.Mc(8),o.Tb(),o.Mc(9,"\xa0\u201ds Services?"),o.Tb(),o.Tb(),o.Ub(10,"div"),o.Ub(11,"form",4,5),o.Kc(13,ee,3,3,"div",6),o.Tb(),o.Tb(),o.Ub(14,"div",7),o.Pb(15,"span",8),o.Ub(16,"button",9),o.Ub(17,"mat-icon"),o.Mc(18,"clear"),o.Tb(),o.Mc(19," No"),o.Tb(),o.Ub(20,"button",10),o.fc("click",(function(){return t.updateItems()})),o.Ub(21,"mat-icon"),o.Mc(22,"edit"),o.Tb(),o.Mc(23," Yes"),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e&&(o.Bb(2),o.Oc("Add Services for ",t.package.name,""),o.Bb(6),o.Nc(t.package.name),o.Bb(5),o.qc("ngForOf",t.services),o.Bb(3),o.qc("mat-dialog-close",!1))},directives:[b.h,m.a,b.e,F.w,F.o,F.p,c.l,b.c,p.b,b.d,g.a,Z.a],styles:[".message[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:110%}div[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:-10px}.dialog-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}h1[_ngcontent-%COMP%]{margin-top:-24px;font-size:20px!important;margin-left:-24px!important;margin-right:-24px!important;padding:14px 14px 5px!important;border-bottom:1px solid rgba(0,0,0,.1)}"]}),e})();var ae=a("O+Qd"),ce=a("/dUf"),ie=a("+0xr"),ne=a("M9IT");function re(e,t){1&e&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Ub(2,"h1",4),o.Mc(3,"Loading..."),o.Tb(),o.Tb())}function oe(e,t){1&e&&(o.Ub(0,"th",28),o.Mc(1,"PackageId"),o.Tb())}function se(e,t){if(1&e&&(o.Ub(0,"td",29),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc("PKG0",e.id,"")}}function be(e,t){1&e&&(o.Ub(0,"th",28),o.Mc(1,"Package"),o.Tb())}function le(e,t){if(1&e&&(o.Ub(0,"td",29),o.Mc(1),o.kc(2,"titlecase"),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",o.lc(2,1,e.name)," ")}}function de(e,t){1&e&&(o.Ub(0,"th",28),o.Mc(1,"Included Services"),o.Tb())}function ue(e,t){if(1&e&&(o.Ub(0,"td",29),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",e.servicePackages," ")}}function me(e,t){1&e&&o.Pb(0,"th",30)}function pe(e,t){if(1&e){const e=o.Vb();o.Ub(0,"td",31),o.Ub(1,"button",32),o.fc("click",(function(){o.Bc(e);const a=t.$implicit;return o.jc(2).deleteModals(a)})),o.Ub(2,"mat-icon"),o.Mc(3,"delete"),o.Tb(),o.Mc(4," Remove"),o.Tb(),o.Tb()}}function ge(e,t){1&e&&o.Pb(0,"th",30)}function he(e,t){if(1&e){const e=o.Vb();o.Ub(0,"td",31),o.Ub(1,"button",33),o.fc("click",(function(){o.Bc(e);const a=t.$implicit;return o.jc(2).editSupplierModals(a)})),o.Ub(2,"mat-icon"),o.Mc(3,"edit"),o.Tb(),o.Mc(4," Add Services "),o.Tb(),o.Tb()}}function fe(e,t){1&e&&o.Pb(0,"th",30)}function Te(e,t){if(1&e&&(o.Ub(0,"td",31),o.Ub(1,"button",34),o.Ub(2,"mat-icon"),o.Mc(3,"visibility"),o.Tb(),o.Mc(4," More ..."),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.sc("routerLink","/packages/",e.id,"")}}function Ue(e,t){1&e&&o.Pb(0,"tr",35)}function ke(e,t){1&e&&o.Pb(0,"tr",36)}const ve=function(){return[5,10,25,50,100]};function Me(e,t){if(1&e){const e=o.Vb();o.Ub(0,"div",5),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-content"),o.Ub(3,"div",6),o.Ub(4,"div",7),o.Ub(5,"div",8),o.Ub(6,"mat-form-field",9),o.Ub(7,"mat-label"),o.Mc(8,"Filter by ID"),o.Tb(),o.Ub(9,"input",10),o.fc("keyup",(function(){return o.Bc(e),o.jc().loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Pb(10,"span",11),o.Ub(11,"div",8),o.Ub(12,"mat-form-field",9),o.Ub(13,"mat-label"),o.Mc(14,"Filter by Supplier"),o.Tb(),o.Ub(15,"input",10),o.fc("keyup",(function(){return o.Bc(e),o.jc().loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(16,"div",12),o.Ub(17,"table",13),o.Sb(18,14),o.Kc(19,oe,2,0,"th",15),o.Kc(20,se,2,1,"td",16),o.Rb(),o.Sb(21,17),o.Kc(22,be,2,0,"th",15),o.Kc(23,le,3,3,"td",16),o.Rb(),o.Sb(24,18),o.Kc(25,de,2,0,"th",15),o.Kc(26,ue,2,1,"td",16),o.Rb(),o.Sb(27,19),o.Kc(28,me,1,0,"th",20),o.Kc(29,pe,5,0,"td",21),o.Rb(),o.Sb(30,22),o.Kc(31,ge,1,0,"th",20),o.Kc(32,he,5,0,"td",21),o.Rb(),o.Sb(33,23),o.Kc(34,fe,1,0,"th",20),o.Kc(35,Te,5,1,"td",21),o.Rb(),o.Kc(36,Ue,1,0,"tr",24),o.Kc(37,ke,1,0,"tr",25),o.Tb(),o.Tb(),o.Ub(38,"div",26),o.Ub(39,"mat-paginator",27),o.fc("page",(function(t){return o.Bc(e),o.jc().paginate(t)})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&e){const e=o.jc();o.Bb(9),o.qc("formControl",e.codeField),o.Bb(6),o.qc("formControl",e.nameField),o.Bb(2),o.qc("dataSource",e.packages),o.Bb(19),o.qc("matHeaderRowDef",e.displayedColumns),o.Bb(1),o.qc("matRowDefColumns",e.displayedColumns),o.Bb(2),o.qc("length",e.packages.length)("pageSize",25)("pageSizeOptions",o.tc(9,ve))("showFirstLastButtons",!0)}}const Be=function(){return["Packages","Show All Service Packages"]};let Se=(()=>{class e{constructor(e,t,a,c,i){this.servicesToAdd=e,this.dialog=t,this.snackBar=a,this.mappingService=c,this.otherService=i,this.displayedColumns=["packageid","package","services","delete-col","update-col","more-col"],this.services=[],this.userParams={},this.pageSize=25,this.pageIndex=1,this.live=!1,this.codeField=new F.e,this.nameField=new F.e}ngOnInit(){this.loadingState=!0,this.live=!0,this.loadData()}paginate(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}ngOnDestroy(){this.loadData(),this.live=!0,this.refreshData()}refreshData(){this.loadData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.id=this.codeField.value,this.otherService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.services=e.result},e=>{console.log(e),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:3e3})}),this.mappingService.getServiceWithPackages(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.loadingState=!1,this.packages=e.body},e=>{switch(console.log(e),e.status){case 401:case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("there is a problem loading roles\u2757","\u274c",{duration:3e3})}})}editSupplierModals(e){this.dialog.open(te,{width:"500px",data:{package:e,services:this.getSuppliersArray(e)}}).afterClosed().subscribe(t=>{if(!t)return;this.loadingState=!0;const a={serviceNames:[...t.filter(e=>!0===e.checked).map(e=>e.name)],serviceid:[...t.filter(e=>!0===e.checked).map(e=>e.id)]};a&&this.servicesToAdd.addServices(e.id,a).subscribe(()=>{e.servicePackages=[...a.serviceNames],this.snackBar.open("Suppliers Added successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Package already been supplied by the Service\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}deleteModals(e){this.dialog.open(r.a,{width:"500px",data:{message:e.servicePackages}}).afterClosed().subscribe(t=>{if(!t)return;this.loadingState=!0;const a=this.getSuppliersArray(e),c={serviceNames:[...a.map(e=>e.name)],serviceid:[...a.map(e=>e.id)]};a&&this.servicesToAdd.removeServices(e.id,c).subscribe(()=>{this.snackBar.open("Suppliers removed successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}getSuppliersArray(e){const t=[],a=e.servicePackages,c=this.services;for(let i=0;i<c.length;i++){let e=!1;for(let n=0;n<a.length;n++)if(c[i].name===a[n]){e=!0,c[i].checked=!0,t.push(c[i]);break}e||(c[i].checked=!1,t.push(c[i]))}return t}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(s.a),o.Ob(b.b),o.Ob(l.a),o.Ob(ae.a),o.Ob(ce.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-package-services"]],decls:4,vars:4,consts:[["title","Package Services",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["Supplierlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],[1,"mat-elevation-z8"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[1,"spacer"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","packageid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","package"],["matColumnDef","services"],["matColumnDef","delete-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","update-col"],["matColumnDef","more-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"click"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(o.Pb(0,"app-page-header",0),o.Kc(1,re,4,0,"div",1),o.Kc(2,Me,40,10,"ng-template",null,2,o.Lc)),2&e){const e=o.yc(3);o.qc("breadcrumbSegments",o.tc(3,Be)),o.Bb(1),o.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[d.a,c.m,u.b,m.a,m.c,w.c,w.g,I.b,F.c,F.n,F.f,ie.j,ie.c,ie.e,ie.b,ie.g,ie.i,ne.a,ie.d,ie.a,p.b,g.a,i.d,ie.f,ie.h],pipes:[c.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),e})();var qe=a("rO2v");function Fe(e,t){1&e&&(o.Ub(0,"div",3),o.Pb(1,"mat-spinner"),o.Ub(2,"h1",4),o.Mc(3,"Loading..."),o.Tb(),o.Tb())}function Pe(e,t){1&e&&(o.Ub(0,"div",20),o.Ub(1,"button",21),o.Ub(2,"mat-icon"),o.Mc(3,"add"),o.Tb(),o.Mc(4," New Package "),o.Tb(),o.Tb())}function we(e,t){if(1&e){const e=o.Vb();o.Ub(0,"mat-option",22),o.fc("click",(function(){return o.Bc(e),o.jc(3).loadData()})),o.Mc(1),o.Tb()}if(2&e){const e=t.$implicit;o.qc("value",e.id),o.Bb(1),o.Nc(e.name)}}function Ie(e,t){1&e&&(o.Ub(0,"th",39),o.Mc(1," ID "),o.Tb())}function ye(e,t){if(1&e&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",e.code," ")}}function De(e,t){1&e&&(o.Ub(0,"th",39),o.Mc(1," Name "),o.Tb())}function xe(e,t){if(1&e&&(o.Ub(0,"td",40),o.Mc(1),o.kc(2,"titlecase"),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",o.lc(2,1,e.name)," ")}}function Ke(e,t){1&e&&(o.Ub(0,"th",39),o.Mc(1," Price "),o.Tb())}function Ce(e,t){if(1&e&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",e.price," ")}}function Oe(e,t){1&e&&(o.Ub(0,"th",39),o.Mc(1," Package Status "),o.Tb())}function Ne(e,t){if(1&e&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",e.packageStatus,"")}}function je(e,t){1&e&&(o.Ub(0,"th",39),o.Mc(1," Description "),o.Tb())}function Re(e,t){if(1&e&&(o.Ub(0,"td",40),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",e.description,"")}}function Le(e,t){1&e&&o.Pb(0,"th",41)}function Ae(e,t){if(1&e&&(o.Ub(0,"td",42),o.Ub(1,"button",43),o.Ub(2,"mat-icon"),o.Mc(3,"visibility"),o.Tb(),o.Mc(4," More ..."),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.sc("routerLink","/packages/",e.id,"")}}function Ee(e,t){1&e&&o.Pb(0,"th",41)}function ze(e,t){if(1&e){const e=o.Vb();o.Ub(0,"button",45),o.fc("click",(function(){o.Bc(e);const t=o.jc().$implicit;return o.jc(4).delete(t)})),o.Ub(1,"mat-icon"),o.Mc(2,"delete"),o.Tb(),o.Mc(3," Delete"),o.Tb()}}const Ve=function(){return["Admin","Manager"]};function $e(e,t){1&e&&(o.Ub(0,"td",42),o.Kc(1,ze,4,0,"button",44),o.Tb()),2&e&&(o.Bb(1),o.qc("appHasRole",o.tc(1,Ve)))}function He(e,t){1&e&&o.Pb(0,"th",41)}function Ge(e,t){if(1&e&&(o.Ub(0,"td",42),o.Ub(1,"button",46),o.Ub(2,"mat-icon"),o.Mc(3,"edit"),o.Tb(),o.Mc(4," Change"),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.sc("routerLink","/packages/edit/",e.id,"")}}function _e(e,t){1&e&&o.Pb(0,"tr",47)}function Xe(e,t){1&e&&o.Pb(0,"tr",48)}function Ye(e,t){if(1&e&&(o.Ub(0,"div",23),o.Ub(1,"table",24),o.Sb(2,25),o.Kc(3,Ie,2,0,"th",26),o.Kc(4,ye,2,1,"td",27),o.Rb(),o.Sb(5,28),o.Kc(6,De,2,0,"th",26),o.Kc(7,xe,3,3,"td",27),o.Rb(),o.Sb(8,29),o.Kc(9,Ke,2,0,"th",26),o.Kc(10,Ce,2,1,"td",27),o.Rb(),o.Sb(11,30),o.Kc(12,Oe,2,0,"th",26),o.Kc(13,Ne,2,1,"td",27),o.Rb(),o.Sb(14,31),o.Kc(15,je,2,0,"th",26),o.Kc(16,Re,2,1,"td",27),o.Rb(),o.Sb(17,32),o.Kc(18,Le,1,0,"th",33),o.Kc(19,Ae,5,1,"td",34),o.Rb(),o.Sb(20,35),o.Kc(21,Ee,1,0,"th",33),o.Kc(22,$e,2,2,"td",34),o.Rb(),o.Sb(23,36),o.Kc(24,He,1,0,"th",33),o.Kc(25,Ge,5,1,"td",34),o.Rb(),o.Kc(26,_e,1,0,"tr",37),o.Kc(27,Xe,1,0,"tr",38),o.Tb(),o.Tb()),2&e){const e=o.jc(3);o.Bb(1),o.qc("dataSource",e.packagDataPage),o.Bb(25),o.qc("matHeaderRowDef",e.displayedColumns),o.Bb(1),o.qc("matRowDefColumns",e.displayedColumns)}}function Je(e,t){1&e&&o.Pb(0,"app-empty-data-table",49)}const We=function(){return["Admin"]},Qe=function(){return[5,10,25,50,100]};function Ze(e,t){if(1&e){const e=o.Vb();o.Ub(0,"div",6),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-content"),o.Kc(3,Pe,5,0,"div",7),o.Ub(4,"div",8),o.Ub(5,"div",9),o.Ub(6,"div",10),o.Ub(7,"mat-form-field",11),o.Ub(8,"mat-label"),o.Mc(9,"Filter by Name"),o.Tb(),o.Ub(10,"input",12),o.fc("keyup",(function(){return o.Bc(e),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(11,"div",10),o.Ub(12,"mat-form-field",11),o.Ub(13,"mat-label"),o.Mc(14,"Filter by ID"),o.Tb(),o.Ub(15,"input",12),o.fc("keyup",(function(){return o.Bc(e),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(16,"div",10),o.Ub(17,"mat-form-field",11),o.Ub(18,"mat-label"),o.Mc(19,"Filter by Price"),o.Tb(),o.Ub(20,"input",12),o.fc("keyup",(function(){return o.Bc(e),o.jc(2).loadData()})),o.Tb(),o.Tb(),o.Tb(),o.Ub(21,"div",10),o.Ub(22,"mat-form-field",11),o.Ub(23,"mat-label"),o.Mc(24,"Filter by Status"),o.Tb(),o.Ub(25,"mat-select",13),o.Ub(26,"mat-option",14),o.fc("click",(function(){return o.Bc(e),o.jc(2).loadData()})),o.Mc(27,"Any Status"),o.Tb(),o.Kc(28,we,2,2,"mat-option",15),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Kc(29,Ye,28,3,"div",16),o.Kc(30,Je,1,0,"app-empty-data-table",17),o.Ub(31,"div",18),o.Ub(32,"mat-paginator",19),o.fc("page",(function(t){return o.Bc(e),o.jc(2).paginate(t)})),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&e){const e=o.jc(2);o.Bb(3),o.qc("appHasRole",o.tc(13,We)),o.Bb(7),o.qc("formControl",e.nameField),o.Bb(5),o.qc("formControl",e.codeField),o.Bb(5),o.qc("formControl",e.priceField),o.Bb(5),o.qc("formControl",e.packagStatusField),o.Bb(1),o.qc("value",null),o.Bb(2),o.qc("ngForOf",e.packagStatus),o.Bb(1),o.qc("ngIf",e.packagDataPage.length>0),o.Bb(1),o.qc("ngIf",0===e.packagDataPage.length),o.Bb(2),o.qc("length",e.pagination.totalItems)("pageSize",e.pagination.itemsPerPage)("pageSizeOptions",o.tc(14,Qe))("showFirstLastButtons",!0)}}function et(e,t){if(1&e&&o.Kc(0,Ze,33,15,"div",5),2&e){const e=o.jc();o.qc("ngIf",void 0!==e.packagDataPage)}}const tt=function(){return["Packages","Show All Packages"]};let at=(()=>{class e{constructor(e,t,a){this.packagService=e,this.dialog=t,this.snackBar=a,this.userParams={},this.displayedColumns=["code","name","price","status","description","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.packagStatus=[{id:0,name:"Off"},{id:1,name:"Inquairy"},{id:2,name:"Propect"},{id:3,name:"Tentative"},{id:4,name:"Definate"}],this.nameField=new F.e,this.codeField=new F.e,this.packagStatusField=new F.e,this.priceField=new F.e}ngOnInit(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.code=this.codeField.value,this.userParams.packageStatus=this.packagStatusField.value,this.userParams.price=this.priceField.value,this.packagService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.loadingState=!1,this.packagDataPage=e.result,this.pagination=e.pagination},e=>{switch(e.status){case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("error loading data ","Error",{duration:3e3})}})}refreshData(){this.loadData()}paginate(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}ngOnDestroy(){this.live=!1}delete(e){this.dialog.open(r.a,{width:"500px",data:{message:e.name}}).afterClosed().subscribe(t=>{t&&(this.loadingState=!0,this.packagService.delete(e.id).subscribe(()=>{this.snackBar.open("Package Deleted successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(s.a),o.Ob(b.b),o.Ob(l.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-package-table"]],decls:4,vars:4,consts:[["title","Packages",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["packaglist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["class","mb-2",4,"appHasRole"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[3,"formControl"],["selected","",3,"value","click"],[3,"value","click",4,"ngFor","ngForOf"],["class","table-responsive table-striped",4,"ngIf"],["message","No packags to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"mb-2"],["routerLink","/packages/add","mat-raised-button","","color","primary",1,"mx-0"],[3,"value","click"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","status"],["matColumnDef","description"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No packags to show"]],template:function(e,t){if(1&e&&(o.Pb(0,"app-page-header",0),o.Kc(1,Fe,4,0,"div",1),o.Kc(2,et,1,1,"ng-template",null,2,o.Lc)),2&e){const e=o.yc(3);o.qc("breadcrumbSegments",o.tc(3,tt)),o.Bb(1),o.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[d.a,c.m,u.b,m.a,m.c,h.a,w.c,w.g,I.b,F.c,F.n,F.f,y.a,D.n,c.l,ne.a,p.b,i.d,g.a,ie.j,ie.c,ie.e,ie.b,ie.g,ie.i,ie.d,ie.a,ie.f,ie.h,qe.a],pipes:[c.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),e})();function ct(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"Name is required"),o.Tb())}function it(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("Name should has at lease ",e.nameField.errors.minlength.requiredLength," characters ")}}function nt(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("Name length should not exceed ",e.nameField.errors.maxlength.requiredLength," characters ")}}function rt(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,ct,2,0,"span",7),o.Kc(2,it,2,1,"span",7),o.Kc(3,nt,2,1,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.nameField.errors.required),o.Bb(1),o.qc("ngIf",e.nameField.errors.minlength),o.Bb(1),o.qc("ngIf",e.nameField.errors.maxlength)}}function ot(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"hoursField is required"),o.Tb())}function st(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("hoursField length should not exceed ",e.hoursField.errors.maxlength.requiredLength," characters, ")}}function bt(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,ot,2,0,"span",7),o.Kc(2,st,2,1,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.hoursField.errors.required),o.Bb(1),o.qc("ngIf",e.hoursField.errors.maxlength)}}function lt(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"Price is required"),o.Tb())}function dt(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,lt,2,0,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.priceField.errors.required)}}function ut(e,t){if(1&e&&(o.Ub(0,"mat-option",29),o.Mc(1),o.Tb()),2&e){const e=t.$implicit;o.qc("value",e.name),o.Bb(1),o.Nc(e.name)}}function mt(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"packageStatus is required"),o.Tb())}function pt(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,mt,2,0,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.packageStatusField.errors.required)}}function gt(e,t){1&e&&(o.Ub(0,"span"),o.Mc(1,"Date Added is required"),o.Tb())}function ht(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,gt,2,0,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.tocreationField.errors.required)}}function ft(e,t){if(1&e&&(o.Ub(0,"span"),o.Mc(1),o.Tb()),2&e){const e=o.jc(2);o.Bb(1),o.Oc("Description length should not exceed ",e.descriptionField.errors.maxlength.requiredLength," characters ")}}function Tt(e,t){if(1&e&&(o.Ub(0,"mat-error"),o.Kc(1,ft,2,1,"span",7),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.qc("ngIf",e.descriptionField.errors.maxlength)}}const Ut=function(e){return["Packages","Show All Packages",e]};let kt=(()=>{class e{constructor(e,t,a,c){this.packageService=e,this.route=t,this.snackBar=a,this.router=c,this.packageStatus=[{id:0,name:"Off"},{id:1,name:"Inquairy"},{id:2,name:"Propect"},{id:3,name:"Tentative"},{id:4,name:"Definate"}],this.form=new F.h({name:new F.e("",[F.u.required,F.u.minLength(3),F.u.maxLength(255)]),description:new F.e("",[F.u.required,F.u.maxLength(65535)]),hours:new F.e("",[F.u.required,F.u.maxLength(12)]),price:new F.e("",[F.u.required]),tocreation:new F.e("",[F.u.required]),extrahourcost:new F.e("",[F.u.required]),packageStatus:new F.e("",[F.u.required])}),this.route.data.subscribe(({packag:e})=>{this.package=e,this.packageId=e.id,this.setValues()})}get packageStatusField(){return this.form.controls.packageStatus}get priceField(){return this.form.controls.price}get hoursField(){return this.form.controls.hours}get extrahourcostField(){return this.form.controls.extrahourcost}get tocreationField(){return this.form.controls.tocreation}get descriptionField(){return this.form.controls.description}get nameField(){return this.form.controls.name}ngOnInit(){}discardChanges(){this.setValues()}submit(){this.form.invalid||(this.package=this.form.value,this.package.code="PAC"+Math.round(1e5*Math.random()),this.packageService.update(this.packageId,this.package).subscribe(e=>{this.snackBar.open("Package successfully Updated","\u2714",{duration:2e3}),this.router.navigateByUrl("/packages/"+e.id)},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(e.error.message,"Error\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}}))}setValues(){this.descriptionField.pristine&&this.descriptionField.setValue(this.package.description),this.hoursField.pristine&&this.hoursField.patchValue(this.package.hours),this.packageStatusField.pristine&&this.packageStatusField.patchValue(this.package.packageStatus),this.extrahourcostField.pristine&&this.extrahourcostField.patchValue(this.package.extrahourcost),this.priceField.pristine&&this.priceField.patchValue(this.package.price),this.tocreationField.pristine&&this.tocreationField.patchValue(this.package.tocreation),this.nameField.pristine&&this.nameField.patchValue(this.package.name)}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(s.a),o.Ob(i.a),o.Ob(l.a),o.Ob(i.c))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-package-update-form"]],decls:83,vars:15,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"row"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"col-sm-5"],["matInput","","formControlName","hours","required",""],[1,"col-sm-7"],["matInput","","formControlName","price","required",""],[1,"col-md-4"],["required","","formControlName","packageStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","extrahourcost"],["required","","matInput","","formControlName","tocreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/packages","mat-stroked-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(e,t){if(1&e&&(o.Pb(0,"app-page-header",0),o.Ub(1,"form",1),o.fc("ngSubmit",(function(){return t.submit()})),o.Ub(2,"mat-card"),o.Ub(3,"mat-card-content"),o.Ub(4,"div",2),o.Ub(5,"div",3),o.Ub(6,"div",4),o.Ub(7,"mat-form-field",5),o.Ub(8,"mat-label"),o.Mc(9,"Package Name"),o.Tb(),o.Pb(10,"input",6),o.Ub(11,"mat-hint"),o.Mc(12,"Ex: BallRoom"),o.Tb(),o.Kc(13,rt,4,3,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(14,"div",2),o.Ub(15,"div",3),o.Ub(16,"div",8),o.Ub(17,"mat-form-field",5),o.Ub(18,"mat-label"),o.Mc(19,"Hours"),o.Tb(),o.Pb(20,"input",9),o.Ub(21,"mat-hint"),o.Mc(22,"Ex: 7h or 12h"),o.Tb(),o.Kc(23,bt,3,2,"mat-error",7),o.Tb(),o.Tb(),o.Ub(24,"div",10),o.Ub(25,"mat-form-field",5),o.Ub(26,"mat-label"),o.Mc(27,"Price"),o.Tb(),o.Pb(28,"input",11),o.Ub(29,"mat-hint"),o.Mc(30,"Ex: $1970"),o.Tb(),o.Kc(31,dt,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(32,"div",2),o.Ub(33,"div",3),o.Ub(34,"div",12),o.Ub(35,"mat-form-field",5),o.Ub(36,"mat-label"),o.Mc(37,"Package Status"),o.Tb(),o.Ub(38,"mat-select",13),o.Ub(39,"mat-option",14),o.Mc(40,"Select the Type"),o.Tb(),o.Kc(41,ut,2,2,"mat-option",15),o.Tb(),o.Kc(42,pt,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Ub(43,"div",12),o.Ub(44,"mat-form-field",5),o.Ub(45,"mat-label"),o.Mc(46,"Extra Hour Cost"),o.Tb(),o.Pb(47,"input",16),o.Ub(48,"mat-hint"),o.Mc(49,"Ex $: 500"),o.Tb(),o.Tb(),o.Tb(),o.Ub(50,"div",12),o.Ub(51,"mat-form-field",5),o.Ub(52,"mat-label"),o.Mc(53,"Date Added"),o.Tb(),o.Pb(54,"input",17),o.Pb(55,"mat-datepicker-toggle",18),o.Ub(56,"mat-datepicker",19,20),o.fc("yearSelected",(function(){return 1992})),o.Tb(),o.Kc(58,ht,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(59,"div",2),o.Ub(60,"mat-form-field",5),o.Ub(61,"mat-label"),o.Mc(62,"Description"),o.Tb(),o.Pb(63,"textarea",21),o.Kc(64,Tt,2,1,"mat-error",7),o.Tb(),o.Tb(),o.Ub(65,"div",22),o.Ub(66,"button",23),o.Ub(67,"mat-icon"),o.Mc(68,"list"),o.Tb(),o.Mc(69," All Packages"),o.Tb(),o.Pb(70,"span",24),o.Ub(71,"button",25),o.fc("click",(function(){return t.discardChanges()})),o.Ub(72,"mat-icon"),o.Mc(73,"refresh"),o.Tb(),o.Mc(74," Clear"),o.Tb(),o.Ub(75,"button",26),o.Ub(76,"mat-icon"),o.Mc(77,"save"),o.Tb(),o.Mc(78," Save"),o.Tb(),o.Tb(),o.Tb(),o.Ub(79,"mat-card-actions",27),o.Ub(80,"span",28),o.Mc(81,"*"),o.Tb(),o.Mc(82," Required Fields "),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.yc(57);o.sc("title","Package Change Form of ",t.package.code,""),o.qc("breadcrumbSegments",o.uc(13,Ut,"Change Details of "+t.package.code)),o.Bb(1),o.qc("formGroup",t.form),o.Bb(12),o.qc("ngIf",t.nameField.invalid),o.Bb(10),o.qc("ngIf",t.hoursField.invalid),o.Bb(8),o.qc("ngIf",t.priceField.invalid),o.Bb(8),o.qc("value",null),o.Bb(2),o.qc("ngForOf",t.packageStatus),o.Bb(1),o.qc("ngIf",t.packageStatusField.invalid),o.Bb(12),o.qc("matDatepicker",e),o.Bb(1),o.qc("for",e),o.Bb(3),o.qc("ngIf",t.tocreationField.invalid),o.Bb(6),o.qc("ngIf",t.descriptionField.invalid)}},directives:[d.a,F.w,F.o,F.i,m.a,m.c,w.c,w.g,I.b,F.c,F.n,F.g,F.t,w.f,c.m,y.a,D.n,c.l,x.b,x.d,w.h,x.a,p.b,i.d,g.a,m.b,w.b],styles:[""]}),e})();var vt=a("EY2u"),Mt=a("JIr8");let Bt=(()=>{class e{constructor(e,t){this.packageService=e,this.route=t}resolve(e){return this.packageService.get(e.params.id).pipe(Object(Mt.a)(()=>(this.route.navigateByUrl("/packages"),vt.a)))}}return e.\u0275fac=function(t){return new(t||e)(o.cc(s.a),o.cc(i.c))},e.\u0275prov=o.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const St=[{path:"",component:at},{path:"add",component:W},{path:"showservices",component:Se},{path:":id",component:q,resolve:{packag:Bt}},{path:"edit/:id",component:kt,resolve:{packag:Bt}}];let qt=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(St)],i.g]}),e})();var Ft=a("hctd"),Pt=a("FpXt");let wt=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},imports:[[c.c,qt,Pt.a,Ft.a,F.s,F.j]]}),e})()}}]);