(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{gDso:function(e,t,n){"use strict";n.r(t),n.d(t,"EmployeesModule",(function(){return Ci}));var i=n("ofXK"),a=n("tyNb"),r=n("mrSG"),o=n("zHse"),c=n("fXoL"),s=n("Sq4H"),l=n("0IaG"),b=n("dNgK"),d=n("5VPf"),m=n("Xa2L"),u=n("Wp6s"),p=n("bTqV"),f=n("NFeN"),h=n("yX84"),g=n("jhN1");let T=(()=>{class e{constructor(e){this.sanitizer=e}transform(e){if("string"!=typeof e)return e;const t=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");return this.sanitizer.bypassSecurityTrustHtml(t)}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(g.b))},e.\u0275pipe=c.Nb({name:"nl2br",type:e,pure:!0}),e})();function U(e,t){1&e&&(c.Ub(0,"div",4),c.Pb(1,"mat-spinner"),c.Tb())}function v(e,t){if(1&e&&(c.Ub(0,"tr"),c.Ub(1,"th"),c.Mc(2,"Description"),c.Tb(),c.Pb(3,"td",11),c.kc(4,"nl2br"),c.Tb()),2&e){const e=c.jc(3);c.Bb(3),c.qc("innerHTML",c.lc(4,1,e.employee.description),c.Cc)}}function B(e,t){if(1&e&&(c.Ub(0,"tr"),c.Ub(1,"th"),c.Mc(2,"assigned Events"),c.Tb(),c.Ub(3,"td"),c.Mc(4),c.Tb(),c.Tb()),2&e){const e=c.jc(3);c.Bb(4),c.Nc(e.employee.eventEmployees)}}function M(e,t){if(1&e){const e=c.Vb();c.Ub(0,"button",19),c.fc("click",(function(){return c.Bc(e),c.jc(3).delete()})),c.Ub(1,"mat-icon"),c.Mc(2,"delete"),c.Tb(),c.Mc(3," Delete"),c.Tb()}}const q=function(){return["Admin","Manager"]};function y(e,t){if(1&e&&(c.Ub(0,"div",5),c.Ub(1,"div",6),c.Ub(2,"mat-card",7),c.Pb(3,"img",8),c.Ub(4,"mat-card-content"),c.Ub(5,"table",9),c.Ub(6,"tbody"),c.Ub(7,"tr"),c.Ub(8,"th"),c.Mc(9,"ID"),c.Tb(),c.Ub(10,"td"),c.Mc(11),c.Tb(),c.Tb(),c.Ub(12,"tr"),c.Ub(13,"th"),c.Mc(14,"Created Date"),c.Tb(),c.Ub(15,"td"),c.Mc(16),c.kc(17,"date"),c.Tb(),c.Tb(),c.Ub(18,"tr"),c.Ub(19,"th"),c.Mc(20,"Created Time"),c.Tb(),c.Ub(21,"td"),c.Mc(22),c.kc(23,"date"),c.Tb(),c.Tb(),c.Ub(24,"tr"),c.Ub(25,"th"),c.Mc(26,"Creator"),c.Tb(),c.Ub(27,"td"),c.Mc(28),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(29,"div",10),c.Ub(30,"mat-card",7),c.Ub(31,"mat-card-content"),c.Ub(32,"table",9),c.Ub(33,"tbody"),c.Ub(34,"tr"),c.Ub(35,"th"),c.Mc(36,"ID"),c.Tb(),c.Ub(37,"td"),c.Mc(38),c.Tb(),c.Tb(),c.Ub(39,"tr"),c.Ub(40,"th"),c.Mc(41,"Full Name"),c.Tb(),c.Ub(42,"td"),c.Mc(43),c.Tb(),c.Tb(),c.Ub(44,"tr"),c.Ub(45,"th"),c.Mc(46,"Designation"),c.Tb(),c.Ub(47,"td"),c.Mc(48),c.Tb(),c.Tb(),c.Ub(49,"tr"),c.Ub(50,"th"),c.Mc(51,"NIC Number"),c.Tb(),c.Ub(52,"td"),c.Mc(53),c.Tb(),c.Tb(),c.Ub(54,"tr"),c.Ub(55,"th"),c.Mc(56,"Gender"),c.Tb(),c.Ub(57,"td"),c.Mc(58),c.Tb(),c.Tb(),c.Ub(59,"tr"),c.Ub(60,"th"),c.Mc(61,"Date of Birth"),c.Tb(),c.Ub(62,"td"),c.Mc(63),c.kc(64,"date"),c.Tb(),c.Tb(),c.Ub(65,"tr"),c.Ub(66,"th"),c.Mc(67,"Contacts"),c.Tb(),c.Ub(68,"td"),c.Mc(69),c.Tb(),c.Tb(),c.Ub(70,"tr"),c.Ub(71,"th"),c.Mc(72,"Civil Status"),c.Tb(),c.Ub(73,"td"),c.Mc(74),c.Tb(),c.Tb(),c.Ub(75,"tr"),c.Ub(76,"th"),c.Mc(77,"Email Address"),c.Tb(),c.Ub(78,"td"),c.Mc(79),c.Tb(),c.Tb(),c.Ub(80,"tr"),c.Ub(81,"th"),c.Mc(82,"Address"),c.Tb(),c.Pb(83,"td",11),c.kc(84,"nl2br"),c.Tb(),c.Ub(85,"tr"),c.Ub(86,"th"),c.Mc(87,"Date of Recruit"),c.Tb(),c.Pb(88,"td",11),c.kc(89,"date"),c.Tb(),c.Kc(90,v,5,3,"tr",0),c.Ub(91,"tr"),c.Ub(92,"th"),c.Mc(93,"Employee Status"),c.Tb(),c.Ub(94,"td"),c.Mc(95),c.Tb(),c.Tb(),c.Kc(96,B,5,1,"tr",0),c.Tb(),c.Tb(),c.Tb(),c.Ub(97,"button",12),c.Ub(98,"mat-icon"),c.Mc(99,"add"),c.Tb(),c.Mc(100," assign Events"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(101,"div",13),c.Kc(102,M,4,0,"button",14),c.Pb(103,"span",15),c.Ub(104,"button",16),c.Ub(105,"mat-icon"),c.Mc(106,"edit"),c.Tb(),c.Mc(107," Change"),c.Tb(),c.Ub(108,"button",17),c.Ub(109,"mat-icon"),c.Mc(110,"add"),c.Tb(),c.Mc(111," New Employee"),c.Tb(),c.Ub(112,"button",18),c.Ub(113,"mat-icon"),c.Mc(114,"list"),c.Tb(),c.Mc(115," All Employees"),c.Tb(),c.Tb()),2&e){const e=c.jc(2);c.Bb(3),c.rc("src",e.employee.photoUrl,c.Dc),c.Bb(8),c.Nc(e.employee.code),c.Bb(5),c.Nc(c.lc(17,23,e.employee.toCreation)),c.Bb(6),c.Nc(c.nc(23,25,e.employee.toCreation,"shortTime","+0530")),c.Bb(6),c.Nc((null==e.employee||null==e.employee.creator?null:e.employee.creator.userName)||"Admin"),c.Bb(10),c.Nc(e.employee.code),c.Bb(5),c.Pc("",e.employee.nameTitle," . ",e.employee.fullName,""),c.Bb(5),c.Nc(e.employee.designation),c.Bb(5),c.Nc(e.employee.nic),c.Bb(5),c.Nc(e.employee.gender),c.Bb(5),c.Nc(c.lc(64,29,e.employee.doBirth)),c.Bb(6),c.Pc("",e.employee.mobile,"",e.employee.land?", "+e.employee.land:"",""),c.Bb(5),c.Nc(e.employee.civilStatus),c.Bb(5),c.Nc(e.employee.email),c.Bb(4),c.qc("innerHTML",c.lc(84,31,e.employee.address),c.Cc),c.Bb(5),c.qc("innerHTML",c.lc(89,33,e.employee.dorecruite),c.Cc),c.Bb(2),c.qc("ngIf",e.employee.description),c.Bb(5),c.Nc(e.employee.employeeStatus),c.Bb(1),c.qc("ngIf",e.employee.eventEmployees),c.Bb(6),c.qc("appHasRole",c.tc(35,q)),c.Bb(2),c.sc("routerLink","/employees/edit/",e.employee.id,"")}}const F=function(e){return["Employees","Show All Employees",e]};function I(e,t){if(1&e&&(c.Ub(0,"div"),c.Pb(1,"app-page-header",1),c.Kc(2,U,2,0,"div",2),c.Kc(3,y,116,36,"ng-template",null,3,c.Lc),c.Tb()),2&e){const e=c.yc(4),t=c.jc();c.Bb(1),c.sc("title","Employee Detail Page of ",t.employee.code,""),c.qc("breadcrumbSegments",c.uc(4,F,"Details of "+t.employee.code)),c.Bb(1),c.qc("ngIf",t.loadingState)("ngIfElse",e)}}let K=(()=>{class e{constructor(e,t,n,i,a){this.employeeService=e,this.route=t,this.dialog=n,this.snackBar=i,this.router=a,this.loadingState=!1,this.route.data.subscribe(({employee:e})=>{this.employee=e})}ngOnInit(){}getphotoUrl(){if(this.employee.photoUrl)return"data:image/png;base64,"+this.employee.photoUrl;switch(this.employee.gender){case"Female":return"../../../../assets/images/female.jpg";case"Male":return"../../../../assets/images/male.jpg";default:return"../../../../assets/images/user.png"}}delete(){this.dialog.open(o.a,{width:"400px",data:{message:this.employee.callingName}}).afterClosed().subscribe(e=>Object(r.b)(this,void 0,void 0,(function*(){e&&(this.loadingState=!0,this.employeeService.delete(this.employee.id).subscribe(()=>{this.snackBar.open("Employee Deleted successfully","\u2714",{duration:2e3}),this.router.navigateByUrl("/employees")},e=>{console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})))}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(s.a),c.Ob(a.a),c.Ob(l.b),c.Ob(b.a),c.Ob(a.c))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-employee-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["employeedetail",""],[1,"spinner"],[1,"row"],[1,"col-md-4"],[1,"example-card"],["mat-card-image","",3,"src"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],[3,"innerHTML"],["routerLink","/employees/showevents","mat-stroked-button","","color","primary"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/employees/add","mat-stroked-button",""],["routerLink","/employees","mat-raised-button","","color","primary",1,"mr-0"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"]],template:function(e,t){1&e&&c.Kc(0,I,5,6,"div",0),2&e&&c.qc("ngIf",t.employee)},directives:[i.m,d.a,m.b,u.a,u.d,u.c,p.b,a.d,f.a,h.a],pipes:[i.e,T],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),e})();var k=n("3Pt+");class C{constructor(){}}var w=n("ohFZ"),N=n("kmnG"),S=n("d3UM"),D=n("FKr1"),x=n("qFsG"),P=n("iadO"),E=n("QibW");function O(e,t){if(1&e&&(c.Ub(0,"mat-option",40),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.id),c.Bb(1),c.Nc(e.name)}}function j(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Name title is required"),c.Tb())}function L(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,j,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.nametitleField.errors.required)}}function R(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Name is required"),c.Tb())}function A(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Name should has at lease ",e.callingnameField.errors.minlength.requiredLength," characters ")}}function V(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Name length should not exceed ",e.callingnameField.errors.maxlength.requiredLength," characters ")}}function $(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid callingname"),c.Tb())}function H(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"This Callingname is already taken"),c.Tb())}function z(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,R,2,0,"span",11),c.Kc(2,A,2,1,"span",11),c.Kc(3,V,2,1,"span",11),c.Kc(4,$,2,0,"span",11),c.Kc(5,H,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.callingnameField.errors.required),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.minlength),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.pattern),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.validate)}}function G(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Name is required"),c.Tb())}function _(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Name should has at lease ",e.fullnameField.errors.minlength.requiredLength," characters ")}}function J(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Name length should not exceed ",e.fullnameField.errors.maxlength.requiredLength," characters ")}}function X(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid Name"),c.Tb())}function Z(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"This Name Already Exists"),c.Tb())}function Y(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,G,2,0,"span",11),c.Kc(2,_,2,1,"span",11),c.Kc(3,J,2,1,"span",11),c.Kc(4,X,2,0,"span",11),c.Kc(5,Z,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.fullnameField.errors.required),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.minlength),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.pattern),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.validate)}}function Q(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"NIC Number is required"),c.Tb())}function W(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("NIC Number should has at lease ",e.nicField.errors.minlength.requiredLength," characters, ")}}function ee(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("NIC NUmber length should not exceed ",e.nicField.errors.maxlength.requiredLength," characters, ")}}function te(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid NIC Number"),c.Tb())}function ne(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"NIC Number Already Exists"),c.Tb())}function ie(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Q,2,0,"span",11),c.Kc(2,W,2,1,"span",11),c.Kc(3,ee,2,1,"span",11),c.Kc(4,te,2,0,"span",11),c.Kc(5,ne,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.nicField.errors.required),c.Bb(1),c.qc("ngIf",e.nicField.errors.minlength),c.Bb(1),c.qc("ngIf",e.nicField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.nicField.errors.pattern),c.Bb(1),c.qc("ngIf",e.nicField.errors.validate)}}function ae(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Date of birth is required"),c.Tb())}function re(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,ae,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.dobirthField.errors.required)}}function oe(e,t){if(1&e&&(c.Ub(0,"mat-radio-button",41),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.id),c.Bb(1),c.Nc(e.name)}}function ce(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Gender is required"),c.Tb())}function se(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,ce,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.genderField.errors.required)}}function le(e,t){if(1&e&&(c.Ub(0,"mat-option",40),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.id),c.Bb(1),c.Nc(e.name)}}function be(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Civil status is required"),c.Tb())}function de(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,be,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.civilstatusField.errors.required)}}function me(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Mobile phone number is required"),c.Tb())}function ue(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Mobile phone number should has at lease ",e.mobileField.errors.minlength.requiredLength," characters, ")}}function pe(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Mobile phone number length should not exceed ",e.mobileField.errors.maxlength.requiredLength," characters, ")}}function fe(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid Mobile phone number"),c.Tb())}function he(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Mobile Number Already Exists"),c.Tb())}function ge(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,me,2,0,"span",11),c.Kc(2,ue,2,1,"span",11),c.Kc(3,pe,2,1,"span",11),c.Kc(4,fe,2,0,"span",11),c.Kc(5,he,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.mobileField.errors.required),c.Bb(1),c.qc("ngIf",e.mobileField.errors.minlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.pattern),c.Bb(1),c.qc("ngIf",e.mobileField.errors.validate)}}function Te(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Land phone number should has at lease ",e.mobileField.errors.minlength.requiredLength," characters, ")}}function Ue(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Land phone number length should not exceed ",e.mobileField.errors.maxlength.requiredLength," characters, ")}}function ve(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid Land phone number"),c.Tb())}function Be(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Te,2,1,"span",11),c.Kc(2,Ue,2,1,"span",11),c.Kc(3,ve,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.mobileField.errors.minlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.pattern)}}function Me(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Email address should has at lease ",e.emailField.errors.minlength.requiredLength," characters, ")}}function qe(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Email address length should not exceed ",e.emailField.errors.maxlength.requiredLength," characters, ")}}function ye(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid email address"),c.Tb())}function Fe(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Email Address Already Exists"),c.Tb())}function Ie(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Me,2,1,"span",11),c.Kc(2,qe,2,1,"span",11),c.Kc(3,ye,2,0,"span",11),c.Kc(4,Fe,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.emailField.errors.minlength),c.Bb(1),c.qc("ngIf",e.emailField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.emailField.errors.email),c.Bb(1),c.qc("ngIf",e.emailField.errors.validate)}}function Ke(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Address is required"),c.Tb())}function ke(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Address should has at lease ",e.addressField.errors.minlength.requiredLength," characters ")}}function Ce(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Address length should not exceed ",e.addressField.errors.maxlength.requiredLength," characters ")}}function we(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Ke,2,0,"span",11),c.Kc(2,ke,2,1,"span",11),c.Kc(3,Ce,2,1,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.addressField.errors.required),c.Bb(1),c.qc("ngIf",e.addressField.errors.minlength),c.Bb(1),c.qc("ngIf",e.addressField.errors.maxlength)}}function Ne(e,t){if(1&e&&(c.Ub(0,"mat-option",40),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.id),c.Bb(1),c.Nc(e.name)}}function Se(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Designation is required"),c.Tb())}function De(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Se,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.designationField.errors.required)}}function xe(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Date of recruitment is required"),c.Tb())}function Pe(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,xe,2,0,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.dorecruiteField.errors.required)}}function Ee(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.Oc("Description length should not exceed ",e.descriptionField.errors.maxlength.requiredLength," characters ")}}function Oe(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Ee,2,1,"span",11),c.Tb()),2&e){const e=c.jc(2);c.Bb(1),c.qc("ngIf",e.descriptionField.errors.maxlength)}}function je(e,t){1&e&&(c.Ub(0,"button",42),c.Ub(1,"mat-icon"),c.Mc(2,"list"),c.Tb(),c.Mc(3," All Employees"),c.Tb())}const Le=function(){return["Admin"]};function Re(e,t){if(1&e){const e=c.Vb();c.Ub(0,"form",2,3),c.fc("ngSubmit",(function(){return c.Bc(e),c.jc().submit()})),c.Ub(2,"mat-card"),c.Ub(3,"mat-card-content"),c.Ub(4,"div",4),c.Ub(5,"div",5),c.Ub(6,"div",6),c.Ub(7,"mat-form-field",7),c.Ub(8,"mat-label"),c.Mc(9,"Title"),c.Tb(),c.Ub(10,"mat-select",8),c.Ub(11,"mat-option",9),c.Mc(12,"Select a Title"),c.Tb(),c.Kc(13,O,2,2,"mat-option",10),c.Tb(),c.Kc(14,L,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Ub(15,"div",12),c.Ub(16,"mat-form-field",7),c.Ub(17,"mat-label"),c.Mc(18,"Calling Name"),c.Tb(),c.Pb(19,"input",13),c.Ub(20,"mat-hint"),c.Mc(21,"Ex: Json "),c.Tb(),c.Kc(22,z,6,5,"mat-error",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(23,"div",4),c.Ub(24,"mat-form-field",7),c.Ub(25,"mat-label"),c.Mc(26,"Full Name"),c.Tb(),c.Pb(27,"input",14),c.Ub(28,"mat-hint"),c.Mc(29,"Ex: Json Smith"),c.Tb(),c.Kc(30,Y,6,5,"mat-error",11),c.Tb(),c.Tb(),c.Ub(31,"div",4),c.Ub(32,"div",5),c.Ub(33,"div",15),c.Ub(34,"mat-form-field",7),c.Ub(35,"mat-label"),c.Mc(36,"NIC Number"),c.Tb(),c.Pb(37,"input",16),c.Ub(38,"mat-hint"),c.Mc(39,"Ex: 789456123V or 197894506123"),c.Tb(),c.Kc(40,ie,6,5,"mat-error",11),c.Tb(),c.Tb(),c.Ub(41,"div",15),c.Ub(42,"mat-form-field",7),c.Ub(43,"mat-label"),c.Mc(44,"Date of Birth"),c.Tb(),c.Pb(45,"input",17),c.Pb(46,"mat-datepicker-toggle",18),c.Ub(47,"mat-datepicker",19,20),c.fc("yearSelected",(function(){return 1992})),c.Tb(),c.Kc(49,re,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(50,"div",4),c.Ub(51,"div",5),c.Ub(52,"div",15),c.Ub(53,"label"),c.Mc(54,"Gender"),c.Tb(),c.Pb(55,"br"),c.Ub(56,"mat-radio-group",21),c.Kc(57,oe,2,2,"mat-radio-button",22),c.Kc(58,se,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Ub(59,"div",15),c.Ub(60,"mat-form-field",7),c.Ub(61,"mat-label"),c.Mc(62,"Civil Status"),c.Tb(),c.Ub(63,"mat-select",23),c.Ub(64,"mat-option",9),c.Mc(65,"Select a Civil Status"),c.Tb(),c.Kc(66,le,2,2,"mat-option",10),c.Tb(),c.Kc(67,de,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(68,"div",4),c.Ub(69,"div",5),c.Ub(70,"div",24),c.Ub(71,"mat-form-field",7),c.Ub(72,"mat-label"),c.Mc(73,"Mobile Phone Number"),c.Tb(),c.Pb(74,"input",25),c.Ub(75,"mat-hint"),c.Mc(76,"Ex: 0778941234 or 778941234"),c.Tb(),c.Kc(77,ge,6,5,"mat-error",11),c.Tb(),c.Tb(),c.Ub(78,"div",24),c.Ub(79,"mat-form-field",7),c.Ub(80,"mat-label"),c.Mc(81,"Land Phone Number"),c.Tb(),c.Pb(82,"input",26),c.Ub(83,"mat-hint"),c.Mc(84,"Ex: 0338941234 or 338941234"),c.Tb(),c.Kc(85,Be,4,3,"mat-error",11),c.Tb(),c.Tb(),c.Ub(86,"div",24),c.Ub(87,"mat-form-field",7),c.Ub(88,"mat-label"),c.Mc(89,"Email Address"),c.Tb(),c.Pb(90,"input",27),c.Ub(91,"mat-hint"),c.Mc(92,"Ex: user@sample.com"),c.Tb(),c.Kc(93,Ie,5,4,"mat-error",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(94,"div",4),c.Ub(95,"mat-form-field",7),c.Ub(96,"mat-label"),c.Mc(97,"Address"),c.Tb(),c.Pb(98,"textarea",28),c.Ub(99,"mat-hint"),c.Mc(100,"Ex: 123, Gampaha Road, Colombo"),c.Tb(),c.Kc(101,we,4,3,"mat-error",11),c.Tb(),c.Tb(),c.Ub(102,"div",4),c.Ub(103,"div",5),c.Ub(104,"div",15),c.Ub(105,"mat-form-field",7),c.Ub(106,"mat-label"),c.Mc(107,"Designation"),c.Tb(),c.Ub(108,"mat-select",29),c.Ub(109,"mat-option",9),c.Mc(110,"Select a Designation"),c.Tb(),c.Kc(111,Ne,2,2,"mat-option",10),c.Tb(),c.Kc(112,De,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Ub(113,"div",15),c.Ub(114,"mat-form-field",7),c.Ub(115,"mat-label"),c.Mc(116,"Date of Recruitment"),c.Tb(),c.Pb(117,"input",30),c.Pb(118,"mat-datepicker-toggle",18),c.Pb(119,"mat-datepicker",null,31),c.Kc(121,Pe,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(122,"div",4),c.Ub(123,"mat-form-field",7),c.Ub(124,"mat-label"),c.Mc(125,"Description"),c.Tb(),c.Pb(126,"textarea",32),c.Kc(127,Oe,2,1,"mat-error",11),c.Tb(),c.Tb(),c.Ub(128,"div",33),c.Kc(129,je,4,0,"button",34),c.Pb(130,"span",35),c.Ub(131,"button",36),c.Ub(132,"mat-icon"),c.Mc(133,"refresh"),c.Tb(),c.Mc(134," Clear"),c.Tb(),c.Ub(135,"button",37),c.Ub(136,"mat-icon"),c.Mc(137,"save"),c.Tb(),c.Mc(138," Save"),c.Tb(),c.Tb(),c.Tb(),c.Ub(139,"mat-card-actions",38),c.Ub(140,"span",39),c.Mc(141,"*"),c.Tb(),c.Mc(142," Required Fields "),c.Tb(),c.Tb(),c.Tb()}if(2&e){const e=c.yc(1),t=c.yc(48),n=c.yc(120),i=c.jc();c.qc("formGroup",i.form),c.Bb(11),c.qc("value",null),c.Bb(2),c.qc("ngForOf",i.nametitles),c.Bb(1),c.qc("ngIf",i.nametitleField.invalid),c.Bb(8),c.qc("ngIf",i.callingnameField.invalid),c.Bb(8),c.qc("ngIf",i.fullnameField.invalid),c.Bb(10),c.qc("ngIf",i.nicField.invalid),c.Bb(5),c.qc("matDatepicker",t),c.Bb(1),c.qc("for",t),c.Bb(3),c.qc("ngIf",i.dobirthField.invalid),c.Bb(8),c.qc("ngForOf",i.genders),c.Bb(1),c.qc("ngIf",i.genderField.invalid&&e.submitted),c.Bb(6),c.qc("value",null),c.Bb(2),c.qc("ngForOf",i.civilstatuses),c.Bb(1),c.qc("ngIf",i.civilstatusField.invalid),c.Bb(10),c.qc("ngIf",i.mobileField.invalid),c.Bb(8),c.qc("ngIf",i.mobileField.invalid),c.Bb(8),c.qc("ngIf",i.emailField.invalid),c.Bb(8),c.qc("ngIf",i.addressField.invalid),c.Bb(8),c.qc("value",null),c.Bb(2),c.qc("ngForOf",i.designations),c.Bb(1),c.qc("ngIf",i.designationField.invalid),c.Bb(5),c.qc("matDatepicker",n),c.Bb(1),c.qc("for",n),c.Bb(3),c.qc("ngIf",i.dorecruiteField.invalid),c.Bb(6),c.qc("ngIf",i.descriptionField.invalid),c.Bb(2),c.qc("appHasRole",c.tc(27,Le))}}const Ae=function(){return["Employees","Add a New Employee"]},Ve=function(){return["Admin","Manager"]};let $e=(()=>{class e{constructor(e,t,n,i){this.employeeService=e,this.snackBar=t,this.asyncValidation=n,this.router=i,this.employee=new C,this.nametitles=[{id:1,name:"Mr"},{id:2,name:"Mrs"},{id:3,name:"Miss"}],this.designations=[{id:1,name:"Manager"},{id:2,name:"Employee"},{id:3,name:"CEO"},{id:4,name:"Vice President"},{id:5,name:"Director"}],this.genders=[{id:1,name:"Male"},{id:2,name:"Female"}],this.civilstatuses=[{id:1,name:"Single"},{id:2,name:"Married"}],this.form=new k.h({callingname:new k.e("",[k.u.required,k.u.minLength(3),k.u.maxLength(255),k.u.pattern("^[A-Za-z]+$")],[this.asyncValidation.validateCallingName]),fullname:new k.e("",[k.u.required,k.u.minLength(3),k.u.maxLength(255),k.u.pattern("[a-zA-Z-,]+(s{0,1}[a-zA-Z-, ])*$")],[this.asyncValidation.validateName]),dobirth:new k.e("",[k.u.required]),nic:new k.e("",[k.u.required,k.u.minLength(10),k.u.maxLength(12),k.u.pattern("^(([0-9]{12})|([0-9]{9}[vVxX]))$")],[this.asyncValidation.validateNic]),mobile:new k.e("",[k.u.required,k.u.minLength(9),k.u.maxLength(10),k.u.pattern("^([0]?[0-9]{9})$")],[this.asyncValidation.validateMobile]),land:new k.e("",[k.u.minLength(9),k.u.maxLength(10),k.u.pattern("^([0]?[0-9]{9})$")]),address:new k.e("",[k.u.required,k.u.minLength(4),k.u.maxLength(65535)]),email:new k.e("",[k.u.minLength(4),k.u.maxLength(255),k.u.email],[this.asyncValidation.validateEmail]),description:new k.e("",[k.u.maxLength(65535)]),dorecruite:new k.e("",[k.u.required]),gender:new k.e("",[k.u.required]),civilstatus:new k.e("",[k.u.required]),designation:new k.e("",[k.u.required]),nametitle:new k.e("",[k.u.required])})}onkeyup(){console.log(this.callingnameField)}get callingnameField(){return this.form.controls.callingname}get fullnameField(){return this.form.controls.fullname}get dobirthField(){return this.form.controls.dobirth}get nicField(){return this.form.controls.nic}get mobileField(){return this.form.controls.mobile}get landField(){return this.form.controls.land}get addressField(){return this.form.controls.address}get emailField(){return this.form.controls.email}get descriptionField(){return this.form.controls.description}get dorecruiteField(){return this.form.controls.dorecruite}get genderField(){return this.form.controls.gender}get civilstatusField(){return this.form.controls.civilstatus}get designationField(){return this.form.controls.designation}get nametitleField(){return this.form.controls.nametitle}ngOnInit(){}submit(){this.form.invalid||(this.employee=this.form.value,this.employee.code="EMP"+Math.round(1e5*Math.random()),this.employeeService.add(this.employee).subscribe(e=>{this.snackBar.open("Employee created successfully",null,{duration:2e3}),this.router.navigateByUrl("/employees/"+e.id)},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again",null,{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error",{duration:2e3})}}))}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(s.a),c.Ob(b.a),c.Ob(w.a),c.Ob(a.c))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-employee-form"]],decls:2,vars:4,consts:[["title","Employee Form",3,"breadcrumbSegments"],[3,"formGroup","ngSubmit",4,"appHasRole"],[3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"form-group"],[1,"row"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","nametitle"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","callingname","required",""],["matInput","","formControlName","fullname","required",""],[1,"col-md-6"],["matInput","","formControlName","nic","required",""],["required","","matInput","","formControlName","dobirth",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["required","","formControlName","gender",1,"form-radio-group"],["class","form-radio-button",3,"value",4,"ngFor","ngForOf"],["required","","formControlName","civilstatus"],[1,"col-md-4"],["matInput","","formControlName","mobile","required",""],["matInput","","formControlName","land"],["matInput","","formControlName","email"],["rows","3","matInput","","formControlName","address","required",""],["required","","formControlName","designation"],["required","","matInput","","formControlName","dorecruite",3,"matDatepicker"],["dorecruitepicker",""],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/employees","class","ml-0","mat-raised-button","","color","primary",4,"appHasRole"],[1,"spacer"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"],[1,"form-radio-button",3,"value"],["routerLink","/employees","mat-raised-button","","color","primary",1,"ml-0"]],template:function(e,t){1&e&&(c.Pb(0,"app-page-header",0),c.Kc(1,Re,143,28,"form",1)),2&e&&(c.qc("breadcrumbSegments",c.tc(2,Ae)),c.Bb(1),c.qc("appHasRole",c.tc(3,Ve)))},directives:[d.a,h.a,k.w,k.o,k.i,u.a,u.c,N.c,N.g,S.a,k.t,k.n,k.g,D.n,i.l,i.m,x.b,k.c,N.f,P.b,P.d,N.h,P.a,E.b,p.b,f.a,u.b,N.b,E.a,a.d],styles:[""]}),e})();var He=n("M9IT"),ze=n("+0xr"),Ge=n("rO2v");function _e(e,t){1&e&&(c.Ub(0,"div",3),c.Pb(1,"mat-spinner"),c.Ub(2,"h1",4),c.Mc(3,"Loading..."),c.Tb(),c.Tb())}function Je(e,t){1&e&&(c.Ub(0,"button",22),c.Ub(1,"mat-icon"),c.Mc(2,"add"),c.Tb(),c.Mc(3," New Employee "),c.Tb())}const Xe=function(){return["Admin","Manager","Supervisor"]};function Ze(e,t){1&e&&(c.Ub(0,"div",20),c.Kc(1,Je,4,0,"button",21),c.Tb()),2&e&&(c.Bb(1),c.qc("appHasRole",c.tc(1,Xe)))}function Ye(e,t){if(1&e){const e=c.Vb();c.Ub(0,"mat-option",23),c.fc("click",(function(){return c.Bc(e),c.jc(3).loadData()})),c.Mc(1),c.Tb()}if(2&e){const e=t.$implicit;c.qc("value",e.id),c.Bb(1),c.Nc(e.name)}}function Qe(e,t){1&e&&(c.Ub(0,"th",41),c.Mc(1,"Photo"),c.Tb())}function We(e,t){1&e&&c.Pb(0,"img",45)}function et(e,t){if(1&e&&c.Pb(0,"img",46),2&e){const e=c.jc().$implicit;c.rc("src",e.photos[0].filename,c.Dc)}}function tt(e,t){if(1&e&&(c.Ub(0,"td",42),c.Kc(1,We,1,0,"img",43),c.Kc(2,et,1,1,"img",44),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.qc("ngIf",!e.photos[0]),c.Bb(1),c.qc("ngIf",e.photos[0])}}function nt(e,t){1&e&&(c.Ub(0,"th",41),c.Mc(1,"Code"),c.Tb())}function it(e,t){if(1&e&&(c.Ub(0,"td",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Nc(e.code)}}function at(e,t){1&e&&(c.Ub(0,"th",41),c.Mc(1,"Calling Name"),c.Tb())}function rt(e,t){if(1&e&&(c.Ub(0,"td",42),c.Mc(1),c.kc(2,"titlecase"),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Pc(" ",e.nameTitle,".",c.lc(2,2,e.fullName)," ")}}function ot(e,t){1&e&&(c.Ub(0,"th",41),c.Mc(1,"Designation"),c.Tb())}function ct(e,t){if(1&e&&(c.Ub(0,"td",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc(" ",e.designation," ")}}function st(e,t){1&e&&(c.Ub(0,"th",41),c.Mc(1,"NIC Number"),c.Tb())}function lt(e,t){if(1&e&&(c.Ub(0,"td",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Nc(e.nic)}}function bt(e,t){1&e&&(c.Ub(0,"th",41),c.Mc(1,"Mobile Number"),c.Tb())}function dt(e,t){if(1&e&&(c.Ub(0,"td",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Nc(e.mobile)}}function mt(e,t){1&e&&c.Pb(0,"th",47)}function ut(e,t){if(1&e&&(c.Ub(0,"button",50),c.Ub(1,"mat-icon"),c.Mc(2,"visibility"),c.Tb(),c.Mc(3," More ... "),c.Tb()),2&e){const e=c.jc().$implicit;c.sc("routerLink","/employees/",e.id,"")}}const pt=function(){return["Admin","Manager"]};function ft(e,t){1&e&&(c.Ub(0,"td",48),c.Kc(1,ut,4,1,"button",49),c.Tb()),2&e&&(c.Bb(1),c.qc("appHasRole",c.tc(1,pt)))}function ht(e,t){1&e&&c.Pb(0,"th",47)}function gt(e,t){if(1&e){const e=c.Vb();c.Ub(0,"button",52),c.fc("click",(function(){c.Bc(e);const t=c.jc().$implicit;return c.jc(4).delete(t)})),c.Ub(1,"mat-icon"),c.Mc(2,"delete"),c.Tb(),c.Mc(3," Delete "),c.Tb()}}function Tt(e,t){1&e&&(c.Ub(0,"td",48),c.Kc(1,gt,4,0,"button",51),c.Tb()),2&e&&(c.Bb(1),c.qc("appHasRole",c.tc(1,pt)))}function Ut(e,t){1&e&&c.Pb(0,"th",47)}function vt(e,t){if(1&e&&(c.Ub(0,"button",54),c.Ub(1,"mat-icon"),c.Mc(2,"edit"),c.Tb(),c.Mc(3," Change "),c.Tb()),2&e){const e=c.jc().$implicit;c.sc("routerLink","/employees/edit/",e.id,"")}}function Bt(e,t){1&e&&(c.Ub(0,"td",48),c.Kc(1,vt,4,1,"button",53),c.Tb()),2&e&&(c.Bb(1),c.qc("appHasRole",c.tc(1,pt)))}function Mt(e,t){1&e&&c.Pb(0,"tr",55)}function qt(e,t){1&e&&c.Pb(0,"tr",56)}function yt(e,t){if(1&e&&(c.Ub(0,"div",24),c.Ub(1,"table",25),c.Sb(2,26),c.Kc(3,Qe,2,0,"th",27),c.Kc(4,tt,3,2,"td",28),c.Rb(),c.Sb(5,29),c.Kc(6,nt,2,0,"th",27),c.Kc(7,it,2,1,"td",28),c.Rb(),c.Sb(8,30),c.Kc(9,at,2,0,"th",27),c.Kc(10,rt,3,4,"td",28),c.Rb(),c.Sb(11,31),c.Kc(12,ot,2,0,"th",27),c.Kc(13,ct,2,1,"td",28),c.Rb(),c.Sb(14,32),c.Kc(15,st,2,0,"th",27),c.Kc(16,lt,2,1,"td",28),c.Rb(),c.Sb(17,33),c.Kc(18,bt,2,0,"th",27),c.Kc(19,dt,2,1,"td",28),c.Rb(),c.Sb(20,34),c.Kc(21,mt,1,0,"th",35),c.Kc(22,ft,2,2,"td",36),c.Rb(),c.Sb(23,37),c.Kc(24,ht,1,0,"th",35),c.Kc(25,Tt,2,2,"td",36),c.Rb(),c.Sb(26,38),c.Kc(27,Ut,1,0,"th",35),c.Kc(28,Bt,2,2,"td",36),c.Rb(),c.Kc(29,Mt,1,0,"tr",39),c.Kc(30,qt,1,0,"tr",40),c.Tb(),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("dataSource",e.employeeDataPage),c.Bb(28),c.qc("matHeaderRowDef",e.displayedColumns),c.Bb(1),c.qc("matRowDefColumns",e.displayedColumns)}}function Ft(e,t){1&e&&c.Pb(0,"app-empty-data-table",57)}const It=function(){return["Admin"]},Kt=function(){return[5,10,25,50,100]};function kt(e,t){if(1&e){const e=c.Vb();c.Ub(0,"div",6),c.Ub(1,"mat-card"),c.Ub(2,"mat-card-content"),c.Kc(3,Ze,2,2,"div",7),c.Ub(4,"div",8),c.Ub(5,"div",9),c.Ub(6,"div",10),c.Ub(7,"mat-form-field",11),c.Ub(8,"mat-label"),c.Mc(9,"Filter by Name"),c.Tb(),c.Ub(10,"input",12),c.fc("keyup",(function(){return c.Bc(e),c.jc(2).loadData()})),c.Tb(),c.Tb(),c.Tb(),c.Ub(11,"div",10),c.Ub(12,"mat-form-field",11),c.Ub(13,"mat-label"),c.Mc(14,"Filter by NIC number"),c.Tb(),c.Ub(15,"input",12),c.fc("keyup",(function(){return c.Bc(e),c.jc(2).loadData()})),c.Tb(),c.Tb(),c.Tb(),c.Ub(16,"div",10),c.Ub(17,"mat-form-field",11),c.Ub(18,"mat-label"),c.Mc(19,"Filter by Mobile number"),c.Tb(),c.Ub(20,"input",12),c.fc("keyup",(function(){return c.Bc(e),c.jc(2).loadData()})),c.Tb(),c.Tb(),c.Tb(),c.Ub(21,"div",10),c.Ub(22,"mat-form-field",11),c.Ub(23,"mat-label"),c.Mc(24,"Filter by Designation "),c.Tb(),c.Ub(25,"mat-select",13),c.Ub(26,"mat-option",14),c.fc("click",(function(){return c.Bc(e),c.jc(2).loadData()})),c.Mc(27,"Any Designation"),c.Tb(),c.Kc(28,Ye,2,2,"mat-option",15),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Kc(29,yt,31,3,"div",16),c.Kc(30,Ft,1,0,"app-empty-data-table",17),c.Ub(31,"div",18),c.Ub(32,"mat-paginator",19),c.fc("page",(function(t){return c.Bc(e),c.jc(2).paginate(t)})),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&e){const e=c.jc(2);c.Bb(3),c.qc("appHasRole",c.tc(13,It)),c.Bb(7),c.qc("formControl",e.nameField),c.Bb(5),c.qc("formControl",e.nicField),c.Bb(5),c.qc("formControl",e.mobileField),c.Bb(5),c.qc("formControl",e.designationField),c.Bb(1),c.qc("value",null),c.Bb(2),c.qc("ngForOf",e.designations),c.Bb(1),c.qc("ngIf",e.employeeDataPage.length>0),c.Bb(1),c.qc("ngIf",0===e.employeeDataPage.length),c.Bb(2),c.qc("length",e.pagination.totalItems)("pageSize",e.pagination.itemsPerPage)("pageSizeOptions",c.tc(14,Kt))("showFirstLastButtons",!0)}}function Ct(e,t){if(1&e&&c.Kc(0,kt,33,15,"div",5),2&e){const e=c.jc();c.qc("ngIf",void 0!==e.employeeDataPage)}}const wt=function(){return["Employees","Show All Employees"]};let Nt=(()=>{class e{constructor(e,t,n){this.employeeService=e,this.dialog=t,this.snackBar=n,this.userParams={},this.displayedColumns=["photo","code","callingname","designation","nic","mobile","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.designations=[{id:1,name:"Manager"},{id:2,name:"Employee"},{id:3,name:"CEO"},{id:4,name:"Vice President"},{id:5,name:"Director"}],this.nameField=new k.e,this.nicField=new k.e,this.mobileField=new k.e,this.designationField=new k.e}ngOnInit(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.designation=this.designationField.value,this.userParams.nic=this.nicField.value,this.userParams.mobile=this.mobileField.value,this.employeeService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.loadingState=!1,this.employeeDataPage=e.result,this.pagination=e.pagination},e=>{switch(e.status){case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("error loading data ","Error",{duration:3e3})}})}refreshData(){this.loadData()}paginate(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}ngOnDestroy(){this.live=!1}delete(e){this.dialog.open(o.a,{width:"500px",data:{message:e.callingName}}).afterClosed().subscribe(t=>{t&&(this.loadingState=!0,this.employeeService.delete(e.id).subscribe(()=>{this.snackBar.open("Employee Deleted successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),this.loadingState=!1}))})}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(s.a),c.Ob(l.b),c.Ob(b.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-employee-table"]],decls:4,vars:4,consts:[["title","Employees",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["employeelist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["class","mb-2",4,"appHasRole"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[3,"formControl"],["selected","",3,"value","click"],[3,"value","click",4,"ngFor","ngForOf"],["class","table-responsive table-striped",4,"ngIf"],["message","No employees to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"mb-2"],["class","mx-0","routerLink","/employees/add","mat-raised-button","","color","primary",4,"appHasRole"],["routerLink","/employees/add","mat-raised-button","","color","primary",1,"mx-0"],[3,"value","click"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","photo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","callingname"],["matColumnDef","designation"],["matColumnDef","nic"],["matColumnDef","mobile"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["class","user-image","src","assets/images/user.png",4,"ngIf"],["class","user-image",3,"src",4,"ngIf"],["src","assets/images/user.png",1,"user-image"],[1,"user-image",3,"src"],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["class","mat-btn-sm","mat-raised-button","",3,"routerLink",4,"appHasRole"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["class","mat-btn-sm","mat-raised-button","","color","accent",3,"routerLink",4,"appHasRole"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No employees to show"]],template:function(e,t){if(1&e&&(c.Pb(0,"app-page-header",0),c.Kc(1,_e,4,0,"div",1),c.Kc(2,Ct,1,1,"ng-template",null,2,c.Lc)),2&e){const e=c.yc(3);c.qc("breadcrumbSegments",c.tc(3,wt)),c.Bb(1),c.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[d.a,i.m,m.b,u.a,u.c,h.a,N.c,N.g,x.b,k.c,k.n,k.f,S.a,D.n,i.l,He.a,p.b,a.d,f.a,ze.j,ze.c,ze.e,ze.b,ze.g,ze.i,ze.d,ze.a,ze.f,ze.h,Ge.a],pipes:[i.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}.user-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;top:5px;left:5px}"]}),e})();var St=n("/lRe"),Dt=n("bv9b");function xt(e,t){if(1&e&&(c.Ub(0,"mat-option",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.name),c.Bb(1),c.Nc(e.name)}}function Pt(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Name title is required"),c.Tb())}function Et(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Pt,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.nametitleField.errors.required)}}function Ot(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Name is required"),c.Tb())}function jt(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Name should has at lease ",e.callingnameField.errors.minlength.requiredLength," characters ")}}function Lt(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Name length should not exceed ",e.callingnameField.errors.maxlength.requiredLength," characters ")}}function Rt(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid callingname"),c.Tb())}function At(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Ot,2,0,"span",0),c.Kc(2,jt,2,1,"span",0),c.Kc(3,Lt,2,1,"span",0),c.Kc(4,Rt,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.callingnameField.errors.required),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.minlength),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.callingnameField.errors.pattern)}}function Vt(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Name is required"),c.Tb())}function $t(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Name should has at lease ",e.fullnameField.errors.minlength.requiredLength," characters ")}}function Ht(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Name length should not exceed ",e.fullnameField.errors.maxlength.requiredLength," characters ")}}function zt(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid Name"),c.Tb())}function Gt(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Vt,2,0,"span",0),c.Kc(2,$t,2,1,"span",0),c.Kc(3,Ht,2,1,"span",0),c.Kc(4,zt,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.fullnameField.errors.required),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.minlength),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.fullnameField.errors.pattern)}}function _t(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"NIC Number is required"),c.Tb())}function Jt(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("NIC Number should has at lease ",e.nicField.errors.minlength.requiredLength," characters, ")}}function Xt(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("NIC NUmber length should not exceed ",e.nicField.errors.maxlength.requiredLength," characters, ")}}function Zt(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid NIC number"),c.Tb())}function Yt(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,_t,2,0,"span",0),c.Kc(2,Jt,2,1,"span",0),c.Kc(3,Xt,2,1,"span",0),c.Kc(4,Zt,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.nicField.errors.required),c.Bb(1),c.qc("ngIf",e.nicField.errors.minlength),c.Bb(1),c.qc("ngIf",e.nicField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.nicField.errors.pattern)}}function Qt(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Date of birth is required"),c.Tb())}function Wt(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Qt,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.dobirthField.errors.required)}}function en(e,t){if(1&e&&(c.Ub(0,"mat-radio-button",43),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.name),c.Bb(1),c.Nc(e.name)}}function tn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Gender is required"),c.Tb())}function nn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,tn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.genderField.errors.required)}}function an(e,t){if(1&e&&(c.Ub(0,"mat-option",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.name),c.Bb(1),c.Nc(e.name)}}function rn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Civil status is required"),c.Tb())}function on(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,rn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.civilstatusField.errors.required)}}function cn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Mobile phone number is required"),c.Tb())}function sn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Mobile phone number should has at lease ",e.mobileField.errors.minlength.requiredLength," characters, ")}}function ln(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Mobile phone number length should not exceed ",e.mobileField.errors.maxlength.requiredLength," characters, ")}}function bn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid Mobile phone number"),c.Tb())}function dn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,cn,2,0,"span",0),c.Kc(2,sn,2,1,"span",0),c.Kc(3,ln,2,1,"span",0),c.Kc(4,bn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.mobileField.errors.required),c.Bb(1),c.qc("ngIf",e.mobileField.errors.minlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.pattern)}}function mn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Land phone number should has at lease ",e.mobileField.errors.minlength.requiredLength," characters, ")}}function un(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Land phone number length should not exceed ",e.mobileField.errors.maxlength.requiredLength," characters, ")}}function pn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid Land phone number"),c.Tb())}function fn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,mn,2,1,"span",0),c.Kc(2,un,2,1,"span",0),c.Kc(3,pn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.mobileField.errors.minlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.mobileField.errors.pattern)}}function hn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Email address should has at lease ",e.emailField.errors.minlength.requiredLength," characters, ")}}function gn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Email address length should not exceed ",e.emailField.errors.maxlength.requiredLength," characters, ")}}function Tn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Invalid email address"),c.Tb())}function Un(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,hn,2,1,"span",0),c.Kc(2,gn,2,1,"span",0),c.Kc(3,Tn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.emailField.errors.minlength),c.Bb(1),c.qc("ngIf",e.emailField.errors.maxlength),c.Bb(1),c.qc("ngIf",e.emailField.errors.email)}}function vn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Address is required"),c.Tb())}function Bn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Address should has at lease ",e.addressField.errors.minlength.requiredLength," characters ")}}function Mn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Address length should not exceed ",e.addressField.errors.maxlength.requiredLength," characters ")}}function qn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,vn,2,0,"span",0),c.Kc(2,Bn,2,1,"span",0),c.Kc(3,Mn,2,1,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.addressField.errors.required),c.Bb(1),c.qc("ngIf",e.addressField.errors.minlength),c.Bb(1),c.qc("ngIf",e.addressField.errors.maxlength)}}function yn(e,t){if(1&e&&(c.Ub(0,"mat-option",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.name),c.Bb(1),c.Nc(e.name)}}function Fn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Designation is required"),c.Tb())}function In(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Fn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.designationField.errors.required)}}function Kn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Date of recruitment is required"),c.Tb())}function kn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Kn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.dorecruiteField.errors.required)}}function Cn(e,t){if(1&e&&(c.Ub(0,"mat-option",42),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.qc("value",e.name),c.Bb(1),c.Nc(e.name)}}function wn(e,t){1&e&&(c.Ub(0,"span"),c.Mc(1,"Designation is required"),c.Tb())}function Nn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,wn,2,0,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.designationField.errors.required)}}function Sn(e,t){if(1&e&&(c.Ub(0,"span"),c.Mc(1),c.Tb()),2&e){const e=c.jc(4);c.Bb(1),c.Oc("Description length should not exceed ",e.descriptionField.errors.maxlength.requiredLength," characters ")}}function Dn(e,t){if(1&e&&(c.Ub(0,"mat-error"),c.Kc(1,Sn,2,1,"span",0),c.Tb()),2&e){const e=c.jc(3);c.Bb(1),c.qc("ngIf",e.descriptionField.errors.maxlength)}}function xn(e,t){1&e&&(c.Ub(0,"div",44),c.Pb(1,"mat-progress-bar",45),c.Ub(2,"h1",46),c.Mc(3,"Uploading..."),c.Tb(),c.Tb())}function Pn(e,t){if(1&e){const e=c.Vb();c.Ub(0,"div"),c.Ub(1,"input",47),c.fc("change",(function(t){return c.Bc(e),c.jc(3).openPhotoChoser(t)})),c.Tb(),c.Tb(),c.Ub(2,"mat-card"),c.Pb(3,"img",48),c.Pb(4,"input",49),c.Ub(5,"mat-card-content",50),c.Ub(6,"button",51),c.fc("click",(function(){return c.Bc(e),c.jc(3).addPhoto()})),c.Ub(7,"mat-icon"),c.Mc(8,"edit"),c.Tb(),c.Mc(9,"Add Photo"),c.Tb(),c.Ub(10,"button",52),c.fc("click",(function(){return c.Bc(e),c.jc(3).clearPhoto()})),c.Ub(11,"mat-icon"),c.Mc(12,"clear"),c.Tb(),c.Mc(13,"Clear"),c.Tb(),c.Tb(),c.Tb(),c.Ub(14,"div",53),c.Ub(15,"button",54),c.fc("click",(function(){return c.Bc(e),c.jc(3).delete()})),c.Ub(16,"mat-icon"),c.Mc(17,"delete"),c.Tb(),c.Mc(18,"Delete All Photos"),c.Tb(),c.Tb()}if(2&e){const e=c.jc(3);c.Bb(3),c.rc("src",(null==e.employee||null==e.employee.photos[0]?null:e.employee.photos[0].filename)||"../../../../../../assets/images/user.png",c.Dc)}}function En(e,t){if(1&e){const e=c.Vb();c.Ub(0,"form",3,4),c.fc("ngSubmit",(function(){return c.Bc(e),c.jc(2).submit()})),c.Ub(2,"div",5),c.Ub(3,"div",6),c.Ub(4,"mat-card"),c.Ub(5,"mat-card-content"),c.Ub(6,"div",7),c.Ub(7,"div",5),c.Ub(8,"div",8),c.Ub(9,"mat-form-field",9),c.Ub(10,"mat-label"),c.Mc(11,"Title"),c.Tb(),c.Ub(12,"mat-select",10),c.Ub(13,"mat-option",11),c.Mc(14,"Select a Title"),c.Tb(),c.Kc(15,xt,2,2,"mat-option",12),c.Tb(),c.Kc(16,Et,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Ub(17,"div",13),c.Ub(18,"mat-form-field",9),c.Ub(19,"mat-label"),c.Mc(20,"Calling Name"),c.Tb(),c.Pb(21,"input",14),c.Ub(22,"mat-hint"),c.Mc(23,"Ex: Json "),c.Tb(),c.Kc(24,At,5,4,"mat-error",0),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(25,"div",7),c.Ub(26,"mat-form-field",9),c.Ub(27,"mat-label"),c.Mc(28,"Full Name"),c.Tb(),c.Pb(29,"input",15),c.Ub(30,"mat-hint"),c.Mc(31,"Ex: Json Smith"),c.Tb(),c.Kc(32,Gt,5,4,"mat-error",0),c.Tb(),c.Tb(),c.Ub(33,"div",7),c.Ub(34,"div",5),c.Ub(35,"div",16),c.Ub(36,"mat-form-field",9),c.Ub(37,"mat-label"),c.Mc(38,"NIC Number"),c.Tb(),c.Pb(39,"input",17),c.Ub(40,"mat-hint"),c.Mc(41,"Ex: 789456123V or 197894506123"),c.Tb(),c.Kc(42,Yt,5,4,"mat-error",0),c.Tb(),c.Tb(),c.Ub(43,"div",16),c.Ub(44,"mat-form-field",9),c.Ub(45,"mat-label"),c.Mc(46,"Date of Birth"),c.Tb(),c.Pb(47,"input",18),c.Pb(48,"mat-datepicker-toggle",19),c.Pb(49,"mat-datepicker",null,20),c.Kc(51,Wt,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(52,"div",7),c.Ub(53,"div",5),c.Ub(54,"div",16),c.Ub(55,"label"),c.Mc(56,"Gender"),c.Tb(),c.Ub(57,"mat-radio-group",21),c.Kc(58,en,2,2,"mat-radio-button",22),c.Kc(59,nn,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Ub(60,"div",16),c.Ub(61,"mat-form-field",9),c.Ub(62,"mat-label"),c.Mc(63,"Civil Status"),c.Tb(),c.Ub(64,"mat-select",23),c.Ub(65,"mat-option",11),c.Mc(66,"Select a Civil Status"),c.Tb(),c.Kc(67,an,2,2,"mat-option",12),c.Tb(),c.Kc(68,on,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(69,"div",7),c.Ub(70,"div",5),c.Ub(71,"div",24),c.Ub(72,"mat-form-field",9),c.Ub(73,"mat-label"),c.Mc(74,"Mobile Phone Number"),c.Tb(),c.Pb(75,"input",25),c.Ub(76,"mat-hint"),c.Mc(77,"Ex: 0778941234 or 778941234"),c.Tb(),c.Kc(78,dn,5,4,"mat-error",0),c.Tb(),c.Tb(),c.Ub(79,"div",24),c.Ub(80,"mat-form-field",9),c.Ub(81,"mat-label"),c.Mc(82,"Land Phone Number"),c.Tb(),c.Pb(83,"input",26),c.Ub(84,"mat-hint"),c.Mc(85,"Ex: 0338941234 or 338941234"),c.Tb(),c.Kc(86,fn,4,3,"mat-error",0),c.Tb(),c.Tb(),c.Ub(87,"div",24),c.Ub(88,"mat-form-field",9),c.Ub(89,"mat-label"),c.Mc(90,"Email Address"),c.Tb(),c.Pb(91,"input",27),c.Ub(92,"mat-hint"),c.Mc(93,"Ex: user@sample.com"),c.Tb(),c.Kc(94,Un,4,3,"mat-error",0),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(95,"div",7),c.Ub(96,"mat-form-field",9),c.Ub(97,"mat-label"),c.Mc(98,"Address"),c.Tb(),c.Pb(99,"textarea",28),c.Ub(100,"mat-hint"),c.Mc(101,"Ex: 123, Gampaha Road, Colombo"),c.Tb(),c.Kc(102,qn,4,3,"mat-error",0),c.Tb(),c.Tb(),c.Ub(103,"div",7),c.Ub(104,"div",5),c.Ub(105,"div",24),c.Ub(106,"mat-form-field",9),c.Ub(107,"mat-label"),c.Mc(108,"Designation"),c.Tb(),c.Ub(109,"mat-select",29),c.Ub(110,"mat-option",11),c.Mc(111,"Select a Designation"),c.Tb(),c.Kc(112,yn,2,2,"mat-option",12),c.Tb(),c.Kc(113,In,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Ub(114,"div",24),c.Ub(115,"mat-form-field",9),c.Ub(116,"mat-label"),c.Mc(117,"Date of Recruitment"),c.Tb(),c.Pb(118,"input",30),c.Pb(119,"mat-datepicker-toggle",19),c.Pb(120,"mat-datepicker",null,31),c.Kc(122,kn,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Ub(123,"div",24),c.Ub(124,"mat-form-field",9),c.Ub(125,"mat-label"),c.Mc(126,"Employee Status"),c.Tb(),c.Ub(127,"mat-select",32),c.Ub(128,"mat-option",11),c.Mc(129,"Select a Employee Status"),c.Tb(),c.Kc(130,Cn,2,2,"mat-option",12),c.Tb(),c.Kc(131,Nn,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(132,"div",7),c.Ub(133,"mat-form-field",9),c.Ub(134,"mat-label"),c.Mc(135,"Description"),c.Tb(),c.Pb(136,"textarea",33),c.Kc(137,Dn,2,1,"mat-error",0),c.Tb(),c.Tb(),c.Ub(138,"div",34),c.Ub(139,"button",35),c.Ub(140,"mat-icon"),c.Mc(141,"list"),c.Tb(),c.Mc(142," All Employees"),c.Tb(),c.Pb(143,"span",36),c.Ub(144,"button",37),c.fc("click",(function(){return c.Bc(e),c.jc(2).discardChanges()})),c.Ub(145,"mat-icon"),c.Mc(146,"refresh"),c.Tb(),c.Mc(147," Clear"),c.Tb(),c.Ub(148,"button",38),c.Ub(149,"mat-icon"),c.Mc(150,"save"),c.Tb(),c.Mc(151," Save"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(152,"div",39),c.Kc(153,xn,4,0,"div",40),c.Kc(154,Pn,19,1,"ng-template",null,41,c.Lc),c.Tb(),c.Tb(),c.Tb()}if(2&e){const e=c.yc(1),t=c.yc(50),n=c.yc(121),i=c.yc(155),a=c.jc(2);c.qc("formGroup",a.form),c.Bb(13),c.qc("value",null),c.Bb(2),c.qc("ngForOf",a.nametitles),c.Bb(1),c.qc("ngIf",a.nametitleField.invalid),c.Bb(8),c.qc("ngIf",a.callingnameField.invalid),c.Bb(8),c.qc("ngIf",a.fullnameField.invalid),c.Bb(10),c.qc("ngIf",a.nicField.invalid),c.Bb(5),c.qc("matDatepicker",t),c.Bb(1),c.qc("for",t),c.Bb(3),c.qc("ngIf",a.dobirthField.invalid),c.Bb(7),c.qc("ngForOf",a.genders),c.Bb(1),c.qc("ngIf",a.genderField.invalid&&e.submitted),c.Bb(6),c.qc("value",null),c.Bb(2),c.qc("ngForOf",a.civilstatuses),c.Bb(1),c.qc("ngIf",a.civilstatusField.invalid),c.Bb(10),c.qc("ngIf",a.mobileField.invalid),c.Bb(8),c.qc("ngIf",a.mobileField.invalid),c.Bb(8),c.qc("ngIf",a.emailField.invalid),c.Bb(8),c.qc("ngIf",a.addressField.invalid),c.Bb(8),c.qc("value",null),c.Bb(2),c.qc("ngForOf",a.designations),c.Bb(1),c.qc("ngIf",a.designationField.invalid),c.Bb(5),c.qc("matDatepicker",n),c.Bb(1),c.qc("for",n),c.Bb(3),c.qc("ngIf",a.dorecruiteField.invalid),c.Bb(6),c.qc("value",null),c.Bb(2),c.qc("ngForOf",a.employeestatuses),c.Bb(1),c.qc("ngIf",a.designationField.invalid),c.Bb(6),c.qc("ngIf",a.descriptionField.invalid),c.Bb(16),c.qc("ngIf",a.loadingState)("ngIfElse",i)}}const On=function(e){return["Employees","Show All Employees",e]},jn=function(){return["Admin","Manager"]};function Ln(e,t){if(1&e&&(c.Ub(0,"div"),c.Pb(1,"app-page-header",1),c.Kc(2,En,156,31,"form",2),c.Tb()),2&e){const e=c.jc();c.Bb(1),c.sc("title","Employee Change Form of ",e.employee.code,""),c.qc("breadcrumbSegments",c.uc(3,On,"Change Details of "+e.employee.code)),c.Bb(1),c.qc("appHasRole",c.tc(5,jn))}}let Rn=(()=>{class e{constructor(e,t,n,i,a,r){this.employeeService=e,this.route=t,this.snackBar=n,this.router=i,this.photo=a,this.dialog=r,this.nametitles=[{id:1,name:"Mr"},{id:2,name:"Mrs"},{id:3,name:"Miss"}],this.designations=[{id:1,name:"Manager"},{id:2,name:"Employee"},{id:3,name:"CEO"},{id:4,name:"Vice President"},{id:5,name:"Director"}],this.genders=[{id:1,name:"Male"},{id:2,name:"Female"}],this.civilstatuses=[{id:1,name:"Single"},{id:2,name:"Married"}],this.employeestatuses=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.imageUrl=[],this.form=new k.h({callingname:new k.e("",[k.u.required,k.u.minLength(3),k.u.maxLength(255),k.u.pattern("^[A-Za-z]+$")]),fullname:new k.e("",[k.u.required,k.u.minLength(3),k.u.maxLength(255),k.u.pattern("[a-zA-Z-,]+(s{0,1}[a-zA-Z-, ])*$")]),dobirth:new k.e("",[k.u.required]),nic:new k.e("",[k.u.required,k.u.minLength(10),k.u.maxLength(12),k.u.pattern("^(([0-9]{12})|([0-9]{9}[vVxX]))$")]),mobile:new k.e("",[k.u.required,k.u.minLength(9),k.u.maxLength(10),k.u.pattern("^([0]?[0-9]{9})$")]),land:new k.e("",[k.u.minLength(9),k.u.maxLength(10),k.u.pattern("^([0]?[0-9]{9})$")]),address:new k.e("",[k.u.required,k.u.minLength(4),k.u.maxLength(65535)]),email:new k.e("",[k.u.minLength(4),k.u.maxLength(255),k.u.email]),description:new k.e("",[k.u.maxLength(65535)]),dorecruite:new k.e("",[k.u.required]),gender:new k.e("",[k.u.required]),civilstatus:new k.e("",[k.u.required]),designation:new k.e("",[k.u.required]),nametitle:new k.e("",[k.u.required]),employeestatus:new k.e("",[k.u.required])}),this.route.data.subscribe(({employee:e})=>{this.employee=e,this.empId=e.id,this.setValues()})}get callingnameField(){return this.form.controls.callingname}get fullnameField(){return this.form.controls.fullname}get dobirthField(){return this.form.controls.dobirth}get nicField(){return this.form.controls.nic}get mobileField(){return this.form.controls.mobile}get landField(){return this.form.controls.land}get addressField(){return this.form.controls.address}get emailField(){return this.form.controls.email}get descriptionField(){return this.form.controls.description}get dorecruiteField(){return this.form.controls.dorecruite}get genderField(){return this.form.controls.gender}get civilstatusField(){return this.form.controls.civilstatus}get designationField(){return this.form.controls.designation}get nametitleField(){return this.form.controls.nametitle}get employeestatusField(){return this.form.controls.employeestatus}ngOnInit(){}discardChanges(){this.setValues()}submit(){this.form.invalid||(this.employee=this.form.value,this.employee.code="EMP"+Math.round(1e5*Math.random()),this.employeeService.update(this.empId,this.employee).subscribe(e=>{this.snackBar.open("Employee successfully Updated","\u2714",{duration:2e3}),this.router.navigateByUrl("/employees/"+e.id)},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again",null,{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(e.error.message,"Error",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error",{duration:2e3})}}))}setValues(){this.callingnameField.pristine&&this.callingnameField.patchValue(this.employee.callingName),this.fullnameField.pristine&&this.fullnameField.patchValue(this.employee.fullName),this.dobirthField.pristine&&this.dobirthField.patchValue(this.employee.doBirth),this.nicField.pristine&&this.nicField.patchValue(this.employee.nic),this.mobileField.pristine&&this.mobileField.patchValue(this.employee.mobile),this.landField.pristine&&this.landField.patchValue(this.employee.land),this.addressField.pristine&&this.addressField.patchValue(this.employee.address),this.emailField.pristine&&this.emailField.patchValue(this.employee.email),this.descriptionField.pristine&&this.descriptionField.patchValue(this.employee.description),this.dorecruiteField.pristine&&this.dorecruiteField.patchValue(this.employee.dorecruite),this.genderField.pristine&&this.genderField.setValue(this.employee.gender),this.civilstatusField.pristine&&this.civilstatusField.patchValue(this.employee.civilStatus),this.designationField.pristine&&this.designationField.patchValue(this.employee.designation),this.nametitleField.pristine&&this.nametitleField.setValue(this.employee.nameTitle),this.employeestatusField.pristine&&this.employeestatusField.patchValue(this.employee.employeeStatus)}clearPhoto(){this.imageUrl=[]}openPhotoChoser(e){var t;this.files=e.target.files,this.imageUrl=[];for(let n=0;n<(null===(t=this.files)||void 0===t?void 0:t.length);n++)if(-1===this.files[n].type.indexOf("image"))this.clearPhoto();else{const e=new FileReader;e.onload=e=>{this.imageUrl.push(e.target.result)},e.readAsDataURL(this.files[n])}}addPhoto(){var e;const t=new FormData;for(let n=0;n<(null===(e=this.files)||void 0===e?void 0:e.length);n++)t.append("Photos",this.files[n],this.files[n].name);this.loadingState=!0,this.photo.addPhotoForEmployee(this.empId,t).subscribe(()=>{this.snackBar.open("Photo Added successfully","\u2714",{duration:3e3}),this.loadingState=!1,this.router.navigateByUrl("/other/photos")},e=>{switch(e.status){case 401:this.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/login")},500);break;case 403:this.snackBar.open(e.error.message,"Error\u2757",{duration:2e3}),setTimeout(()=>{this.router.navigateByUrl("/")},500);break;case 400:this.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:this.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}this.loadingState=!1})}delete(){this.dialog.open(o.a,{width:"500px",data:{message:this.employee.callingName+" photos"}}).afterClosed().subscribe(e=>{e&&(this.loadingState=!0,this.photo.deletePhotosFromEmployee(this.employee.id).subscribe(e=>{this.snackBar.open("Photos Deleted successfully","\u2714",{duration:3e3}),this.loadingState=!1},e=>{200===e.status?(this.snackBar.open("Photos Deleted successfully","\u2714",{duration:3e3}),this.loadingState=!1):(console.log(e),this.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:3e3}),this.loadingState=!1)}))})}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(s.a),c.Ob(a.a),c.Ob(b.a),c.Ob(a.c),c.Ob(St.a),c.Ob(l.b))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-employee-update-form"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit",4,"appHasRole"],[3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"row"],[1,"col-md-9"],[1,"form-group"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","nametitle"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-9"],["matInput","","formControlName","callingname","required",""],["matInput","","formControlName","fullname","required",""],[1,"col-md-6"],["matInput","","formControlName","nic","required",""],["required","","matInput","","formControlName","dobirth",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","gender",1,"form-radio-group"],["class","form-radio-button",3,"value",4,"ngFor","ngForOf"],["required","","formControlName","civilstatus"],[1,"col-md-4"],["matInput","","formControlName","mobile","required",""],["matInput","","formControlName","land"],["matInput","","formControlName","email"],["rows","3","matInput","","formControlName","address","required",""],["required","","formControlName","designation"],["required","","matInput","","formControlName","dorecruite",3,"matDatepicker"],["dorecruitepicker",""],["required","","formControlName","employeestatus"],["matInput","","formControlName","description"],[1,"text-right","mt-5","d-flex"],["routerLink","/employees","mat-raised-button","","color","primary",1,"ml-0"],[1,"spacer"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],[1,"col-md-3"],["class","spinner",4,"ngIf","ngIfElse"],["photolist",""],[3,"value"],[1,"form-radio-button",3,"value"],[1,"spinner"],["mode","indeterminate"],[1,"mat-h1","mt-3"],["id","file-uploader","type","file","accept","image/*","multiple","",1,"image-name",3,"change"],["mat-card-image","","alt","Photo of a employee",3,"src"],["id","photoChooser","type","file",1,"image-name",2,"display","none"],[1,"d-flex","justify-content-center"],["mat-flat-button","","color","primary","type","button",3,"click"],["mat-flat-button","","color","accent","type","button",3,"click"],[1,"mt-3"],["mat-flat-button","","color","warn","type","button",3,"click"]],template:function(e,t){1&e&&c.Kc(0,Ln,3,6,"div",0),2&e&&c.qc("ngIf",t.employee)},directives:[i.m,d.a,h.a,k.w,k.o,k.i,u.a,u.c,N.c,N.g,S.a,k.t,k.n,k.g,D.n,i.l,x.b,k.c,N.f,P.b,P.d,N.h,P.a,E.b,p.b,a.d,f.a,N.b,E.a,Dt.a,u.d],styles:[".spinner[_ngcontent-%COMP%]{top:40%;left:30%;position:absolute}"]}),e})();var An=n("qNIJ"),Vn=n("IOme"),$n=n("bSwM");function Hn(e,t){if(1&e&&(c.Ub(0,"div",11),c.Ub(1,"mat-checkbox",12),c.fc("change",(function(){const e=t.$implicit;return e.checked=!e.checked})),c.Mc(2),c.Tb(),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.rc("value",e.id),c.qc("checked",e.checked),c.Bb(1),c.Nc(e.title)}}let zn=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){this.dialogRef.addPanelClass("custom-dialog"),Vn.a.isDark()?this.dialogRef.addPanelClass("dark"):this.dialogRef.addPanelClass("light"),this.employee=this.data.employee,this.events=this.data.events}updateItems(){this.dialogRef.close(this.events)}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(l.g),c.Ob(l.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-event-emp-edit"]],decls:24,vars:4,consts:[[1,"dialog-wrapper"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"message"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["color","accent","mat-raised-button","",1,"mr-0",3,"click"],[1,"form-check"],[1,"example-margin",3,"value","checked","change"]],template:function(e,t){1&e&&(c.Ub(0,"div",0),c.Ub(1,"h1",1),c.Mc(2),c.Tb(),c.Ub(3,"mat-card"),c.Ub(4,"div",2),c.Ub(5,"p"),c.Mc(6,"Are you sure you want to Edit \u201c\xa0"),c.Ub(7,"span",3),c.Mc(8),c.Tb(),c.Mc(9,"\xa0\u201ds Events?"),c.Tb(),c.Tb(),c.Ub(10,"div"),c.Ub(11,"form",4,5),c.Kc(13,Hn,3,3,"div",6),c.Tb(),c.Tb(),c.Ub(14,"div",7),c.Pb(15,"span",8),c.Ub(16,"button",9),c.Ub(17,"mat-icon"),c.Mc(18,"clear"),c.Tb(),c.Mc(19," No"),c.Tb(),c.Ub(20,"button",10),c.fc("click",(function(){return t.updateItems()})),c.Ub(21,"mat-icon"),c.Mc(22,"edit"),c.Tb(),c.Mc(23," Yes"),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Bb(2),c.Oc("Assign Events for ",t.employee.fullName,""),c.Bb(6),c.Nc(t.employee.fullName),c.Bb(5),c.qc("ngForOf",t.events),c.Bb(3),c.qc("mat-dialog-close",!1))},directives:[l.h,u.a,l.e,k.w,k.o,k.p,i.l,l.c,p.b,l.d,f.a,$n.a],styles:[".message[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:110%}div[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:-10px}.dialog-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}h1[_ngcontent-%COMP%]{margin-top:-24px;font-size:20px!important;margin-left:-24px!important;margin-right:-24px!important;padding:14px 14px 5px!important;border-bottom:1px solid rgba(0,0,0,.1)}"]}),e})();var Gn=n("O+Qd"),_n=n("4Q1t");function Jn(e,t){1&e&&(c.Ub(0,"div",3),c.Pb(1,"mat-spinner"),c.Ub(2,"h1",4),c.Mc(3,"Loading..."),c.Tb(),c.Tb())}function Xn(e,t){1&e&&(c.Ub(0,"th",37),c.Mc(1,"EmployeeId"),c.Tb())}function Zn(e,t){if(1&e&&(c.Ub(0,"td",38),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc("EMP0",e.id,"")}}function Yn(e,t){1&e&&(c.Ub(0,"th",37),c.Mc(1,"Name"),c.Tb())}function Qn(e,t){if(1&e&&(c.Ub(0,"td",38),c.Mc(1),c.kc(2,"titlecase"),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc(" ",c.lc(2,1,e.fullName)," ")}}function Wn(e,t){1&e&&(c.Ub(0,"th",37),c.Mc(1,"Role"),c.Tb())}function ei(e,t){if(1&e&&(c.Ub(0,"td",38),c.Mc(1),c.kc(2,"titlecase"),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc(" ",c.lc(2,1,e.designation)," ")}}function ti(e,t){1&e&&(c.Ub(0,"th",37),c.Mc(1,"Recruited"),c.Tb())}function ni(e,t){if(1&e&&(c.Ub(0,"td",38),c.Mc(1),c.kc(2,"date"),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc(" ",c.lc(2,1,e.dorecruite)," ")}}function ii(e,t){1&e&&(c.Ub(0,"th",37),c.Mc(1,"Contract EndDate"),c.Tb())}function ai(e,t){if(1&e&&(c.Ub(0,"td",38),c.Mc(1),c.kc(2,"date"),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc(" ",c.lc(2,1,e.endContract)," ")}}function ri(e,t){1&e&&(c.Ub(0,"th",37),c.Mc(1,"Assigned Events"),c.Tb())}function oi(e,t){if(1&e&&(c.Ub(0,"td",38),c.Mc(1),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.Oc(" ",e.eventEmployees," ")}}function ci(e,t){1&e&&c.Pb(0,"th",39)}function si(e,t){if(1&e){const e=c.Vb();c.Ub(0,"button",42),c.fc("click",(function(){c.Bc(e);const t=c.jc().$implicit;return c.jc(2).deleteModals(t)})),c.Ub(1,"mat-icon"),c.Mc(2,"delete"),c.Tb(),c.Mc(3," Remove"),c.Tb()}}const li=function(){return["Admin","Manager","Supervisor"]};function bi(e,t){1&e&&(c.Ub(0,"td",40),c.Kc(1,si,4,0,"button",41),c.Tb()),2&e&&(c.Bb(1),c.qc("appHasRole",c.tc(1,li)))}function di(e,t){1&e&&c.Pb(0,"th",39)}function mi(e,t){if(1&e){const e=c.Vb();c.Ub(0,"button",44),c.fc("click",(function(){c.Bc(e);const t=c.jc().$implicit;return c.jc(2).editEventsModals(t)})),c.Ub(1,"mat-icon"),c.Mc(2,"edit"),c.Tb(),c.Mc(3," Add Events "),c.Tb()}}function ui(e,t){1&e&&(c.Ub(0,"td",40),c.Kc(1,mi,4,0,"button",43),c.Tb()),2&e&&(c.Bb(1),c.qc("appHasRole",c.tc(1,li)))}function pi(e,t){1&e&&c.Pb(0,"th",39)}function fi(e,t){if(1&e&&(c.Ub(0,"td",40),c.Ub(1,"button",45),c.Ub(2,"mat-icon"),c.Mc(3,"visibility"),c.Tb(),c.Mc(4," More ..."),c.Tb(),c.Tb()),2&e){const e=t.$implicit;c.Bb(1),c.sc("routerLink","/employees/",e.id,"")}}function hi(e,t){1&e&&c.Pb(0,"tr",46)}function gi(e,t){1&e&&c.Pb(0,"tr",47)}const Ti=function(){return[5,10,25,50,100]};function Ui(e,t){if(1&e){const e=c.Vb();c.Ub(0,"div",5),c.Ub(1,"mat-card"),c.Ub(2,"mat-card-content"),c.Ub(3,"div",6),c.Pb(4,"span",7),c.Ub(5,"button",8),c.fc("click",(function(){return c.Bc(e),c.jc().loadData()})),c.Ub(6,"mat-icon"),c.Mc(7,"search"),c.Tb(),c.Mc(8," Filter by Date "),c.Tb(),c.Tb(),c.Ub(9,"div",9),c.Ub(10,"div",10),c.Ub(11,"div",11),c.Ub(12,"mat-form-field",12),c.Ub(13,"mat-label"),c.Mc(14,"Filter by ID"),c.Tb(),c.Ub(15,"input",13),c.fc("keyup",(function(){return c.Bc(e),c.jc().loadData()})),c.Tb(),c.Tb(),c.Tb(),c.Pb(16,"span",7),c.Ub(17,"div",11),c.Ub(18,"mat-form-field",12),c.Ub(19,"mat-label"),c.Mc(20,"Filter by Event"),c.Tb(),c.Ub(21,"input",13),c.fc("keyup",(function(){return c.Bc(e),c.jc().loadData()})),c.Tb(),c.Tb(),c.Tb(),c.Ub(22,"div",11),c.Ub(23,"mat-form-field",12),c.Ub(24,"mat-label"),c.Mc(25,"Start Date"),c.Tb(),c.Pb(26,"input",14),c.Pb(27,"mat-datepicker-toggle",15),c.Pb(28,"mat-datepicker",null,16),c.Tb(),c.Tb(),c.Ub(30,"div",11),c.Ub(31,"mat-form-field",12),c.Ub(32,"mat-label"),c.Mc(33,"End Date"),c.Tb(),c.Pb(34,"input",14),c.Pb(35,"mat-datepicker-toggle",15),c.Pb(36,"mat-datepicker",null,17),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(38,"div",18),c.Ub(39,"table",19),c.Sb(40,20),c.Kc(41,Xn,2,0,"th",21),c.Kc(42,Zn,2,1,"td",22),c.Rb(),c.Sb(43,23),c.Kc(44,Yn,2,0,"th",21),c.Kc(45,Qn,3,3,"td",22),c.Rb(),c.Sb(46,24),c.Kc(47,Wn,2,0,"th",21),c.Kc(48,ei,3,3,"td",22),c.Rb(),c.Sb(49,25),c.Kc(50,ti,2,0,"th",21),c.Kc(51,ni,3,3,"td",22),c.Rb(),c.Sb(52,26),c.Kc(53,ii,2,0,"th",21),c.Kc(54,ai,3,3,"td",22),c.Rb(),c.Sb(55,27),c.Kc(56,ri,2,0,"th",21),c.Kc(57,oi,2,1,"td",22),c.Rb(),c.Sb(58,28),c.Kc(59,ci,1,0,"th",29),c.Kc(60,bi,2,2,"td",30),c.Rb(),c.Sb(61,31),c.Kc(62,di,1,0,"th",29),c.Kc(63,ui,2,2,"td",30),c.Rb(),c.Sb(64,32),c.Kc(65,pi,1,0,"th",29),c.Kc(66,fi,5,1,"td",30),c.Rb(),c.Kc(67,hi,1,0,"tr",33),c.Kc(68,gi,1,0,"tr",34),c.Tb(),c.Tb(),c.Ub(69,"div",35),c.Ub(70,"mat-paginator",36),c.fc("page",(function(t){return c.Bc(e),c.jc().paginate(t)})),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&e){const e=c.yc(29),t=c.yc(37),n=c.jc();c.Bb(15),c.qc("formControl",n.codeField),c.Bb(6),c.qc("formControl",n.nameField),c.Bb(5),c.qc("matDatepicker",e)("formControl",n.startDateField),c.Bb(1),c.qc("for",e),c.Bb(7),c.qc("matDatepicker",t)("formControl",n.endDateField),c.Bb(1),c.qc("for",t),c.Bb(4),c.qc("dataSource",n.employees),c.Bb(28),c.qc("matHeaderRowDef",n.displayedColumns),c.Bb(1),c.qc("matRowDefColumns",n.displayedColumns),c.Bb(2),c.qc("length",n.employees.length)("pageSize",25)("pageSizeOptions",c.tc(15,Ti))("showFirstLastButtons",!0)}}const vi=function(){return["Events","Show All Event Staff"]};let Bi=(()=>{class e{constructor(e,t,n,i,a){this.eventsToAdd=e,this.dialog=t,this.snackBar=n,this.mappingService=i,this.eventService=a,this.displayedColumns=["employeeid","employee","role","from","to","events","delete-col","update-col","more-col"],this.events=[],this.userParams={},this.pageSize=25,this.pageIndex=1,this.live=!1,this.codeField=new k.e,this.nameField=new k.e,this.startDateField=new k.e,this.endDateField=new k.e}ngOnInit(){this.loadingState=!0,this.live=!0,this.loadData()}paginate(e){this.pagination.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.loadData()}ngOnDestroy(){this.loadData(),this.live=!0,this.refreshData()}refreshData(){this.loadData()}loadData(){this.userParams.name=this.nameField.value,this.userParams.id=this.codeField.value,this.userParams.startDate=An.a.getDateAsString(this.startDateField.value),this.userParams.endDate=An.a.getDateAsString(this.endDateField.value),this.eventService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.events=e.result},e=>{console.log(e),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:3e3})}),this.mappingService.getEventsWithEmployees(this.pageIndex,this.pageSize,this.userParams).subscribe(e=>{this.loadingState=!1,this.employees=e.body},e=>{switch(console.log(e),e.status){case 401:case 403:this.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout(()=>{},500);break;default:this.snackBar.open("there is a problem loading roles\u2757","\u274c",{duration:3e3})}})}editEventsModals(e){this.dialog.open(zn,{width:"500px",data:{employee:e,events:this.getEventsArray(e)}}).afterClosed().subscribe(t=>{if(!t)return;this.loadingState=!0;const n={eventNames:[...t.filter(e=>!0===e.checked).map(e=>e.name)],eventid:[...t.filter(e=>!0===e.checked).map(e=>e.id)]};n&&this.eventsToAdd.addEvents(e.id,n).subscribe(()=>{e.eventEmployees=[...n.eventNames],this.snackBar.open("Events Edited successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Events are already Assign to this Employee","\u274c",{duration:2e3}),this.loadingState=!1})})}deleteModals(e){this.dialog.open(o.a,{width:"500px",data:{message:e.eventEmployees}}).afterClosed().subscribe(t=>{if(!t)return;this.loadingState=!0;const n=this.getEventsArray(e),i={eventNames:[...n.map(e=>e.name)],eventid:[...n.map(e=>e.id)]};n&&this.eventsToAdd.removeEvents(e.id,i).subscribe(()=>{this.snackBar.open("Events removed successfully","\u2714",{duration:2e3}),this.loadData()},e=>{console.log(e),this.snackBar.open("Something went wrong\u2757","\u274c",{duration:2e3}),this.loadingState=!1})})}getEventsArray(e){const t=[],n=e.eventEmployees,i=this.events;for(let a=0;a<i.length;a++){let e=!1;for(let r=0;r<n.length;r++)if(i[a].title===n[r]){e=!0,i[a].checked=!0,t.push(i[a]);break}e||(i[a].checked=!1,t.push(i[a]))}return t}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(s.a),c.Ob(l.b),c.Ob(b.a),c.Ob(Gn.a),c.Ob(_n.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-event-emp"]],decls:4,vars:4,consts:[["title","Event Staff",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["eventlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],[1,"mat-elevation-z8"],[1,"text-right","mb-2","d-flex"],[1,"spacer"],["mat-stroked-button","","color","primary",1,"mx-0",3,"click"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],["required","","matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""],["picker1",""],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","employeeid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employee"],["matColumnDef","role"],["matColumnDef","from"],["matColumnDef","to"],["matColumnDef","events"],["matColumnDef","delete-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","update-col"],["matColumnDef","more-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["class","mat-btn-sm","mat-raised-button","","color","accent",3,"click",4,"appHasRole"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"click"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(c.Pb(0,"app-page-header",0),c.Kc(1,Jn,4,0,"div",1),c.Kc(2,Ui,71,16,"ng-template",null,2,c.Lc)),2&e){const e=c.yc(3);c.qc("breadcrumbSegments",c.tc(3,vi)),c.Bb(1),c.qc("ngIf",t.loadingState)("ngIfElse",e)}},directives:[d.a,i.m,m.b,u.a,u.c,p.b,f.a,N.c,N.g,x.b,k.c,k.n,k.f,P.b,k.t,P.d,N.h,P.a,ze.j,ze.c,ze.e,ze.b,ze.g,ze.i,He.a,ze.d,ze.a,h.a,a.d,ze.f,ze.h],pipes:[i.v,i.e],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),e})();var Mi=n("EY2u"),qi=n("JIr8");let yi=(()=>{class e{constructor(e,t){this.employeeService=e,this.route=t}resolve(e){return this.employeeService.get(e.params.id).pipe(Object(qi.a)(()=>(this.route.navigateByUrl("/employees"),Mi.a)))}}return e.\u0275fac=function(t){return new(t||e)(c.cc(s.a),c.cc(a.c))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Fi=[{path:"",component:Nt},{path:"add",component:$e},{path:"showevents",component:Bi},{path:":id",component:K,resolve:{employee:yi}},{path:"edit/:id",component:Rn,resolve:{employee:yi}}];let Ii=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(Fi)],a.g]}),e})();var Ki=n("hctd"),ki=n("FpXt");let Ci=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(t){return new(t||e)},imports:[[i.c,Ii,ki.a,Ki.a,k.s,k.j]]}),e})()}}]);