!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{fILq:function(e,a,r){"use strict";r.r(a),r.d(a,"ItemsModule",(function(){return $e}));var c=r("ofXK"),o=r("tyNb"),s=r("mrSG"),b=r("zHse"),l=r("fXoL"),m=r("mmMe"),u=r("0IaG"),d=r("dNgK"),f=r("5VPf"),p=r("Xa2L"),h=r("Wp6s"),g=r("bTqV"),v=r("NFeN"),U=r("yX84");function T(t,e){1&t&&(l.Ub(0,"div",3),l.Pb(1,"mat-spinner"),l.Tb())}function k(t,e){if(1&t&&(l.Ub(0,"tr"),l.Ub(1,"th"),l.Mc(2,"Description"),l.Tb(),l.Ub(3,"td"),l.Mc(4),l.Tb(),l.Tb()),2&t){var i=l.jc(3);l.Bb(4),l.Nc(i.item.description)}}function I(t,e){if(1&t&&(l.Ub(0,"tr"),l.Ub(1,"th"),l.Mc(2,"Included Packages"),l.Tb(),l.Ub(3,"td"),l.Mc(4),l.Tb(),l.Tb()),2&t){var i=l.jc(3);l.Bb(4),l.Nc(i.item.packageItems)}}function y(t,e){if(1&t){var i=l.Vb();l.Ub(0,"button",18),l.fc("click",(function(){return l.Bc(i),l.jc(3).delete()})),l.Ub(1,"mat-icon"),l.Mc(2,"delete"),l.Tb(),l.Mc(3," Delete"),l.Tb()}}var M=function(){return["Admin","Manager"]};function B(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"div",5),l.Ub(2,"div",6),l.Ub(3,"mat-card",7),l.Ub(4,"mat-card-content"),l.Ub(5,"mat-card",7),l.Pb(6,"img",8),l.Tb(),l.Ub(7,"table",9),l.Ub(8,"tbody"),l.Ub(9,"tr"),l.Ub(10,"th"),l.Mc(11,"ID"),l.Tb(),l.Ub(12,"td"),l.Mc(13),l.kc(14,"titlecase"),l.Tb(),l.Tb(),l.Ub(15,"tr"),l.Ub(16,"th"),l.Mc(17,"Created At"),l.Tb(),l.Ub(18,"td"),l.Mc(19),l.kc(20,"date"),l.Tb(),l.Tb(),l.Ub(21,"tr"),l.Ub(22,"th"),l.Mc(23,"Creator"),l.Tb(),l.Ub(24,"td"),l.Mc(25),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(26,"div",10),l.Ub(27,"mat-card",7),l.Ub(28,"mat-card-content"),l.Ub(29,"table",9),l.Ub(30,"tbody"),l.Ub(31,"tr"),l.Ub(32,"th"),l.Mc(33,"ID"),l.Tb(),l.Ub(34,"td"),l.Mc(35),l.Tb(),l.Tb(),l.Ub(36,"tr"),l.Ub(37,"th"),l.Mc(38,"Name"),l.Tb(),l.Ub(39,"td"),l.Mc(40),l.Tb(),l.Tb(),l.Ub(41,"tr"),l.Ub(42,"th"),l.Mc(43,"Item Date"),l.Tb(),l.Ub(44,"td"),l.Mc(45),l.Tb(),l.Tb(),l.Kc(46,k,5,1,"tr",4),l.Ub(47,"tr"),l.Ub(48,"th"),l.Mc(49,"Unit Price"),l.Tb(),l.Ub(50,"td"),l.Mc(51),l.Tb(),l.Tb(),l.Ub(52,"tr"),l.Ub(53,"th"),l.Mc(54,"Item Status"),l.Tb(),l.Ub(55,"td"),l.Mc(56),l.Tb(),l.Tb(),l.Kc(57,I,5,1,"tr",4),l.Tb(),l.Tb(),l.Tb(),l.Ub(58,"button",11),l.Ub(59,"mat-icon"),l.Mc(60,"add"),l.Tb(),l.Mc(61,"Add packages"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(62,"div",12),l.Kc(63,y,4,0,"button",13),l.Pb(64,"span",14),l.Ub(65,"button",15),l.Ub(66,"mat-icon"),l.Mc(67,"edit"),l.Tb(),l.Mc(68," Change"),l.Tb(),l.Ub(69,"button",16),l.Ub(70,"mat-icon"),l.Mc(71,"add"),l.Tb(),l.Mc(72," New item"),l.Tb(),l.Ub(73,"button",17),l.Ub(74,"mat-icon"),l.Mc(75,"list"),l.Tb(),l.Mc(76," All Items"),l.Tb(),l.Tb(),l.Tb()),2&t){var i=l.jc(2);l.Bb(6),l.rc("src",null==i.item||null==i.item.photos[0]?null:i.item.photos[0].filename,l.Dc),l.Bb(7),l.Nc(l.lc(14,13,i.item.code)),l.Bb(6),l.Nc(l.mc(20,15,i.item.toCreation,"medium")),l.Bb(6),l.Nc(null==i.item?null:i.item.creator.userName),l.Bb(10),l.Nc(i.item.code),l.Bb(5),l.Nc(i.item.name),l.Bb(5),l.Nc(i.item.toCreation),l.Bb(1),l.qc("ngIf",i.item.description),l.Bb(5),l.Nc(i.item.unitPrice),l.Bb(5),l.Nc(i.item.itemStatus),l.Bb(1),l.qc("ngIf",i.item.packageItems),l.Bb(6),l.qc("appHasRole",l.tc(18,M)),l.Bb(2),l.sc("routerLink","/items/edit/",i.item.id,"")}}function S(t,e){if(1&t&&l.Kc(0,B,77,19,"div",4),2&t){var i=l.jc();l.qc("ngIf",i.item)}}var P,w=function(t){return["Items","Show All Items",t]},q=((P=function(){function t(e,a,n,r,c){var o=this;i(this,t),this.itemService=e,this.route=a,this.dialog=n,this.snackBar=r,this.router=c,this.loadingState=!1,this.route.data.subscribe((function(t){var e=t.item;o.item=e}))}return n(t,[{key:"ngOnInit",value:function(){}},{key:"delete",value:function(){var t=this;this.dialog.open(b.a,{width:"500px",data:{message:this.item.name}}).afterClosed().subscribe((function(e){return Object(s.b)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(this.loadingState=!0,this.itemService.delete(this.item.id).subscribe((function(){i.snackBar.open("Item Deleted successfully","\u2714",{duration:2e3}),i.router.navigateByUrl("/items")}),(function(t){console.log(t),i.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),i.loadingState=!1})));case 1:case"end":return t.stop()}}),t,this)})))}))}}]),t}()).\u0275fac=function(t){return new(t||P)(l.Ob(m.a),l.Ob(o.a),l.Ob(u.b),l.Ob(d.a),l.Ob(o.c))},P.\u0275cmp=l.Ib({type:P,selectors:[["app-item-detail"]],decls:4,vars:6,consts:[[3,"title","breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["itemdetail",""],[1,"spinner"],[4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"example-card"],["mat-card-image","",3,"src"],[1,"w-100","table-striped","custom-data-table"],[1,"col-md-8"],["routerLink","/items/showpackages","mat-stroked-button","","color","primary"],[1,"d-flex","mt-5"],["class","ml-0","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],[1,"spacer"],["mat-raised-button","","color","accent",3,"routerLink"],["routerLink","/items/add","mat-stroked-button",""],["routerLink","/items","mat-raised-button","","color","primary",1,"mr-0"],["mat-raised-button","","color","warn",1,"ml-0",3,"click"]],template:function(t,e){if(1&t&&(l.Pb(0,"app-page-header",0),l.Kc(1,T,2,0,"div",1),l.Kc(2,S,1,1,"ng-template",null,2,l.Lc)),2&t){var i=l.yc(3);l.sc("title","Item Detail Page of ",e.item.code,""),l.qc("breadcrumbSegments",l.uc(4,w,"Details of "+e.item.code)),l.Bb(1),l.qc("ngIf",e.loadingState)("ngIfElse",i)}},directives:[f.a,c.m,p.b,h.a,h.c,h.d,g.b,o.d,v.a,U.a],pipes:[c.v,c.e],styles:[""]}),P),F=r("3Pt+"),C=r("ohFZ"),D=r("kmnG"),K=r("d3UM"),O=r("FKr1"),x=r("qFsG"),j=r("iadO");function N(t,e){if(1&t&&(l.Ub(0,"mat-option",32),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.qc("value",i.id),l.Bb(1),l.Nc(i.name)}}function A(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"itemStatus is required"),l.Tb())}function R(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,A,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.itemStatusField.errors.required)}}function L(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"Name is required"),l.Tb())}function E(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("Name should has at lease ",i.nameField.errors.minlength.requiredLength," characters ")}}function z(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("Name length should not exceed ",i.nameField.errors.maxlength.requiredLength," characters ")}}function V(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"This Name Already Exists."),l.Tb())}function $(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,L,2,0,"span",10),l.Kc(2,E,2,1,"span",10),l.Kc(3,z,2,1,"span",10),l.Kc(4,V,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.nameField.errors.required),l.Bb(1),l.qc("ngIf",i.nameField.errors.minlength),l.Bb(1),l.qc("ngIf",i.nameField.errors.maxlength),l.Bb(1),l.qc("ngIf",i.nameField.errors.validate)}}function H(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"unit Price is required"),l.Tb())}function _(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("unit Price length should not exceed ",i.unitPriceField.errors.maxlength.requiredLength," characters, ")}}function G(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,H,2,0,"span",10),l.Kc(2,_,2,1,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.unitPriceField.errors.required),l.Bb(1),l.qc("ngIf",i.unitPriceField.errors.maxlength)}}function X(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1," Date Added is required"),l.Tb())}function Y(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,X,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.toCreationField.errors.required)}}function J(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("Description length should not exceed ",i.descriptionField.errors.maxlength.requiredLength," characters ")}}function W(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,J,2,1,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.descriptionField.errors.maxlength)}}function Q(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"Units are required"),l.Tb())}function Z(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,Q,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.unitsField.errors)}}var tt,et=function(){return["Items","Add a New item"]},it=((tt=function(){function t(e,a,n,r){i(this,t),this.itemService=e,this.snackBar=a,this.asyncValidators=n,this.router=r,this.itemStatus=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.form=new F.h({name:new F.e("",[F.u.required,F.u.minLength(3),F.u.maxLength(255)],[this.asyncValidators.validateItemName]),description:new F.e("",[F.u.required,F.u.maxLength(65535)]),unitPrice:new F.e("",[F.u.required,F.u.maxLength(12)]),units:new F.e("",[]),supplierId:new F.e({value:"System will Provide",disabled:!0}),toCreation:new F.e("",[F.u.required]),itemStatus:new F.e("",[F.u.required])})}return n(t,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){var t=this;this.form.invalid||(this.item=this.form.value,this.item.code="ITM"+Math.round(1e5*Math.random()),this.itemService.add(this.item).subscribe((function(e){t.snackBar.open("Item creation successfull","\u2714",{duration:2e3}),t.router.navigateByUrl("/items/"+e.id)}),(function(e){switch(e.status){case 401:t.snackBar.open("Authentication Failed. You have to login again","\u274c",{duration:2e3}),setTimeout((function(){t.router.navigateByUrl("/login")}),500);break;case 403:t.snackBar.open("Authorization Failed.","Access denied\u2757",{duration:2e3}),setTimeout((function(){t.router.navigateByUrl("/")}),500);break;case 400:t.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:t.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}})))}},{key:"itemStatusField",get:function(){return this.form.controls.itemStatus}},{key:"unitPriceField",get:function(){return this.form.controls.unitPrice}},{key:"unitsField",get:function(){return this.form.controls.units}},{key:"toCreationField",get:function(){return this.form.controls.toCreation}},{key:"descriptionField",get:function(){return this.form.controls.description}},{key:"nameField",get:function(){return this.form.controls.name}}]),t}()).\u0275fac=function(t){return new(t||tt)(l.Ob(m.a),l.Ob(d.a),l.Ob(C.a),l.Ob(o.c))},tt.\u0275cmp=l.Ib({type:tt,selectors:[["app-item-form"]],decls:86,vars:13,consts:[["title","Item Form",3,"breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","itemStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","type","number","formControlName","unitPrice","required",""],[1,"col-sm-7"],["required","","matInput","","formControlName","toCreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"col-md-5"],["matInput","","formControlName","supplierId"],[1,"spacer"],[1,"col-md-6"],["type","number","matInput","","formControlName","units","required",""],[1,"text-right","mt-5","d-flex"],["routerLink","/items","mat-stroked-button","","color","primary",1,"ml-0"],["mat-stroked-button","","type","reset"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[3,"value"]],template:function(t,e){if(1&t&&(l.Pb(0,"app-page-header",0),l.Ub(1,"form",1),l.fc("ngSubmit",(function(){return e.submit()})),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"mat-card"),l.Ub(5,"mat-card-content"),l.Ub(6,"div",4),l.Ub(7,"div",2),l.Ub(8,"div",5),l.Ub(9,"mat-form-field",6),l.Ub(10,"mat-label"),l.Mc(11,"Item Status"),l.Tb(),l.Ub(12,"mat-select",7),l.Ub(13,"mat-option",8),l.Mc(14,"Select the Type"),l.Tb(),l.Kc(15,N,2,2,"mat-option",9),l.Tb(),l.Kc(16,R,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Ub(17,"div",11),l.Ub(18,"mat-form-field",6),l.Ub(19,"mat-label"),l.Mc(20,"Item Name"),l.Tb(),l.Pb(21,"input",12),l.Ub(22,"mat-hint"),l.Mc(23,"Ex: Sound Setup"),l.Tb(),l.Kc(24,$,5,4,"mat-error",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div",4),l.Ub(26,"div",2),l.Ub(27,"div",13),l.Ub(28,"mat-form-field",6),l.Ub(29,"mat-label"),l.Mc(30,"Unit Price"),l.Tb(),l.Pb(31,"input",14),l.Ub(32,"mat-hint"),l.Mc(33,"Ex: $7800 or $1970"),l.Tb(),l.Kc(34,G,3,2,"mat-error",10),l.Tb(),l.Tb(),l.Ub(35,"div",15),l.Ub(36,"mat-form-field",6),l.Ub(37,"mat-label"),l.Mc(38,"Date Added"),l.Tb(),l.Pb(39,"input",16),l.Pb(40,"mat-datepicker-toggle",17),l.Ub(41,"mat-datepicker",18,19),l.fc("yearSelected",(function(){return 1992})),l.Tb(),l.Kc(43,Y,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(44,"div",4),l.Ub(45,"mat-form-field",6),l.Ub(46,"mat-label"),l.Mc(47,"Description"),l.Tb(),l.Pb(48,"textarea",20),l.Kc(49,W,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Ub(50,"div",4),l.Ub(51,"div",2),l.Ub(52,"div",21),l.Ub(53,"mat-form-field",6),l.Ub(54,"mat-label"),l.Mc(55,"Supplier Id"),l.Tb(),l.Pb(56,"input",22),l.Ub(57,"mat-hint"),l.Mc(58,"Info: Supplied by the System"),l.Tb(),l.Tb(),l.Tb(),l.Pb(59,"span",23),l.Ub(60,"div",24),l.Ub(61,"mat-form-field",6),l.Ub(62,"mat-label"),l.Mc(63,"No of Units"),l.Tb(),l.Pb(64,"input",25),l.Ub(65,"mat-hint"),l.Mc(66,"ex: 1 or 50"),l.Tb(),l.Kc(67,Z,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(68,"div",26),l.Ub(69,"button",27),l.Ub(70,"mat-icon"),l.Mc(71,"list"),l.Tb(),l.Mc(72," All Items"),l.Tb(),l.Pb(73,"span",23),l.Ub(74,"button",28),l.Ub(75,"mat-icon"),l.Mc(76,"refresh"),l.Tb(),l.Mc(77," Clear"),l.Tb(),l.Ub(78,"button",29),l.Ub(79,"mat-icon"),l.Mc(80,"save"),l.Tb(),l.Mc(81," Save"),l.Tb(),l.Tb(),l.Tb(),l.Ub(82,"mat-card-actions",30),l.Ub(83,"span",31),l.Mc(84,"*"),l.Tb(),l.Mc(85," Required Fields "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t){var i=l.yc(42);l.qc("breadcrumbSegments",l.tc(12,et)),l.Bb(1),l.qc("formGroup",e.form),l.Bb(12),l.qc("value",null),l.Bb(2),l.qc("ngForOf",e.itemStatus),l.Bb(1),l.qc("ngIf",e.itemStatusField.invalid),l.Bb(8),l.qc("ngIf",e.nameField.invalid),l.Bb(10),l.qc("ngIf",e.unitPriceField.invalid),l.Bb(5),l.qc("matDatepicker",i),l.Bb(1),l.qc("for",i),l.Bb(3),l.qc("ngIf",e.toCreationField.invalid),l.Bb(6),l.qc("ngIf",e.descriptionField.invalid),l.Bb(18),l.qc("ngIf",e.unitsField.invalid)}},directives:[f.a,F.w,F.o,F.i,h.a,h.c,D.c,D.g,K.a,F.t,F.n,F.g,O.n,c.l,c.m,x.b,F.c,D.f,F.r,j.b,j.d,D.h,j.a,g.b,o.d,v.a,h.b,D.b],styles:[""]}),tt),at=r("M9IT"),nt=r("+0xr"),rt=r("rO2v");function ct(t,e){1&t&&(l.Ub(0,"div",3),l.Pb(1,"mat-spinner"),l.Ub(2,"h1",4),l.Mc(3,"Loading..."),l.Tb(),l.Tb())}function ot(t,e){1&t&&(l.Ub(0,"div",20),l.Ub(1,"button",21),l.Ub(2,"mat-icon"),l.Mc(3,"add"),l.Tb(),l.Mc(4," New Item "),l.Tb(),l.Tb())}function st(t,e){if(1&t){var i=l.Vb();l.Ub(0,"mat-option",22),l.fc("click",(function(){return l.Bc(i),l.jc(3).loadData()})),l.Mc(1),l.Tb()}if(2&t){var a=e.$implicit;l.qc("value",a.id),l.Bb(1),l.Nc(a.name)}}function bt(t,e){1&t&&(l.Ub(0,"th",39),l.Mc(1," ID "),l.Tb())}function lt(t,e){if(1&t&&(l.Ub(0,"td",40),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",i.code," ")}}function mt(t,e){1&t&&(l.Ub(0,"th",39),l.Mc(1," Name "),l.Tb())}function ut(t,e){if(1&t&&(l.Ub(0,"td",40),l.Mc(1),l.kc(2,"titlecase"),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",l.lc(2,1,i.name)," ")}}function dt(t,e){1&t&&(l.Ub(0,"th",39),l.Mc(1," Unit Price "),l.Tb())}function ft(t,e){if(1&t&&(l.Ub(0,"td",40),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",i.unitPrice," ")}}function pt(t,e){1&t&&(l.Ub(0,"th",39),l.Mc(1," item Status "),l.Tb())}function ht(t,e){if(1&t&&(l.Ub(0,"td",40),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",i.itemStatus,"")}}function gt(t,e){1&t&&(l.Ub(0,"th",39),l.Mc(1," Description "),l.Tb())}function vt(t,e){if(1&t&&(l.Ub(0,"td",40),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",i.description,"")}}function Ut(t,e){1&t&&l.Pb(0,"th",41)}function Tt(t,e){if(1&t&&(l.Ub(0,"td",42),l.Ub(1,"button",43),l.Ub(2,"mat-icon"),l.Mc(3,"visibility"),l.Tb(),l.Mc(4," More ..."),l.Tb(),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.sc("routerLink","/items/",i.id,"")}}function kt(t,e){1&t&&l.Pb(0,"th",41)}function It(t,e){if(1&t){var i=l.Vb();l.Ub(0,"button",45),l.fc("click",(function(){l.Bc(i);var t=l.jc().$implicit;return l.jc(4).delete(t)})),l.Ub(1,"mat-icon"),l.Mc(2,"delete"),l.Tb(),l.Mc(3," Delete"),l.Tb()}}var yt=function(){return["Admin","Manager"]};function Mt(t,e){1&t&&(l.Ub(0,"td",42),l.Kc(1,It,4,0,"button",44),l.Tb()),2&t&&(l.Bb(1),l.qc("appHasRole",l.tc(1,yt)))}function Bt(t,e){1&t&&l.Pb(0,"th",41)}function St(t,e){if(1&t&&(l.Ub(0,"td",42),l.Ub(1,"button",46),l.Ub(2,"mat-icon"),l.Mc(3,"edit"),l.Tb(),l.Mc(4," Change"),l.Tb(),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.sc("routerLink","/items/edit/",i.id,"")}}function Pt(t,e){1&t&&l.Pb(0,"tr",47)}function wt(t,e){1&t&&l.Pb(0,"tr",48)}function qt(t,e){if(1&t&&(l.Ub(0,"div",23),l.Ub(1,"table",24),l.Sb(2,25),l.Kc(3,bt,2,0,"th",26),l.Kc(4,lt,2,1,"td",27),l.Rb(),l.Sb(5,28),l.Kc(6,mt,2,0,"th",26),l.Kc(7,ut,3,3,"td",27),l.Rb(),l.Sb(8,29),l.Kc(9,dt,2,0,"th",26),l.Kc(10,ft,2,1,"td",27),l.Rb(),l.Sb(11,30),l.Kc(12,pt,2,0,"th",26),l.Kc(13,ht,2,1,"td",27),l.Rb(),l.Sb(14,31),l.Kc(15,gt,2,0,"th",26),l.Kc(16,vt,2,1,"td",27),l.Rb(),l.Sb(17,32),l.Kc(18,Ut,1,0,"th",33),l.Kc(19,Tt,5,1,"td",34),l.Rb(),l.Sb(20,35),l.Kc(21,kt,1,0,"th",33),l.Kc(22,Mt,2,2,"td",34),l.Rb(),l.Sb(23,36),l.Kc(24,Bt,1,0,"th",33),l.Kc(25,St,5,1,"td",34),l.Rb(),l.Kc(26,Pt,1,0,"tr",37),l.Kc(27,wt,1,0,"tr",38),l.Tb(),l.Tb()),2&t){var i=l.jc(3);l.Bb(1),l.qc("dataSource",i.itemDataPage),l.Bb(25),l.qc("matHeaderRowDef",i.displayedColumns),l.Bb(1),l.qc("matRowDefColumns",i.displayedColumns)}}function Ft(t,e){1&t&&l.Pb(0,"app-empty-data-table",49)}var Ct=function(){return["Admin"]},Dt=function(){return[5,10,25,50,100]};function Kt(t,e){if(1&t){var i=l.Vb();l.Ub(0,"div",6),l.Ub(1,"mat-card"),l.Ub(2,"mat-card-content"),l.Kc(3,ot,5,0,"div",7),l.Ub(4,"div",8),l.Ub(5,"div",9),l.Ub(6,"div",10),l.Ub(7,"mat-form-field",11),l.Ub(8,"mat-label"),l.Mc(9,"Filter by Name"),l.Tb(),l.Ub(10,"input",12),l.fc("keyup",(function(){return l.Bc(i),l.jc(2).loadData()})),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"div",10),l.Ub(12,"mat-form-field",11),l.Ub(13,"mat-label"),l.Mc(14,"Filter by ID"),l.Tb(),l.Ub(15,"input",12),l.fc("keyup",(function(){return l.Bc(i),l.jc(2).loadData()})),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"div",10),l.Ub(17,"mat-form-field",11),l.Ub(18,"mat-label"),l.Mc(19,"Filter by Price"),l.Tb(),l.Ub(20,"input",12),l.fc("keyup",(function(){return l.Bc(i),l.jc(2).loadData()})),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"div",10),l.Ub(22,"mat-form-field",11),l.Ub(23,"mat-label"),l.Mc(24,"Filter by Status"),l.Tb(),l.Ub(25,"mat-select",13),l.Ub(26,"mat-option",14),l.fc("click",(function(){return l.Bc(i),l.jc(2).loadData()})),l.Mc(27,"Any Status"),l.Tb(),l.Kc(28,st,2,2,"mat-option",15),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Kc(29,qt,28,3,"div",16),l.Kc(30,Ft,1,0,"app-empty-data-table",17),l.Ub(31,"div",18),l.Ub(32,"mat-paginator",19),l.fc("page",(function(t){return l.Bc(i),l.jc(2).paginate(t)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var a=l.jc(2);l.Bb(3),l.qc("appHasRole",l.tc(13,Ct)),l.Bb(7),l.qc("formControl",a.nameField),l.Bb(5),l.qc("formControl",a.codeField),l.Bb(5),l.qc("formControl",a.priceField),l.Bb(5),l.qc("formControl",a.itemStatusField),l.Bb(1),l.qc("value",null),l.Bb(2),l.qc("ngForOf",a.itemStatus),l.Bb(1),l.qc("ngIf",a.itemDataPage.length>0),l.Bb(1),l.qc("ngIf",0===a.itemDataPage.length),l.Bb(2),l.qc("length",a.pagination.totalItems)("pageSize",a.pagination.itemsPerPage)("pageSizeOptions",l.tc(14,Dt))("showFirstLastButtons",!0)}}function Ot(t,e){if(1&t&&l.Kc(0,Kt,33,15,"div",5),2&t){var i=l.jc();l.qc("ngIf",void 0!==i.itemDataPage)}}var xt,jt=function(){return["Items","Show All Items"]},Nt=((xt=function(){function t(e,a,n){i(this,t),this.itemService=e,this.dialog=a,this.snackBar=n,this.userParams={},this.displayedColumns=["code","name","unitprice","status","description","delete-col","update-col","more-col"],this.pageSize=5,this.pageIndex=1,this.live=!1,this.itemStatus=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.nameField=new F.e,this.codeField=new F.e,this.itemStatusField=new F.e,this.priceField=new F.e}return n(t,[{key:"ngOnInit",value:function(){this.loadingState=!0,this.loadData(),this.live=!0,this.refreshData()}},{key:"loadData",value:function(){var t=this;this.userParams.name=this.nameField.value,this.userParams.code=this.codeField.value,this.userParams.itemStatus=this.itemStatusField.value,this.userParams.price=this.priceField.value,this.itemService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe((function(e){t.loadingState=!1,t.itemDataPage=e.result,t.pagination=e.pagination}),(function(e){switch(e.status){case 403:t.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout((function(){}),500);break;default:t.snackBar.open("error loading data ","Error",{duration:3e3})}}))}},{key:"refreshData",value:function(){this.loadData()}},{key:"paginate",value:function(t){this.pagination.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.pageIndex=t.pageIndex+1,this.loadData()}},{key:"ngOnDestroy",value:function(){this.live=!1}},{key:"delete",value:function(t){var e=this;this.dialog.open(b.a,{width:"500px",data:{message:t.name}}).afterClosed().subscribe((function(i){i&&(e.loadingState=!0,e.itemService.delete(t.id).subscribe((function(){e.snackBar.open("Item Deleted successfully","\u2714",{duration:2e3}),e.loadData()}),(function(t){console.log(t),e.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:2e3}),e.loadingState=!1})))}))}}]),t}()).\u0275fac=function(t){return new(t||xt)(l.Ob(m.a),l.Ob(u.b),l.Ob(d.a))},xt.\u0275cmp=l.Ib({type:xt,selectors:[["app-item-table"]],decls:4,vars:4,consts:[["title","Items",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["itemlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["class","mb-2",4,"appHasRole"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[3,"formControl"],["selected","",3,"value","click"],[3,"value","click",4,"ngFor","ngForOf"],["class","table-responsive table-striped",4,"ngIf"],["message","No items to show",4,"ngIf"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"mb-2"],["routerLink","/items/add","mat-raised-button","","color","primary",1,"mx-0"],[3,"value","click"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","unitprice"],["matColumnDef","status"],["matColumnDef","description"],["matColumnDef","more-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","delete-col"],["matColumnDef","update-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["class","mat-btn-sm","mat-raised-button","","color","warn",3,"click",4,"appHasRole"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""],["message","No items to show"]],template:function(t,e){if(1&t&&(l.Pb(0,"app-page-header",0),l.Kc(1,ct,4,0,"div",1),l.Kc(2,Ot,1,1,"ng-template",null,2,l.Lc)),2&t){var i=l.yc(3);l.qc("breadcrumbSegments",l.tc(3,jt)),l.Bb(1),l.qc("ngIf",e.loadingState)("ngIfElse",i)}},directives:[f.a,c.m,p.b,h.a,h.c,U.a,D.c,D.g,x.b,F.c,F.n,F.f,K.a,O.n,c.l,at.a,g.b,o.d,v.a,nt.j,nt.c,nt.e,nt.b,nt.g,nt.i,nt.d,nt.a,nt.f,nt.h,rt.a],pipes:[c.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),xt),At=r("/lRe"),Rt=r("bv9b");function Lt(t,e){if(1&t&&(l.Ub(0,"mat-option",35),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.qc("value",i.name),l.Bb(1),l.Nc(i.name)}}function Et(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"itemStatus is required"),l.Tb())}function zt(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,Et,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.itemStatusField.errors.required)}}function Vt(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"Name is required"),l.Tb())}function $t(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("Name should has at lease ",i.nameField.errors.minlength.requiredLength," characters ")}}function Ht(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("Name length should not exceed ",i.nameField.errors.maxlength.requiredLength," characters ")}}function _t(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,Vt,2,0,"span",10),l.Kc(2,$t,2,1,"span",10),l.Kc(3,Ht,2,1,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.nameField.errors.required),l.Bb(1),l.qc("ngIf",i.nameField.errors.minlength),l.Bb(1),l.qc("ngIf",i.nameField.errors.maxlength)}}function Gt(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"unit Price is required"),l.Tb())}function Xt(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("unit Price length should not exceed ",i.unitPriceField.errors.maxlength.requiredLength," characters, ")}}function Yt(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,Gt,2,0,"span",10),l.Kc(2,Xt,2,1,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.unitPriceField.errors.required),l.Bb(1),l.qc("ngIf",i.unitPriceField.errors.maxlength)}}function Jt(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1," Date Added is required"),l.Tb())}function Wt(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,Jt,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.toCreationField.errors.required)}}function Qt(t,e){if(1&t&&(l.Ub(0,"span"),l.Mc(1),l.Tb()),2&t){var i=l.jc(2);l.Bb(1),l.Oc("Description length should not exceed ",i.descriptionField.errors.maxlength.requiredLength," characters ")}}function Zt(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,Qt,2,1,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.descriptionField.errors.maxlength)}}function te(t,e){1&t&&(l.Ub(0,"span"),l.Mc(1,"Units are required"),l.Tb())}function ee(t,e){if(1&t&&(l.Ub(0,"mat-error"),l.Kc(1,te,2,0,"span",10),l.Tb()),2&t){var i=l.jc();l.Bb(1),l.qc("ngIf",i.unitsField.errors)}}function ie(t,e){1&t&&(l.Ub(0,"div",36),l.Pb(1,"mat-progress-bar",37),l.Ub(2,"h1",38),l.Mc(3,"Uploading..."),l.Tb(),l.Tb())}function ae(t,e){if(1&t){var i=l.Vb();l.Ub(0,"div"),l.Ub(1,"input",39),l.fc("change",(function(t){return l.Bc(i),l.jc().openPhotoChoser(t)})),l.Tb(),l.Tb(),l.Ub(2,"mat-card"),l.Pb(3,"img",40),l.Pb(4,"input",41),l.Ub(5,"mat-card-content",42),l.Ub(6,"button",43),l.fc("click",(function(){return l.Bc(i),l.jc().addPhoto()})),l.Ub(7,"mat-icon"),l.Mc(8,"edit"),l.Tb(),l.Mc(9,"Add Photo"),l.Tb(),l.Ub(10,"button",44),l.fc("click",(function(){return l.Bc(i),l.jc().clearPhoto()})),l.Ub(11,"mat-icon"),l.Mc(12,"clear"),l.Tb(),l.Mc(13,"Clear"),l.Tb(),l.Tb(),l.Tb(),l.Ub(14,"div",45),l.Ub(15,"button",46),l.fc("click",(function(){return l.Bc(i),l.jc().delete()})),l.Ub(16,"mat-icon"),l.Mc(17,"delete"),l.Tb(),l.Mc(18,"Delete All Photos"),l.Tb(),l.Tb()}if(2&t){var a=l.jc();l.Bb(3),l.rc("src",(null==a.item.photos[0]?null:a.item.photos[0].filename)||"../../../assets/images/male.jpg",l.Dc)}}var ne,re=function(t){return["Items","Show All Items",t]},ce=((ne=function(){function t(e,a,n,r,c,o){var s=this;i(this,t),this.itemService=e,this.route=a,this.snackBar=n,this.photo=r,this.dialog=c,this.router=o,this.itemStatus=[{id:1,name:"Active"},{id:2,name:"Deactive"}],this.imageUrl=[],this.form=new F.h({name:new F.e("",[F.u.required,F.u.minLength(3),F.u.maxLength(255)]),description:new F.e("",[F.u.required,F.u.maxLength(65535)]),unitPrice:new F.e("",[F.u.required,F.u.maxLength(12)]),units:new F.e("",[]),supplierId:new F.e({value:"System will Provide",disabled:!0}),toCreation:new F.e("",[F.u.required]),itemStatus:new F.e("",[F.u.required])}),this.route.data.subscribe((function(t){var e=t.item;s.item=e,s.itemId=e.id,s.setValues()}))}return n(t,[{key:"ngOnInit",value:function(){}},{key:"discardChanges",value:function(){this.setValues()}},{key:"submit",value:function(){var t=this;this.form.invalid||(this.item=this.form.value,this.item.code="ITM"+Math.round(1e5*Math.random()),this.itemService.update(this.itemId,this.item).subscribe((function(e){t.snackBar.open("Item successfully Updated","\u2714",{duration:2e3}),t.router.navigateByUrl("/items/"+e.id)}),(function(e){switch(e.status){case 401:t.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout((function(){t.router.navigateByUrl("/login")}),500);break;case 403:t.snackBar.open(e.error.message,"Error\u2757",{duration:2e3}),setTimeout((function(){t.router.navigateByUrl("/")}),500);break;case 400:t.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:t.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}})))}},{key:"setValues",value:function(){this.descriptionField.pristine&&this.descriptionField.setValue(this.item.description),this.unitsField.pristine&&this.unitsField.patchValue(this.item.photo),this.itemStatusField.pristine&&this.itemStatusField.patchValue(this.item.itemStatus),this.unitPriceField.pristine&&this.unitPriceField.patchValue(this.item.unitPrice),this.toCreationField.pristine&&this.toCreationField.patchValue(this.item.toCreation),this.nameField.pristine&&this.nameField.patchValue(this.item.name)}},{key:"clearPhoto",value:function(){this.imageUrl=[]}},{key:"openPhotoChoser",value:function(t){var e,i=this;this.files=t.target.files,this.imageUrl=[];for(var a=0;a<(null===(e=this.files)||void 0===e?void 0:e.length);a++)if(-1===this.files[a].type.indexOf("image"))this.clearPhoto();else{var n=new FileReader;n.onload=function(t){i.imageUrl.push(t.target.result)},n.readAsDataURL(this.files[a])}}},{key:"addPhoto",value:function(){for(var t,e=this,i=new FormData,a=0;a<(null===(t=this.files)||void 0===t?void 0:t.length);a++)i.append("Photos",this.files[a],this.files[a].name);this.loadingState=!0,this.photo.addPhotoForItem(this.itemId,i).subscribe((function(){e.snackBar.open("Photo Added successfully","\u2714",{duration:3e3}),e.loadingState=!1,e.router.navigateByUrl("/other/photos")}),(function(t){switch(t.status){case 401:e.snackBar.open("Authentication Failed. You have to login again\u2757","\u274c",{duration:2e3}),setTimeout((function(){e.router.navigateByUrl("/login")}),500);break;case 403:e.snackBar.open(t.error.message,"Error\u2757",{duration:2e3}),setTimeout((function(){e.router.navigateByUrl("/")}),500);break;case 400:e.snackBar.open("Validation Error","Error\u2757",{duration:2e3});break;default:e.snackBar.open("Something went wrong","Error\u2757",{duration:2e3})}e.loadingState=!1}))}},{key:"delete",value:function(){var t=this;this.dialog.open(b.a,{width:"500px",data:{message:this.item.name+" photos"}}).afterClosed().subscribe((function(e){e&&(t.loadingState=!0,t.photo.deletePhotosFromItem(t.item.id).subscribe((function(e){t.snackBar.open("Photos Deleted successfully","\u2714",{duration:3e3}),t.loadingState=!1}),(function(e){200===e.status?(t.snackBar.open("Photos Deleted successfully","\u2714",{duration:3e3}),t.loadingState=!1):(console.log(e),t.snackBar.open("Failed to delete! someting went wrong","ERROR",{duration:3e3}),t.loadingState=!1)})))}))}},{key:"itemStatusField",get:function(){return this.form.controls.itemStatus}},{key:"unitPriceField",get:function(){return this.form.controls.unitPrice}},{key:"unitsField",get:function(){return this.form.controls.units}},{key:"toCreationField",get:function(){return this.form.controls.toCreation}},{key:"descriptionField",get:function(){return this.form.controls.description}},{key:"nameField",get:function(){return this.form.controls.name}}]),t}()).\u0275fac=function(t){return new(t||ne)(l.Ob(m.a),l.Ob(o.a),l.Ob(d.a),l.Ob(At.a),l.Ob(u.b),l.Ob(o.c))},ne.\u0275cmp=l.Ib({type:ne,selectors:[["app-item-update-form"]],decls:90,vars:17,consts:[[3,"title","breadcrumbSegments"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-9"],[1,"form-group"],[1,"col-sm-3"],["appearance","outline",1,"w-100"],["required","","formControlName","itemStatus"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-9"],["matInput","","formControlName","name","required",""],[1,"col-sm-5"],["matInput","","formControlName","unitPrice","required",""],[1,"col-sm-7"],["required","","matInput","","formControlName","toCreation",3,"matDatepicker"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["matInput","","formControlName","description"],[1,"col-md-5"],["matInput","","formControlName","supplierId"],[1,"spacer"],[1,"col-md-6"],["type","number","matInput","","formControlName","units","required",""],[1,"text-right","mt-5","d-flex"],["routerLink","/items","mat-stroked-button","","color","primary",1,"ml-0"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"mr-0"],["align","right"],[1,"text-warning"],[1,"col-md-3"],["class","spinner",4,"ngIf","ngIfElse"],["photolist",""],[3,"value"],[1,"spinner"],["mode","indeterminate"],[1,"mat-h1","mt-3"],["id","file-uploader","type","file","accept","image/*","multiple","",1,"image-name",3,"change"],["mat-card-image","","alt","Photo of a item",3,"src"],["id","photoChooser","type","file",1,"image-name",2,"display","none"],[1,"d-flex","justify-content-center"],["mat-flat-button","","color","primary","type","button",3,"click"],["mat-flat-button","","color","accent","type","button",3,"click"],[1,"mt-3"],["mat-flat-button","","color","warn","type","button",3,"click"]],template:function(t,e){if(1&t&&(l.Pb(0,"app-page-header",0),l.Ub(1,"form",1),l.fc("ngSubmit",(function(){return e.submit()})),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"mat-card"),l.Ub(5,"mat-card-content"),l.Ub(6,"div",4),l.Ub(7,"div",2),l.Ub(8,"div",5),l.Ub(9,"mat-form-field",6),l.Ub(10,"mat-label"),l.Mc(11,"Item Status"),l.Tb(),l.Ub(12,"mat-select",7),l.Ub(13,"mat-option",8),l.Mc(14,"Select the Type"),l.Tb(),l.Kc(15,Lt,2,2,"mat-option",9),l.Tb(),l.Kc(16,zt,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Ub(17,"div",11),l.Ub(18,"mat-form-field",6),l.Ub(19,"mat-label"),l.Mc(20,"Item Name"),l.Tb(),l.Pb(21,"input",12),l.Ub(22,"mat-hint"),l.Mc(23,"Ex: Sound Setup"),l.Tb(),l.Kc(24,_t,4,3,"mat-error",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div",4),l.Ub(26,"div",2),l.Ub(27,"div",13),l.Ub(28,"mat-form-field",6),l.Ub(29,"mat-label"),l.Mc(30,"Unit Price"),l.Tb(),l.Pb(31,"input",14),l.Ub(32,"mat-hint"),l.Mc(33,"Ex: $7800 or $1970"),l.Tb(),l.Kc(34,Yt,3,2,"mat-error",10),l.Tb(),l.Tb(),l.Ub(35,"div",15),l.Ub(36,"mat-form-field",6),l.Ub(37,"mat-label"),l.Mc(38,"Date Added"),l.Tb(),l.Pb(39,"input",16),l.Pb(40,"mat-datepicker-toggle",17),l.Ub(41,"mat-datepicker",18,19),l.fc("yearSelected",(function(){return 1992})),l.Tb(),l.Kc(43,Wt,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(44,"div",4),l.Ub(45,"mat-form-field",6),l.Ub(46,"mat-label"),l.Mc(47,"Description"),l.Tb(),l.Pb(48,"textarea",20),l.Kc(49,Zt,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Ub(50,"div",4),l.Ub(51,"div",2),l.Ub(52,"div",21),l.Ub(53,"mat-form-field",6),l.Ub(54,"mat-label"),l.Mc(55,"Supplier Id"),l.Tb(),l.Pb(56,"input",22),l.Ub(57,"mat-hint"),l.Mc(58,"Info: Supplied by the System"),l.Tb(),l.Tb(),l.Tb(),l.Pb(59,"span",23),l.Ub(60,"div",24),l.Ub(61,"mat-form-field",6),l.Ub(62,"mat-label"),l.Mc(63,"No of Units"),l.Tb(),l.Pb(64,"input",25),l.Ub(65,"mat-hint"),l.Mc(66,"ex: 1 or 50"),l.Tb(),l.Kc(67,ee,2,1,"mat-error",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(68,"div",26),l.Ub(69,"button",27),l.Ub(70,"mat-icon"),l.Mc(71,"list"),l.Tb(),l.Mc(72," All Items"),l.Tb(),l.Pb(73,"span",23),l.Ub(74,"button",28),l.fc("click",(function(){return e.discardChanges()})),l.Ub(75,"mat-icon"),l.Mc(76,"refresh"),l.Tb(),l.Mc(77," Clear"),l.Tb(),l.Ub(78,"button",29),l.Ub(79,"mat-icon"),l.Mc(80,"save"),l.Tb(),l.Mc(81," Save"),l.Tb(),l.Tb(),l.Tb(),l.Ub(82,"mat-card-actions",30),l.Ub(83,"span",31),l.Mc(84,"*"),l.Tb(),l.Mc(85," Required Fields "),l.Tb(),l.Tb(),l.Tb(),l.Ub(86,"div",32),l.Kc(87,ie,4,0,"div",33),l.Kc(88,ae,19,1,"ng-template",null,34,l.Lc),l.Tb(),l.Tb(),l.Tb()),2&t){var i=l.yc(42),a=l.yc(89);l.sc("title","Item Change Form of ",e.item.code,""),l.qc("breadcrumbSegments",l.uc(15,re,"Change Details of "+e.item.code)),l.Bb(1),l.qc("formGroup",e.form),l.Bb(12),l.qc("value",null),l.Bb(2),l.qc("ngForOf",e.itemStatus),l.Bb(1),l.qc("ngIf",e.itemStatusField.invalid),l.Bb(8),l.qc("ngIf",e.nameField.invalid),l.Bb(10),l.qc("ngIf",e.unitPriceField.invalid),l.Bb(5),l.qc("matDatepicker",i),l.Bb(1),l.qc("for",i),l.Bb(3),l.qc("ngIf",e.toCreationField.invalid),l.Bb(6),l.qc("ngIf",e.descriptionField.invalid),l.Bb(18),l.qc("ngIf",e.unitsField.invalid),l.Bb(20),l.qc("ngIf",e.loadingState)("ngIfElse",a)}},directives:[f.a,F.w,F.o,F.i,h.a,h.c,D.c,D.g,K.a,F.t,F.n,F.g,O.n,c.l,c.m,x.b,F.c,D.f,j.b,j.d,D.h,j.a,F.r,g.b,o.d,v.a,h.b,D.b,Rt.a,h.d],styles:[".spinner[_ngcontent-%COMP%]{top:40%;left:30%;position:absolute}"]}),ne),oe=r("IOme"),se=r("bSwM");function be(t,e){if(1&t&&(l.Ub(0,"div",11),l.Ub(1,"mat-checkbox",12),l.fc("change",(function(){var t=e.$implicit;return t.checked=!t.checked})),l.Mc(2),l.Tb(),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.rc("value",i.id),l.qc("checked",i.checked),l.Bb(1),l.Nc(i.name)}}var le,me=((le=function(){function t(e,a){i(this,t),this.dialogRef=e,this.data=a}return n(t,[{key:"ngOnInit",value:function(){this.dialogRef.addPanelClass("custom-dialog"),oe.a.isDark()?this.dialogRef.addPanelClass("dark"):this.dialogRef.addPanelClass("light"),this.item=this.data.item,this.packages=this.data.packages}},{key:"updateItems",value:function(){this.dialogRef.close(this.packages)}}]),t}()).\u0275fac=function(t){return new(t||le)(l.Ob(u.g),l.Ob(u.a))},le.\u0275cmp=l.Ib({type:le,selectors:[["app-package-edit"]],decls:24,vars:4,consts:[[1,"dialog-wrapper"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"message"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["color","accent","mat-raised-button","",1,"mr-0",3,"click"],[1,"form-check"],[1,"example-margin",3,"value","checked","change"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"h1",1),l.Mc(2),l.Tb(),l.Ub(3,"mat-card"),l.Ub(4,"div",2),l.Ub(5,"p"),l.Mc(6,"Are you sure you want to Edit \u201c\xa0"),l.Ub(7,"span",3),l.Mc(8),l.Tb(),l.Mc(9,"\xa0\u201ds Packages?"),l.Tb(),l.Tb(),l.Ub(10,"div"),l.Ub(11,"form",4,5),l.Kc(13,be,3,3,"div",6),l.Tb(),l.Tb(),l.Ub(14,"div",7),l.Pb(15,"span",8),l.Ub(16,"button",9),l.Ub(17,"mat-icon"),l.Mc(18,"clear"),l.Tb(),l.Mc(19," No"),l.Tb(),l.Ub(20,"button",10),l.fc("click",(function(){return e.updateItems()})),l.Ub(21,"mat-icon"),l.Mc(22,"edit"),l.Tb(),l.Mc(23," Yes"),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(2),l.Oc("Add a Package for ",e.item.name,""),l.Bb(6),l.Nc(e.item.name),l.Bb(5),l.qc("ngForOf",e.packages),l.Bb(3),l.qc("mat-dialog-close",!1))},directives:[u.h,h.a,u.e,F.w,F.o,F.p,c.l,u.c,g.b,u.d,v.a,se.a],styles:[".message[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:110%}div[mat-dialog-actions][_ngcontent-%COMP%]{margin-bottom:-10px}.dialog-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}h1[_ngcontent-%COMP%]{margin-top:-24px;font-size:20px!important;margin-left:-24px!important;margin-right:-24px!important;padding:14px 14px 5px!important;border-bottom:1px solid rgba(0,0,0,.1)}"]}),le),ue=r("O+Qd"),de=r("IgKp");function fe(t,e){1&t&&(l.Ub(0,"div",3),l.Pb(1,"mat-spinner"),l.Ub(2,"h1",4),l.Mc(3,"Loading..."),l.Tb(),l.Tb())}function pe(t,e){1&t&&(l.Ub(0,"th",28),l.Mc(1,"ItemId"),l.Tb())}function he(t,e){if(1&t&&(l.Ub(0,"td",29),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc("SUP0",i.id,"")}}function ge(t,e){1&t&&(l.Ub(0,"th",28),l.Mc(1,"Item"),l.Tb())}function ve(t,e){if(1&t&&(l.Ub(0,"td",29),l.Mc(1),l.kc(2,"titlecase"),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",l.lc(2,1,i.name)," ")}}function Ue(t,e){1&t&&(l.Ub(0,"th",28),l.Mc(1,"Included Packages"),l.Tb())}function Te(t,e){if(1&t&&(l.Ub(0,"td",29),l.Mc(1),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.Oc(" ",i.packageItems," ")}}function ke(t,e){1&t&&l.Pb(0,"th",30)}function Ie(t,e){if(1&t){var i=l.Vb();l.Ub(0,"td",31),l.Ub(1,"button",32),l.fc("click",(function(){l.Bc(i);var t=e.$implicit;return l.jc(2).deleteModals(t)})),l.Ub(2,"mat-icon"),l.Mc(3,"delete"),l.Tb(),l.Mc(4," Remove"),l.Tb(),l.Tb()}}function ye(t,e){1&t&&l.Pb(0,"th",30)}function Me(t,e){if(1&t){var i=l.Vb();l.Ub(0,"td",31),l.Ub(1,"button",33),l.fc("click",(function(){l.Bc(i);var t=e.$implicit;return l.jc(2).editItemModals(t)})),l.Ub(2,"mat-icon"),l.Mc(3,"edit"),l.Tb(),l.Mc(4," Add Packages "),l.Tb(),l.Tb()}}function Be(t,e){1&t&&l.Pb(0,"th",30)}function Se(t,e){if(1&t&&(l.Ub(0,"td",31),l.Ub(1,"button",34),l.Ub(2,"mat-icon"),l.Mc(3,"visibility"),l.Tb(),l.Mc(4," More ..."),l.Tb(),l.Tb()),2&t){var i=e.$implicit;l.Bb(1),l.sc("routerLink","/items/",i.id,"")}}function Pe(t,e){1&t&&l.Pb(0,"tr",35)}function we(t,e){1&t&&l.Pb(0,"tr",36)}var qe=function(){return[5,10,25,50,100]};function Fe(t,e){if(1&t){var i=l.Vb();l.Ub(0,"div",5),l.Ub(1,"mat-card"),l.Ub(2,"mat-card-content"),l.Ub(3,"div",6),l.Ub(4,"div",7),l.Ub(5,"div",8),l.Ub(6,"mat-form-field",9),l.Ub(7,"mat-label"),l.Mc(8,"Filter by ID"),l.Tb(),l.Ub(9,"input",10),l.fc("keyup",(function(){return l.Bc(i),l.jc().loadData()})),l.Tb(),l.Tb(),l.Tb(),l.Pb(10,"span",11),l.Ub(11,"div",8),l.Ub(12,"mat-form-field",9),l.Ub(13,"mat-label"),l.Mc(14,"Filter by Item Name"),l.Tb(),l.Ub(15,"input",10),l.fc("keyup",(function(){return l.Bc(i),l.jc().loadData()})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"div",12),l.Ub(17,"table",13),l.Sb(18,14),l.Kc(19,pe,2,0,"th",15),l.Kc(20,he,2,1,"td",16),l.Rb(),l.Sb(21,17),l.Kc(22,ge,2,0,"th",15),l.Kc(23,ve,3,3,"td",16),l.Rb(),l.Sb(24,18),l.Kc(25,Ue,2,0,"th",15),l.Kc(26,Te,2,1,"td",16),l.Rb(),l.Sb(27,19),l.Kc(28,ke,1,0,"th",20),l.Kc(29,Ie,5,0,"td",21),l.Rb(),l.Sb(30,22),l.Kc(31,ye,1,0,"th",20),l.Kc(32,Me,5,0,"td",21),l.Rb(),l.Sb(33,23),l.Kc(34,Be,1,0,"th",20),l.Kc(35,Se,5,1,"td",21),l.Rb(),l.Kc(36,Pe,1,0,"tr",24),l.Kc(37,we,1,0,"tr",25),l.Tb(),l.Tb(),l.Ub(38,"div",26),l.Ub(39,"mat-paginator",27),l.fc("page",(function(t){return l.Bc(i),l.jc().paginate(t)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){var a=l.jc();l.Bb(9),l.qc("formControl",a.codeField),l.Bb(6),l.qc("formControl",a.nameField),l.Bb(2),l.qc("dataSource",a.items),l.Bb(19),l.qc("matHeaderRowDef",a.displayedColumns),l.Bb(1),l.qc("matRowDefColumns",a.displayedColumns),l.Bb(2),l.qc("length",a.items.length)("pageSize",25)("pageSizeOptions",l.tc(9,qe))("showFirstLastButtons",!0)}}var Ce,De,Ke,Oe,xe=function(){return["Items","Show All Items of Packages"]},je=((Ce=function(){function e(t,a,n,r,c){i(this,e),this.packagesToAdd=t,this.dialog=a,this.snackBar=n,this.mappingService=r,this.packageService=c,this.displayedColumns=["itemid","item","packages","delete-col","update-col","more-col"],this.packages=[],this.userParams={},this.pageSize=25,this.pageIndex=1,this.live=!1,this.codeField=new F.e,this.nameField=new F.e}return n(e,[{key:"ngOnInit",value:function(){this.loadingState=!0,this.live=!0,this.loadData()}},{key:"paginate",value:function(t){this.pagination.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.pageIndex=t.pageIndex+1,this.loadData()}},{key:"ngOnDestroy",value:function(){this.loadData(),this.live=!0,this.refreshData()}},{key:"refreshData",value:function(){this.loadData()}},{key:"loadData",value:function(){var t=this;this.userParams.name=this.nameField.value,this.userParams.id=this.codeField.value,this.packageService.getAll(this.pageIndex,this.pageSize,this.userParams).subscribe((function(e){t.packages=e.result}),(function(e){console.log(e),t.snackBar.open("Something went wrong\u2757","\u274c",{duration:3e3})})),this.mappingService.getPackageWithItems(this.pageIndex,this.pageSize,this.userParams).subscribe((function(e){t.loadingState=!1,t.items=e.body}),(function(e){switch(console.log(e),e.status){case 401:case 403:t.snackBar.open("Authorization Failed.","Access denied!",{duration:3e3}),setTimeout((function(){}),500);break;default:t.snackBar.open("there is a problem loading roles\u2757","\u274c",{duration:3e3})}}))}},{key:"editItemModals",value:function(e){var i=this;this.dialog.open(me,{width:"500px",data:{item:e,packages:this.getItemsArray(e)}}).afterClosed().subscribe((function(a){if(a){i.loadingState=!0;var n={packageNames:t(a.filter((function(t){return!0===t.checked})).map((function(t){return t.name}))),packageid:t(a.filter((function(t){return!0===t.checked})).map((function(t){return t.id})))};n&&i.packagesToAdd.addPackages(e.id,n).subscribe((function(){e.packageItems=t(n.packageNames),i.snackBar.open("packages Added successfully","\u2714",{duration:2e3}),i.loadData()}),(function(t){console.log(t),i.snackBar.open("Item already been added in the Package\u2757","\u274c",{duration:2e3}),i.loadingState=!1}))}}))}},{key:"deleteModals",value:function(e){var i=this;this.dialog.open(b.a,{width:"500px",data:{message:e.packageItems}}).afterClosed().subscribe((function(a){if(a){i.loadingState=!0;var n=i.getItemsArray(e),r={packageNames:t(n.map((function(t){return t.name}))),packageid:t(n.map((function(t){return t.id})))};n&&i.packagesToAdd.removePackages(e.id,r).subscribe((function(){i.snackBar.open("packages removed successfully","\u2714",{duration:2e3}),i.loadData()}),(function(t){console.log(t),i.snackBar.open("Something went wrong\u2757","\u274c",{duration:2e3}),i.loadingState=!1}))}}))}},{key:"getItemsArray",value:function(t){for(var e=[],i=t.packageItems,a=this.packages,n=0;n<a.length;n++){for(var r=!1,c=0;c<i.length;c++)if(a[n].name===i[c]){r=!0,a[n].checked=!0,e.push(a[n]);break}r||(a[n].checked=!1,e.push(a[n]))}return e}}]),e}()).\u0275fac=function(t){return new(t||Ce)(l.Ob(m.a),l.Ob(u.b),l.Ob(d.a),l.Ob(ue.a),l.Ob(de.a))},Ce.\u0275cmp=l.Ib({type:Ce,selectors:[["app-package-items"]],decls:4,vars:4,consts:[["title","Package Items",3,"breadcrumbSegments"],["class","spinner",4,"ngIf","ngIfElse"],["Supplierlist",""],[1,"spinner"],[1,"mat-h1","mt-3"],[1,"mat-elevation-z8"],[1,"mb-1"],[1,"row"],[1,"col-md-6","col-lg-3"],["appearance","outline",1,"w-100","search-form-field"],["matInput","",3,"formControl","keyup"],[1,"spacer"],[1,"table-responsive","table-striped"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","itemid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","item"],["matColumnDef","packages"],["matColumnDef","delete-col"],["class","btn-col","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","btn-col",4,"matCellDef"],["matColumnDef","update-col"],["matColumnDef","more-col"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-1"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"btn-col"],["mat-cell","",1,"btn-col"],["mat-raised-button","","color","warn",1,"mat-btn-sm",3,"click"],["mat-raised-button","","color","accent",1,"mat-btn-sm",3,"click"],["mat-raised-button","",1,"mat-btn-sm",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(l.Pb(0,"app-page-header",0),l.Kc(1,fe,4,0,"div",1),l.Kc(2,Fe,40,10,"ng-template",null,2,l.Lc)),2&t){var i=l.yc(3);l.qc("breadcrumbSegments",l.tc(3,xe)),l.Bb(1),l.qc("ngIf",e.loadingState)("ngIfElse",i)}},directives:[f.a,c.m,p.b,h.a,h.c,D.c,D.g,x.b,F.c,F.n,F.f,nt.j,nt.c,nt.e,nt.b,nt.g,nt.i,at.a,nt.d,nt.a,g.b,v.a,o.d,nt.f,nt.h],pipes:[c.v],styles:[".spinner[_ngcontent-%COMP%]{top:45%;left:47%;position:absolute}"]}),Ce),Ne=r("EY2u"),Ae=r("JIr8"),Re=((De=function(){function t(e,a){i(this,t),this.itemService=e,this.route=a}return n(t,[{key:"resolve",value:function(t){var e=this;return this.itemService.get(t.params.id).pipe(Object(Ae.a)((function(){return e.route.navigateByUrl("/items"),Ne.a})))}}]),t}()).\u0275fac=function(t){return new(t||De)(l.cc(m.a),l.cc(o.c))},De.\u0275prov=l.Kb({token:De,factory:De.\u0275fac,providedIn:"root"}),De),Le=[{path:"",component:Nt},{path:"add",component:it},{path:"showpackages",component:je},{path:":id",component:q,resolve:{item:Re}},{path:"edit/:id",component:ce,resolve:{item:Re}}],Ee=((Ke=function t(){i(this,t)}).\u0275mod=l.Mb({type:Ke}),Ke.\u0275inj=l.Lb({factory:function(t){return new(t||Ke)},imports:[[o.g.forChild(Le)],o.g]}),Ke),ze=r("hctd"),Ve=r("FpXt"),$e=((Oe=function t(){i(this,t)}).\u0275mod=l.Mb({type:Oe}),Oe.\u0275inj=l.Lb({factory:function(t){return new(t||Oe)},imports:[[c.c,Ee,Ve.a,ze.a,F.s,F.j]]}),Oe)}}])}();